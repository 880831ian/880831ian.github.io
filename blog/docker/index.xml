<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>PIN-YI â€“ Docker ç›¸é—œ</title><link>https://pin-yi.me/blog/docker/</link><description>Recent content in Docker ç›¸é—œ on PIN-YI</description><generator>Hugo -- gohugo.io</generator><language>zh-tw</language><atom:link href="https://pin-yi.me/blog/docker/index.xml" rel="self" type="application/rss+xml"/><item><title>ä½¿ç”¨ Prometheus å’Œ Grafana æ‰“é€ ç›£æ§é è­¦ç³»çµ± (Docker ç¯‡)</title><link>https://pin-yi.me/blog/docker/prometheus-grafana-docker/</link><pubDate>Wed, 18 May 2022 00:00:00 +0000</pubDate><guid>https://pin-yi.me/blog/docker/prometheus-grafana-docker/</guid><description>
&lt;p>é‚„è¨˜å¾—æˆ‘å€‘ä¸Šæ¬¡æ¶è¨­ EFK ä¾†ç²å¾—å®¹å™¨çš„æ—¥èªŒå—!?
èº«ç‚ºä¸€å€‹ SRE é™¤äº†æ”¶é›†æ—¥èªŒå¤–ï¼Œé‚„éœ€è¦ç›£æ§æ¯å€‹ç³»çµ±æˆ–æ˜¯æœå‹™çš„é‹è¡Œç‹€æ³ï¼Œä¸¦åœ¨è­¦æ€¥æƒ…æ³å³æ™‚é€šçŸ¥ç›¸é—œäººå“¡ä½œç‚ºæ‡‰å°è™•ç†ã€‚æ‰€ä»¥é€éå¥½çš„ Monitoring/Alert System äº†è§£ç›®å‰ Server ç¡¬é«”ç³»çµ±ç‹€æ³å’Œæ•´å€‹ Service çš„ç¶²è·¯ç‹€æ³æ˜¯ä¸€ä»¶éå¸¸é‡è¦çš„ä¸€ä»¶äº‹æƒ…ã€‚&lt;/p>
&lt;p>åœ¨çœ¾å¤šçš„ Monitor å·¥å…·ä¸­ï¼Œ&lt;a href="https://prometheus.io/" target="_blank" rel="noopener">Prometheus&lt;/a> æ˜¯ä¸€å€‹å¾ˆæ–¹ä¾¿ä¸”å®Œå–„çš„ç›£æ§é è­¦æ¡†æ¶ TSDB (Time Series Database) æ™‚é–“åºåˆ—è³‡æ–™åº«ï¼Œå¯ä»¥å¿«é€Ÿä¸”å®¹æ˜“çš„å»ºç«‹ä¸åŒç¶­åº¦çš„æŒ‡æ¨™ (Metrics) å’Œæ•´åˆä¸åŒçš„ Alert Tool ä»¥åŠè³‡è¨Šè¦–è¦ºåŒ–åœ–è¡¨çš„ç›£æ§å·¥å…·ä¸¦æä¾›è‡ªå¸¶çš„ &lt;a href="https://prometheus.io/docs/prometheus/latest/querying/basics/" target="_blank" rel="noopener">PromQL&lt;/a> é€²è¡Œ query æŸ¥è©¢ã€‚&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/docker/prometheus-grafana-docker/prometheus.png"
alt="Prometheus Logo" width="400">&lt;figcaption>
&lt;p>Prometheus Logo&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;p>æˆ‘å€‘å…ˆä¾†çœ‹çœ‹ Prometheus çš„æ¶æ§‹åœ–ï¼Œå¯ä»¥æ›´äº†è§£ Prometheus æ•´é«”çš„å®šä½ï¼š&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/docker/prometheus-grafana-docker/prometheus-architecture.jpg"
alt="Prometheus æ¶æ§‹åœ– (åœ–ç‰‡ä¾†æºï¼šä½¿ç”¨ Prometheus å’Œ Grafana æ‰“é€  Flask Web App ç›£æ§é è­¦ç³»çµ±)" width="800">&lt;figcaption>
&lt;p>Prometheus æ¶æ§‹åœ– (åœ–ç‰‡ä¾†æºï¼š&lt;a href="https://blog.techbridge.cc/2019/08/26/how-to-use-prometheus-grafana-in-flask-app/" target="_blank" rel="noopener">ä½¿ç”¨ Prometheus å’Œ Grafana æ‰“é€  Flask Web App ç›£æ§é è­¦ç³»çµ±&lt;/a>)&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;ol>
&lt;li>
&lt;p>æœ‰ä¸€å€‹ Prometheus server ä¸»é«”ï¼Œæœƒå» Prometheus Client Pull ç›¸é—œçš„æŒ‡æ¨™ (Metrics)ï¼Œè‹¥æ˜¯çŸ­æœŸçš„ Job ä¾‹å¦‚ CronJob åœ¨é‚„ä¾†ä¸åŠ Pull è³‡æ–™å›ä¾†å¯èƒ½å°±å·²ç¶“å®Œæˆä»»å‹™äº†ã€æ¸…æ´—æ‰è³‡æ–™ã€‚æ‰€ä»¥æœƒæœ‰ä¸€å€‹ &lt;code>pushgateway&lt;/code> æ¥æ”¶ Job Push éä¾†çš„ç›¸é—œè³‡è¨Šï¼ŒPrometheus Server å†å¾å…¶ä¸­æ‹‰å–è³‡æ–™ã€‚ (åœ–ç‰‡å·¦åŠéƒ¨)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Service Discovery å¯ä»¥æ›´å¥½çš„è’é›† Kubernetes ç›¸é—œçš„è³‡è¨Šã€‚ (åœ–ç‰‡ä¸ŠåŠéƒ¨)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Prometheus Server ä¸»é«”æœƒå°‡è³‡æ–™å„²å­˜åœ¨ Local On-Disk Time Series Database æˆ–æ˜¯å¯ä»¥ä¸²æ¥ Remote Storage Systemsã€‚(åœ–ç‰‡ä¸‹åŠéƒ¨)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Prometheus Server è³‡æ–™æ‹‰å›ä¾†å¾Œå¯ä»¥ä½¿ç”¨æœ¬èº«è‡ªå¸¶çš„ Web UI æˆ–æ˜¯ Grafana ç­‰å…¶ä»–çš„ Client ä¾†å‘ˆç¾ã€‚(åœ–ç‰‡å³ä¸‹åŠéƒ¨)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç•¶æŠ“å–è³‡æ–™çš„å€¼è¶…é Alert Rule æ‰€è¨­å®šçš„é–¥å€¼ (threshold) æ™‚ï¼ŒAlertmanager å°±æœƒå°‡è¨Šæ¯é€å‡ºï¼Œå¯ä»¥é€é Emailã€Slack ç­‰è¨Šæ¯é€šçŸ¥ï¼Œæé†’ç›¸é—œäººå“¡é€²è¡Œè™•ç†ã€‚(åœ–ç‰‡å³ä¸ŠåŠéƒ¨)&lt;/p>
&lt;/li>
&lt;/ol>
&lt;br>
&lt;p>Prometheus å¯èƒ½åœ¨å„²å­˜æ“´å±•ä¸Šæ¯”ä¸ä¸Šå…¶ä»– Time Series Databaseï¼Œä½†åœ¨æ•´åˆå„ç¨®ç¬¬ä¸‰æ–¹çš„ Data Source ä¸Šååˆ†æ–¹ä¾¿ï¼Œä¸”åœ¨æ”¯æ´é›²ç«¯æœå‹™å’Œ Container å®¹å™¨ç›¸é—œå·¥å…·ä¹Ÿååˆ†å‹å¥½ã€‚ä½†åœ¨åœ–ç‰‡çš„è¡¨ç¾ä¸Šå°±ç›¸è¼ƒæ–¼å–®è–„ï¼Œæ‰€ä»¥æœƒæ­é…æˆ‘å€‘æ¥ä¸‹ä¾†è¦ä»‹ç´¹çš„ Grafanac ç²¾ç¾å„€è¡¨æ¿å·¥å…·ä¾†é€²è¡Œè³‡è¨Šè¦–è¦ºåŒ–å’Œåœ–è¡¨çš„å‘ˆç¾ã€‚&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/docker/prometheus-grafana-docker/grafana.jpg"
alt="Grafana Logo" width="400">&lt;figcaption>
&lt;p>Grafana Logo&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;p>Grafana æ˜¯ç”± Grafana Lab ç¶“ç‡Ÿçš„ä¸€å€‹éå¸¸ç²¾ç¾çš„å„€è¡¨æ¿ç³»çµ±ï¼Œå¯ä»¥æ•´åˆå„ç¨®ä¸åŒçš„ Data Sourceï¼Œä¾‹å¦‚ï¼šPrometheusã€Elasticsearchã€MySQLã€PostgreSQL ç­‰ã€‚é€éä¸åŒç¨®æŒ‡æ¨™ (Metrics) å‘ˆç¾åœ¨ Dashboard ä¸Šã€‚å¦‚æœé‚„æ˜¯ä¸å¤ªæ¸…æ¥šï¼Œå¯ä»¥æŠŠ Prometheus Grafana åˆ†åˆ¥æƒ³æˆ Prometheus æ˜¯ EFK çš„ Elasticsearchï¼ŒGrafana æƒ³æˆæ˜¯ EFK çš„ Kibanaã€‚&lt;/p>
&lt;br>
&lt;p>ä»Šå¤©æˆ‘å€‘è¦é€é Docker-Compose æ­é… Nginx å¯¦ä½œä¸€å€‹ç°¡å–®çš„ Web Service ç¯„ä¾‹ï¼Œä¸¦æ•´åˆ &lt;a href="https://prometheus.io/" target="_blank" rel="noopener">Prometheus&lt;/a> å’Œ &lt;a href="https://grafana.com/" target="_blank" rel="noopener">Grafana&lt;/a> ä¾†å»ºç«‹ä¸€å€‹ Web Service ç›£æ§é è­¦ç³»çµ±ã€‚&lt;/p>
&lt;p>æ­¤æ–‡ç« ç¨‹å¼ç¢¼ä¹ŸæœƒåŒæ­¥åˆ° Github ï¼Œéœ€è¦çš„ä¹Ÿå¯ä»¥å»æŸ¥çœ‹æ­ï¼è¦è¨˜å¾—å…ˆç¢ºå®šä¸€ä¸‹è‡ªå·±çš„ç‰ˆæœ¬ &lt;a href="https://github.com/880831ian/Prometheus-Grafana-Docker" target="_blank" rel="noopener">Github ç¨‹å¼ç¢¼é€£çµ&lt;/a> ğŸ˜†&lt;/p>
&lt;br>
&lt;h2>ç‰ˆæœ¬è³‡è¨Š&lt;span class="hx-absolute -hx-mt-20" id="ç‰ˆæœ¬è³‡è¨Š">&lt;/span>
&lt;a href="#%e7%89%88%e6%9c%ac%e8%b3%87%e8%a8%8a" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;ul>
&lt;li>macOSï¼š11.6&lt;/li>
&lt;li>Dockerï¼šDocker version 20.10.14, build a224086&lt;/li>
&lt;li>Nginxï¼š&lt;a href="https://hub.docker.com/layers/nginx/library/nginx/1.21.6/images/sha256-b495f952df67472c3598b260f4b2e2ba9b5a8b0af837575cf4369c95c8d8a215?context=explore" target="_blank" rel="noopener">1.21.6&lt;/a>&lt;/li>
&lt;li>Prometheusï¼š&lt;a href="https://hub.docker.com/layers/prometheus/prom/prometheus/v2.35.0/images/sha256-4b86ad59abc67fa19a6e1618e936f3fd0f6ae13f49260da55a03eeca763a0fb5?context=explore" target="_blank" rel="noopener">v.2.35.0&lt;/a>&lt;/li>
&lt;li>nginx-prometheus-exporterï¼š&lt;a href="https://hub.docker.com/layers/nginx-prometheus-exporter/nginx/nginx-prometheus-exporter/0.10/images/sha256-f2aa9848516ff4c9f4c6d5bcb758b0fab519eff644f526e4c9a17d3083b54dde?context=explore" target="_blank" rel="noopener">0.10&lt;/a>&lt;/li>
&lt;li>Grafanaï¼š&lt;a href="https://hub.docker.com/layers/grafana/grafana/grafana/8.2.5/images/sha256-1a154d1161ed65eaf87368d08149a8bbcf9962ac03dd5ff639a6b9d468a77a36?context=explore" target="_blank" rel="noopener">8.2.5&lt;/a> (æœ€æ–°ç‰ˆæœ¬æ˜¯ 8.5.2ï¼Œä½†é¸æ“‡ 8.2.5ï¼Œæ˜¯å› ç‚º 8.3.0 å¾Œ Alerting æ²’æœ‰è¾¦æ³•é™„ä¸Šåœ–ç‰‡ï¼Œè©³ç´°åŸå› å¯ä»¥åƒè€ƒ &lt;a href="https://github.com/grafana/grafana/discussions/38030" target="_blank" rel="noopener">Add &amp;ldquo;include image&amp;rdquo; option into Grafana Alerting&lt;/a> )&lt;/li>
&lt;li>grafana/grafana-image-rendererï¼š&lt;a href="https://hub.docker.com/layers/grafana-image-renderer/grafana/grafana-image-renderer/3.4.2/images/sha256-fd9d7b764597e84e447e6c8440e44e18c9f74728e3928156ea92599fe6f19e7d?context=explore" target="_blank" rel="noopener">3.4.2&lt;/a>&lt;/li>
&lt;/ul>
&lt;br>
&lt;h2>æª”æ¡ˆçµæ§‹&lt;span class="hx-absolute -hx-mt-20" id="æª”æ¡ˆçµæ§‹">&lt;/span>
&lt;a href="#%e6%aa%94%e6%a1%88%e7%b5%90%e6%a7%8b" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;div class="hextra-filetree hx-mt-6 hx-select-none hx-text-sm hx-text-gray-800 dark:hx-text-gray-300 not-prose">
&lt;div class="hx-inline-block hx-rounded-lg hx-border hx-px-4 hx-py-2 dark:hx-border-neutral-800">
&lt;li class="hx-flex hx-list-none">
&lt;span class="hx-inline-flex hx-cursor-default hx-items-center hx-py-1">&lt;svg width=1em xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true">&lt;path stroke-linecap="round" stroke-linejoin="round" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>&lt;/svg>&lt;span class="ltr:hx-ml-1 rtl:hx-mr-1">docker-compose.yaml&lt;/span>
&lt;/span>
&lt;/li>
&lt;li class="hx-group hx-flex hx-list-none hx-flex-col">
&lt;button class="hextra-filetree-folder hx-inline-flex hx-cursor-pointer hx-items-center hx-py-1 hover:hx-opacity-60">
&lt;span data-state="open" class="data-[state=open]:hx-hidden">&lt;svg width=1em xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true">&lt;path stroke-linecap="round" stroke-linejoin="round" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"/>&lt;/svg>&lt;/span>
&lt;span data-state="open" class="data-[state=closed]:hx-hidden">&lt;svg width=1em xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true">&lt;path stroke-linecap="round" stroke-linejoin="round" d="M5 19a2 2 0 01-2-2V7a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1M5 19h14a2 2 0 002-2v-5a2 2 0 00-2-2H9a2 2 0 00-2 2v5a2 2 0 01-2 2z"/>&lt;/svg>&lt;/span>
&lt;span class="ltr:hx-ml-1 rtl:hx-mr-1">nginx&lt;/span>
&lt;/button>
&lt;ul data-state="open" class="ltr:hx-pl-5 rtl:hx-pr-5 data-[state=closed]:hx-hidden">
&lt;li class="hx-flex hx-list-none">
&lt;span class="hx-inline-flex hx-cursor-default hx-items-center hx-py-1">&lt;svg width=1em xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true">&lt;path stroke-linecap="round" stroke-linejoin="round" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>&lt;/svg>&lt;span class="ltr:hx-ml-1 rtl:hx-mr-1">Dockerfile&lt;/span>
&lt;/span>
&lt;/li>
&lt;li class="hx-flex hx-list-none">
&lt;span class="hx-inline-flex hx-cursor-default hx-items-center hx-py-1">&lt;svg width=1em xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true">&lt;path stroke-linecap="round" stroke-linejoin="round" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>&lt;/svg>&lt;span class="ltr:hx-ml-1 rtl:hx-mr-1">status.conf&lt;/span>
&lt;/span>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li class="hx-flex hx-list-none">
&lt;span class="hx-inline-flex hx-cursor-default hx-items-center hx-py-1">&lt;svg width=1em xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true">&lt;path stroke-linecap="round" stroke-linejoin="round" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>&lt;/svg>&lt;span class="ltr:hx-ml-1 rtl:hx-mr-1">prometheus.yaml&lt;/span>
&lt;/span>
&lt;/li>
&lt;li class="hx-flex hx-list-none">
&lt;span class="hx-inline-flex hx-cursor-default hx-items-center hx-py-1">&lt;svg width=1em xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true">&lt;path stroke-linecap="round" stroke-linejoin="round" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>&lt;/svg>&lt;span class="ltr:hx-ml-1 rtl:hx-mr-1">test.sh&lt;/span>
&lt;/span>
&lt;/li>
&lt;/div>
&lt;/div>
&lt;p>é€™æ˜¯ä¸»è¦çš„çµæ§‹ï¼Œç°¡å–®èªªæ˜ä¸€ä¸‹ï¼š&lt;/p>
&lt;ul>
&lt;li>docker-compose.yamlï¼šæœƒæ”¾ç½®è¦ç”¢ç”Ÿçš„ nginxã€nginx-prometheus-exporterã€prometheusã€grafanaã€grafana-image-renderer å®¹å™¨è¨­å®šæª”ã€‚&lt;/li>
&lt;li>nginx/Dockerfileï¼šå› ç‚ºåœ¨ nginx è¦ä½¿ç”¨ stub_status éœ€è¦å¤šå®‰è£ä¸€äº›è¨­å®šï¼Œæ‰€ä»¥ç”¨ Dockerfile å¦å¤–å¯« nginx çš„æ˜ åƒæª”ã€‚&lt;/li>
&lt;li>nginx/status.confï¼šnginx çš„è¨­å®šæª”ã€‚&lt;/li>
&lt;li>prometheus.yamlï¼šprometheus çš„è¨­å®šæª”ã€‚&lt;/li>
&lt;li>test.shï¼šæ¸¬è©¦ç”¨æª”æ¡ˆ(å¾ŒçºŒæœƒæ•™å¤§å®¶å¦‚ä½•ä½¿ç”¨)ã€‚&lt;/li>
&lt;/ul>
&lt;br>
&lt;h2>å¯¦ä½œ&lt;span class="hx-absolute -hx-mt-20" id="å¯¦ä½œ">&lt;/span>
&lt;a href="#%e5%af%a6%e4%bd%9c" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>æ¥ä¸‹ä¾†æœƒä¾ç…§åŸ·è¡Œçš„æµç¨‹ä¾†è·Ÿå¤§å®¶èªªæ˜æ­ï¼é‚£è¦é–‹å§‹å›‰ ğŸ˜&lt;/p>
&lt;p>æˆ‘å€‘è¦å»ºç«‹ä¸€å€‹ Nginx ä¾†æ¨¡æ“¬å—ç›£æ§çš„æœå‹™ï¼Œæˆ‘å€‘è¦é€é nginx-prometheus-exporter ä¾†è®“ Prometheus æŠ“åˆ°è³‡æ–™æœ€å¾Œå‚³çµ¦ Grafanaï¼Œæ‰€ä»¥æˆ‘å€‘åœ¨ Docker-compose è£¡é¢æœƒæœ‰ nginxã€nginx-prometheus-exporterã€prometheusã€grafanaã€grafana-image-renderer å¹¾å€‹å®¹å™¨ï¼Œæˆ‘å€‘å…ˆçœ‹ä¸€ä¸‹ç¨‹å¼ç¢¼ï¼Œå†ä¾†èªªæ˜ç¨‹å¼ç¢¼è¨­å®šäº†å“ªäº›æ±è¥¿å§ï¼&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div class="filename not-prose" dir="auto">Docker-compose.yaml&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">version&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;3.8&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">services&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">nginx&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">build&lt;/span>: &lt;span style="color:#ae81ff">./nginx/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">container_name&lt;/span>: &lt;span style="color:#ae81ff">nginx&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ports&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">8080&lt;/span>:&lt;span style="color:#ae81ff">8080&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">nginx-prometheus-exporter&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">image&lt;/span>: &lt;span style="color:#ae81ff">nginx/nginx-prometheus-exporter:0.10&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">container_name&lt;/span>: &lt;span style="color:#ae81ff">nginx-prometheus-exporter&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">command&lt;/span>: -&lt;span style="color:#ae81ff">nginx.scrape-uri http://nginx:8080/stub_status&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ports&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">9113&lt;/span>:&lt;span style="color:#ae81ff">9113&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">depends_on&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">nginx&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">prometheus&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">image&lt;/span>: &lt;span style="color:#ae81ff">prom/prometheus:v2.35.0&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">container_name&lt;/span>: &lt;span style="color:#ae81ff">prometheus&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">./prometheus.yaml:/etc/prometheus/prometheus.yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">./prometheus_data:/prometheus&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">command&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#e6db74">&amp;#34;--config.file=/etc/prometheus/prometheus.yaml&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ports&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#e6db74">&amp;#34;9090:9090&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">renderer&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">image&lt;/span>: &lt;span style="color:#ae81ff">grafana/grafana-image-renderer:3.4.2&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">environment&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">BROWSER_TZ&lt;/span>: &lt;span style="color:#ae81ff">Asia/Taipei&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ports&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#e6db74">&amp;#34;8081:8081&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">grafana&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">image&lt;/span>: &lt;span style="color:#ae81ff">grafana/grafana:8.2.5&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">container_name&lt;/span>: &lt;span style="color:#ae81ff">grafana&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">./grafana_data:/var/lib/grafana&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">environment&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">GF_SECURITY_ADMIN_PASSWORD&lt;/span>: &lt;span style="color:#ae81ff">pass&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">GF_RENDERING_SERVER_URL&lt;/span>: &lt;span style="color:#ae81ff">http://renderer:8081/render&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">GF_RENDERING_CALLBACK_URL&lt;/span>: &lt;span style="color:#ae81ff">http://grafana:3000/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">GF_LOG_FILTERS&lt;/span>: &lt;span style="color:#ae81ff">rendering:debug&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">depends_on&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">prometheus&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">renderer&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ports&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#e6db74">&amp;#34;3000:3000&amp;#34;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-8">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;ul>
&lt;li>nginxï¼šå› ç‚º Nginx æœƒé€šé stub_status é é¢ä¾†é–‹æ”¾å°å¤–çš„ç›£æ§æŒ‡æ¨™ã€‚æ‰€ä»¥æˆ‘å€‘è¦å¦å¤–å¯«ä¸€å€‹ Dockerfile è¨­å®šæª”ï¼Œå…ˆå°‡ &lt;code>conf&lt;/code> æ”¾å…¥ Nginx ä¸­ã€‚&lt;/li>
&lt;li>nginx-prometheus-exporterï¼šé€™è£¡è¦æ³¨æ„çš„æ˜¯éœ€è¦ä½¿ç”¨ command ä¾†è¨­å®š nginx.scrapt-urlï¼Œæˆ‘å€‘è¨­å®š &lt;code>http://nginx:8080/stub_status&lt;/code>ï¼Œä»–çš„é è¨­ Port æ˜¯ &lt;code>9113&lt;/code>ï¼Œä¸¦è¨­å®šä¾è³´ &lt;code>depends_no&lt;/code>ï¼Œè¦ nginx å…ˆå•Ÿå‹•å¾Œæ‰æœƒåŸ·è¡Œ &lt;code>nginx-prometheus-exporter&lt;/code>ã€‚&lt;/li>
&lt;li>prometheusï¼šå°‡ prometheus.yaml è¨­å®šæª”æ”¾å…¥ &lt;code>/etc/prometheus/prometheus.yaml&lt;/code>ï¼Œä»¥åŠæ›è¼‰ä¸€å€‹ &lt;code>/prometheus_data&lt;/code> ä¾†æ°¸ä¹…ä¿å­˜ prometheus çš„è³‡æ–™ï¼Œæœ€å¾Œ command åŠ å…¥ &lt;code>--config.file&lt;/code> è¨­å®šã€‚&lt;/li>
&lt;li>rendererï¼šé€™æ˜¯ grafana é¡¯ç¤ºåœ–ç‰‡çš„å¥—ä»¶ï¼Œæˆ‘å€‘ä½¿ç”¨ 3.4.2 ç‰ˆæœ¬ï¼Œè¨˜å¾—è¦è¨­å®šç’°å¢ƒè®Šæ•¸ï¼Œç…§ç‰‡é¡¯ç¤ºçš„æ™‚é–“æ‰æœƒæ­£ç¢ºï¼Œä¸¦é–‹å•Ÿ 8081 Port è®“ grafana è¨ªå•ã€‚&lt;/li>
&lt;li>grafanaï¼šä¸€æ¨£æˆ‘å€‘å…ˆæ›è¼‰ä¸€å€‹ &lt;code>/grafana_data&lt;/code> ä¾†æ°¸ä¹…ä¿å­˜ grafana çš„è¨­å®šï¼Œåœ¨ç’°å¢ƒè®Šæ•¸ä¸­è¨­å®šé è¨­å¸³è™Ÿ &lt;code>admin&lt;/code> çš„å¯†ç¢¼æ˜¯ &lt;code>pass&lt;/code>ï¼Œè¨­å®š renderer å¥—ä»¶çš„æœå‹™ä½ç½®æ˜¯ &lt;code>http://renderer:8081/render&lt;/code> ä»¥åŠå›å‚³åˆ° &lt;code>http://grafana:3000/&lt;/code>ï¼Œä¸¦è¨­å®šä¾è³´ &lt;code>depends_on&lt;/code> prometheus è·Ÿ rendererï¼Œæœ€å¾Œè¨­å®š grafana è¦å‘ˆç¾çš„ç•«é¢ 3000 Portã€‚&lt;/li>
&lt;/ul>
&lt;br>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div class="filename not-prose" dir="auto">nginx/Dockerfile&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-dockerfile" data-lang="dockerfile">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">FROM&lt;/span>&lt;span style="color:#e6db74"> nginx:1.21.6&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">&lt;/span>&lt;span style="color:#66d9ef">COPY&lt;/span> ./status.conf /etc/nginx/conf.d/status.conf&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-8">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>é¸æ“‡æˆ‘å€‘è¦ä½¿ç”¨çš„ nginx image ç‰ˆæœ¬ï¼Œä¸¦å°‡æˆ‘å€‘çš„è¨­å®šæª”ï¼Œè¤‡è£½åˆ°å®¹å™¨å…§ã€‚&lt;/p>
&lt;br>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div class="filename not-prose" dir="auto">nginx/status.conf&lt;/div>&lt;div>&lt;pre>&lt;code>server {
listen 8080;
server_name localhost;
location /stub_status {
stub_status on;
access_log off;
}
}&lt;/code>&lt;/pre>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-8">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>é€™é‚Šæœ€é‡è¦çš„å°±æ˜¯è¦è¨­å®š &lt;code>/stub_status&lt;/code> è·¯å¾‘ï¼Œä¸¦é–‹å•Ÿ stub_status ï¼Œé€™æ¨£æ‰å¯ä»¥è®“ nginx-prometheus-exporter æŠ“åˆ°è³‡æ–™ï¼(è¦æ€éº¼çŸ¥é“ Nginx æ˜¯å¦é–‹å•Ÿ &lt;code>stub_status&lt;/code>ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code>nginx -V 2&amp;gt;&amp;amp;1 | grep -o with-http_stub_status_module&lt;/code> æŒ‡ä»¤æª¢æŸ¥ï¼Œæˆ‘å€‘é€™æ¬¡è£çš„ Image å·²ç¶“æœ‰å¹«æˆ‘å€‘å•Ÿå‹•)&lt;/p>
&lt;br>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div class="filename not-prose" dir="auto">prometheus.yaml&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">global&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">scrape_interval&lt;/span>: &lt;span style="color:#ae81ff">5s&lt;/span> &lt;span style="color:#75715e"># Server æŠ“å–é »ç‡&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">external_labels&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">monitor&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;my-monitor&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">scrape_configs&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">job_name&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;prometheus&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">static_configs&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">targets&lt;/span>: [&lt;span style="color:#e6db74">&amp;#34;localhost:9090&amp;#34;&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">job_name&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;nginx_exporter&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">static_configs&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">targets&lt;/span>: [&lt;span style="color:#e6db74">&amp;#34;nginx-prometheus-exporter:9113&amp;#34;&lt;/span>]&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-8">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>é€™é‚Šæ˜¯ prometheus çš„è¨­å®šæª”ï¼Œä¾‹å¦‚æœ‰ scrape_interval ä»£è¡¨ Server æ¯æ¬¡æŠ“å–è³‡æ–™çš„é »ç‡ï¼Œæˆ–æ˜¯è¨­å®š monitor çš„ labelsï¼Œä¸‹é¢çš„ configsï¼Œåˆ†åˆ¥è¨­å®šäº† prometheus å®ƒçš„ targets æ˜¯ &lt;code>[&amp;quot;localhost:9090&amp;quot;]&lt;/code> ä»¥åŠ nginx_exporter å®ƒçš„ targets æ˜¯ &lt;code>[&amp;quot;nginx-prometheus-exporter:9113&amp;quot;]&lt;/code>ã€‚&lt;/p>
&lt;br>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div class="filename not-prose" dir="auto">test.sh&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>docker&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;docker exec nginx&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">for&lt;/span> i in &lt;span style="color:#f92672">{&lt;/span>1..10&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">do&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> $docker curl http://nginx:8080/stub_status -s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">done&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-8">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>é€™å€‹æ˜¯æˆ‘è‡ªå·±å¦å¤–å¯«çš„æ¸¬è©¦ç¨‹å¼ï¼Œåœ¨æœ¬æ©ŸåŸ·è¡Œå¾Œä»–æœƒè¨ªå• nginx å®¹å™¨å…§éƒ¨ï¼Œä¸¦æ¨¡æ“¬ nginx æµé‡ï¼Œè®“æˆ‘å€‘åœ¨ Grafana å¯ä»¥æ¸…æ¥šçœ‹åˆ°è³‡æ–™ã€‚&lt;/p>
&lt;br>
&lt;h3>åŸ·è¡Œ/æ¸¬è©¦&lt;span class="hx-absolute -hx-mt-20" id="åŸ·è¡Œæ¸¬è©¦">&lt;/span>
&lt;a href="#%e5%9f%b7%e8%a1%8c%e6%b8%ac%e8%a9%a6" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>ç•¶æˆ‘å€‘éƒ½å¯«å¥½è¨­å®šæª”å¾Œï¼Œåœ¨å°ˆæ¡ˆç›®éŒ„ä¸‹ï¼Œä¹Ÿå°±æ˜¯æœ‰ Docker-compose è·¯å¾‘ä¸‹ï¼Œä½¿ç”¨ &lt;code>docker-compose up -d&lt;/code> ä¾†å•Ÿå‹•å®¹å™¨ï¼š&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/docker/prometheus-grafana-docker/run_1.png"
alt="å•Ÿå‹•å®¹å™¨" width="600">&lt;figcaption>
&lt;p>å•Ÿå‹•å®¹å™¨&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;p>æ¥ä¸‹ä¾†æˆ‘å€‘ä¾åºæª¢æŸ¥å®¹å™¨æ˜¯å¦éƒ½æœ‰æ­£å¸¸é‹ä½œï¼Œé–‹å•Ÿç€è¦½å™¨ç€è¦½ &lt;code>http://localhost:9113/metrics&lt;/code> æŸ¥çœ‹æ˜¯å¦æœ‰å‡ºç¾è·Ÿä¸‹é¢åœ–ç‰‡å·®ä¸å¤šçš„å…§å®¹ï¼š&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/docker/prometheus-grafana-docker/run_2.png"
alt="æª¢æŸ¥ Nginx ä»¥åŠ nginx-prometheus-exporter çš„è¨­å®š" width="800">&lt;figcaption>
&lt;p>æª¢æŸ¥ Nginx ä»¥åŠ nginx-prometheus-exporter çš„è¨­å®š&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;p>å¦‚æœæœ‰å‡ºç¾ï¼Œæ­å–œä½ å®Œæˆäº† Nginx ä»¥åŠ nginx-prometheus-exporter çš„è¨­å®šï¼Œæˆ‘å€‘å°‡ Nginx çš„ &lt;code>stub_status&lt;/code> æœå‹™ï¼Œé€é &lt;code>http://nginx:8080/stub_status&lt;/code> è®“ nginx-prometheus-exporter å¯ä»¥æŠ“åˆ°åœ–ç‰‡ä¸­çš„é€™äº›æŒ‡æ¨™ (Metrics)ã€‚&lt;/p>
&lt;br>
&lt;h4>Prometheus&lt;span class="hx-absolute -hx-mt-20" id="prometheus">&lt;/span>
&lt;a href="#prometheus" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h4>&lt;p>æ¥è‘—æˆ‘å€‘ç€è¦½ &lt;code>http://localhost:9090/targets&lt;/code>ï¼Œçœ‹çœ‹æˆ‘å€‘çš„ Prometheus æœ‰æ²’æœ‰è¨­å®šæ­£ç¢ºï¼ŒæŠ“åˆ°æˆ‘å€‘è¨­å®šå¥½çš„ targetsï¼š&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/docker/prometheus-grafana-docker/run_3.png"
alt="æª¢æŸ¥ Prometheus targets" width="1200">&lt;figcaption>
&lt;p>æª¢æŸ¥ Prometheus targets&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;p>å¦‚æœå…©å€‹å‡ºç¾çš„éƒ½æ˜¯ &lt;font color='green'>ç¶ è‰²çš„ UP&lt;/font> å°±ä»£è¡¨æ­£å¸¸æœ‰æŠ“åˆ°è³‡æ–™å›‰ï¼&lt;/p>
&lt;br>
&lt;p>é‚£è¦æ€éº¼æ¸¬è©¦æ‰çŸ¥é“æœ‰æŠ“åˆ°è³‡æ–™å‘¢ï¼Ÿæˆ‘å€‘å¯ä»¥å…ˆç”¨ Prometheus å…§å»ºçš„åœ–å½¢åŒ–ä»‹é¢ä¾†æª¢æŸ¥ï¼Œåœ¨ç€è¦½å™¨ç€è¦½ &lt;code>http://localhost:9090/graph&lt;/code> å°±å¯ä»¥çœ‹åˆ°ä¸‹é¢çš„ç•«é¢ï¼š&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/docker/prometheus-grafana-docker/run_4.png"
alt="Prometheus å…§å»ºçš„åœ–å½¢åŒ–ä»‹é¢" width="800">&lt;figcaption>
&lt;p>Prometheus å…§å»ºçš„åœ–å½¢åŒ–ä»‹é¢&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;p>æˆ‘å€‘é¸æ“‡ &lt;code>Graph&lt;/code>ï¼Œä¸¦åœ¨ä¸Šé¢çš„æœå°‹æ¬„ï¼Œæ‰“ä¸Š &lt;code>nginx_connections_accepted&lt;/code> æŒ‰ä¸‹å³é‚Šçš„ Execute å°±æœƒç”¢ç”Ÿä¸€å¼µåœ–è¡¨ï¼Œåœ–è¡¨è£¡é¢åªæœ‰ä¸€æ¢ç¶ è‰²çš„ç·šï¼Œé‚£é€™å€‹ç·šæ˜¯ä»€éº¼å‘¢ï¼Ÿå®ƒå°±æ˜¯æˆ‘å€‘å‰›å‰›åœ¨ &lt;code>http://localhost:9113/metrics&lt;/code> å…¶ä¸­ä¸€å€‹æŒ‡æ¨™ (Metrics)ï¼Œå®ƒä»£è¡¨ Nginx æ¥å—ç”¨æˆ¶ç«¯é€£æ¥ç¸½æ•¸é‡ï¼š&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/docker/prometheus-grafana-docker/run_5.png"
alt="Prometheus å…§å»ºçš„åœ–å½¢åŒ–ä»‹é¢" width="1200">&lt;figcaption>
&lt;p>Prometheus å…§å»ºçš„åœ–å½¢åŒ–ä»‹é¢&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;p>é€™å€‹åŠŸèƒ½å°±æ˜¯æŠŠæˆ‘å€‘æ‰€æ”¶åˆ°çš„ Nginx æŒ‡æ¨™ (Metrics)ï¼Œè½‰æ›æˆåœ–è¡¨è®“æˆ‘å€‘å¯ä»¥çŸ¥é“ä»–çš„è®ŠåŒ–ã€‚&lt;/p>
&lt;br>
&lt;p>ç‚ºäº†æ›´æ˜é¡¯çš„çœ‹å‡ºè®ŠåŒ–ï¼Œé€™æ™‚å€™å°±è¦ä½¿ç”¨æˆ‘æ‰€å¯«å¥½çš„ &lt;code>test.sh&lt;/code> è…³æœ¬ï¼Œä½¿ç”¨ &lt;code>sh test.sh&lt;/code> ä¾†åŸ·è¡Œï¼Œå†å›ä¾†è§€å¯Ÿåœ–å‹æ˜¯å¦è®ŠåŒ–ï¼š&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/docker/prometheus-grafana-docker/run_6.png"
alt="ç¶“éæ¸¬è©¦é¡¯ç¤ºçš„ nginx_connections_accepted åœ–å½¢" width="800">&lt;figcaption>
&lt;p>ç¶“éæ¸¬è©¦é¡¯ç¤ºçš„ nginx_connections_accepted åœ–å½¢&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;p>å¯ä»¥ç™¼ç¾å‰›å‰›åŸæœ¬åªæœ‰ 1 å€‹çš„é€£æ¥æ•¸å› ç‚ºæˆ‘å€‘æ¨¡æ“¬ç¸½å…±è·‘äº† 10 æ¬¡ï¼Œæ‰€ä»¥é€£æ¥æ•¸è®Šæˆ 11 äº†ï¼&lt;/p>
&lt;br>
&lt;h4>Grafana&lt;span class="hx-absolute -hx-mt-20" id="grafana">&lt;/span>
&lt;a href="#grafana" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h4>&lt;p>Prometheus çš„åœ–å½¢åŒ–æ¯”è¼ƒå–®èª¿ï¼Œæ‰€ä»¥æˆ‘å€‘ä½¿ç”¨ Grafana ä¾†ç¾åŒ–æˆ‘å€‘çš„å„€è¡¨æ¿ï¼Œç€è¦½å™¨ç€è¦½ &lt;code>http://localhost:3000/&lt;/code> ï¼Œå¯ä»¥çœ‹åˆ°ä¸€å€‹ç™»å…¥é é¢ï¼šå¸³è™Ÿæ˜¯ &lt;code>admin&lt;/code>ï¼Œå¯†ç¢¼æ˜¯æˆ‘å€‘åœ¨ç’°å¢ƒè®Šæ•¸ä¸­æ‰€è¨­å®šçš„ &lt;code>pass&lt;/code>ï¼š&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/docker/prometheus-grafana-docker/run_7.png"
alt="Grafana ç™»å…¥é é¢" width="1000">&lt;figcaption>
&lt;p>Grafana ç™»å…¥é é¢&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;p>ç™»å…¥å¾Œæˆ‘å€‘çœ‹åˆ°é¦–é ï¼Œé¸æ“‡ &lt;strong>Add your first data source&lt;/strong> ä¾†æ–°å¢è³‡æ–™ä¾†æºï¼š&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/docker/prometheus-grafana-docker/run_8.png"
alt="Grafana æ–°å¢è³‡æ–™ä¾†æº" width="1000">&lt;figcaption>
&lt;p>Grafana æ–°å¢è³‡æ–™ä¾†æº&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;p>é¸æ“‡ç¬¬ä¸€å€‹ &lt;strong>Prometheus&lt;/strong>ï¼Œæˆ‘å€‘åˆ° HTTP çš„ URL è¨­å®š &lt;code>http://prometheus:9090&lt;/code> å…¶ä»–è¨­å®šåœ¨æˆ‘å€‘æ¸¬è©¦ç’°å¢ƒä¸­ï¼Œä¸éœ€è¦å»èª¿æ•´ï¼Œæ»‘åˆ°æœ€ä¸‹é¢æŒ‰ä¸‹ &lt;strong>Save &amp;amp; test&lt;/strong>ï¼š&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/docker/prometheus-grafana-docker/run_9.png"
alt="Grafana æ–°å¢è³‡æ–™ä¾†æº" width="1000">&lt;figcaption>
&lt;p>Grafana æ–°å¢è³‡æ–™ä¾†æº&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;p>æ¥è‘—æˆ‘å€‘è¦ä¾†è¨­è¨ˆæˆ‘å€‘çš„å„€è¡¨æ¿ï¼Œåœ¨ Grafana é™¤äº†è‡ªå·±è¨­è¨ˆä»¥å¤–ï¼Œé‚„å¯ä»¥ Import åˆ¥äººåšå¥½çš„å„€è¡¨æ¿ã€‚&lt;/p>
&lt;p>æˆ‘å€‘é»é¸å·¦å´æ¬„ä½çš„ &lt;strong>ï¼‹&lt;/strong> ç¬¦è™Ÿ &amp;gt; è£¡é¢çš„ &lt;strong>Import&lt;/strong>ï¼Œå¯ä»¥åœ¨é€™é‚Š Import åˆ¥äººåšå¥½çš„å„€è¡¨æ¿ï¼Œä½¿ç”¨æ–¹å¼ä¹Ÿå¾ˆç°¡å–®ï¼Œåªéœ€è¦å…ˆå» &lt;a href="https://grafana.com/grafana/dashboards/" target="_blank" rel="noopener">Grafana Labs dashboard&lt;/a> è£¡é¢æ‰¾åˆ°è‡ªå·±è¦ä½¿ç”¨çš„å„€è¡¨æ¿ï¼Œå³å´æœƒæœ‰ä¸€å€‹ IDï¼ŒæŠŠ ID è²¼ä¸Šæˆ‘å€‘çš„ Grafana å°± Import æˆåŠŸå›‰ï¼å¾ˆç¥å¥‡å§ XD&lt;/p>
&lt;p>æˆ‘å€‘è¦ä½¿ç”¨çš„å„€è¡¨æ¿æ˜¯åˆ¥äººå·²ç¶“åšå¥½çš„ &lt;a href="https://grafana.com/grafana/dashboards/12708" target="_blank" rel="noopener">NGINX exporter&lt;/a>ï¼Œå®ƒçš„ ID æ˜¯ &lt;code>12708&lt;/code>ï¼ŒæŠŠ ID è²¼å…¥å¾Œï¼ŒæŒ‰ä¸‹ &lt;strong>Load&lt;/strong>ï¼Œå°±æœƒæœ‰ NGINX exporter çš„åŸºæœ¬è³‡è¨Šï¼Œæˆ‘å€‘åœ¨æœ€ä¸‹é¢çš„ Prometheus é¸æ“‡æˆ‘å€‘è¦ä½¿ç”¨çš„ data sourceï¼Œå°±æ˜¯æˆ‘å€‘å‰›å‰›å…ˆè¨­å®šå¥½çš„
&lt;strong>Prometheus&lt;/strong>ï¼Œæœ€å¾ŒæŒ‰ä¸‹ &lt;strong>Import&lt;/strong>ï¼Œå°±å®Œæˆæ‹‰ã€‚&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/docker/prometheus-grafana-docker/run_10.png"
alt="Grafana è¼‰å…¥åˆ¥äººåšå¥½çš„å„€è¡¨æ¿" width="800">&lt;figcaption>
&lt;p>Grafana è¼‰å…¥åˆ¥äººåšå¥½çš„å„€è¡¨æ¿&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;p>å¦‚æœè¨­å®šéƒ½æ²’æœ‰éŒ¯èª¤çš„è©±ï¼Œæ‡‰è©²å¯ä»¥çœ‹åˆ°ä¸‹é¢é€™å€‹ç•«é¢ï¼Œæœ€ä¸Šé¢æ˜¯ç›£æ¸¬ Nginx æœå‹™çš„ç‹€æ…‹ï¼Œä»¥åŠä¸‹æ–¹æœ‰ä¸åŒçš„æŒ‡æ¨™åœ¨é¡¯ç¤ºï¼š&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/docker/prometheus-grafana-docker/run_11.png"
alt="Grafana å„€è¡¨æ¿" width="1000">&lt;figcaption>
&lt;p>Grafana å„€è¡¨æ¿&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;p>æ¥ä¸‹ä¾†æˆ‘å€‘ä¸€æ¬¡ç”¨ &lt;code>test.sh&lt;/code> ä¾†æ¸¬è©¦ä¸€ä¸‹æ˜¯å¦æœ‰æˆåŠŸæŠ“åˆ°è³‡æ–™ï¼š&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/docker/prometheus-grafana-docker/run_12.png"
alt="æ¸¬è©¦ Grafana æ˜¯å¦æˆåŠŸæŠ“åˆ°è³‡æ–™" width="1000">&lt;figcaption>
&lt;p>æ¸¬è©¦ Grafana æ˜¯å¦æˆåŠŸæŠ“åˆ°è³‡æ–™&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;p>å¯ä»¥çœ‹åˆ°åœ¨æˆ‘å€‘ä½¿ç”¨å®Œæ¸¬è©¦è…³æœ¬å¾Œï¼Œåœ¨è©²æ™‚æ®µçš„è³‡æ–™æœ‰æ˜é¡¯çš„ä¸ä¸€æ¨£ï¼Œä»£è¡¨æˆ‘å€‘æœ‰æˆåŠŸæŠ“åˆ°è³‡æ–™ ğŸ˜„&lt;/p>
&lt;br>
&lt;p>æ­¤å¤–ä¹Ÿå¯ä»¥å°‡ Nginx æœå‹™æš«åœï¼Œçœ‹çœ‹å„€è¡¨æ¿ä¸Šæ–¹çš„ NGINX Status ç‹€æ…‹æ˜¯å¦æ”¹è®Šï¼š&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/docker/prometheus-grafana-docker/run_13.png"
alt="æ¸¬è©¦æš«åœ Nginx æŸ¥çœ‹ Grafana å„€è¡¨æ¿ NGINX Status" width="1000">&lt;figcaption>
&lt;p>æ¸¬è©¦æš«åœ Nginx æŸ¥çœ‹ Grafana å„€è¡¨æ¿ NGINX Status&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;h4>Alerting è­¦å ±&lt;span class="hx-absolute -hx-mt-20" id="alerting-è­¦å ±">&lt;/span>
&lt;a href="#alerting-%e8%ad%a6%e5%a0%b1" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h4>&lt;p>ç•¶ç„¶é™¤äº†ç›£æ§ä»¥å¤–ï¼Œæˆ‘å€‘é‚„éœ€è¦æœ‰è­¦å ±ç³»çµ±ï¼Œå› ç‚ºæˆ‘å€‘ä¸å¯èƒ½æ¯å¤©éƒ½ä¸€ç›´ç›¯è‘—å„€è¡¨æ¿çœ‹å“ªè£¡æœ‰éŒ¯èª¤ï¼Œæ‰€ä»¥æˆ‘å€‘è¦è¨­å®šè­¦å ±çš„è¦å‰‡ï¼Œä»¥åŠè­¦å ±è¦ç™¼é€åˆ°å“ªè£¡ï¼Œæ¥è‘—æˆ‘å€‘ä¸€èµ·çœ‹ä¸‹å»å§ï¼š&lt;/p>
&lt;p>æˆ‘å€‘å…ˆé»å·¦å´çš„ &lt;strong>Alerting ğŸ””&lt;/strong> Â  &amp;gt; é»é¸ &lt;strong>Notification channels&lt;/strong> ä¾†æ–°å¢æˆ‘å€‘è¦ç™¼é€åˆ°å“ªè£¡ã€‚é€™æ¬¡æˆ‘å€‘ä¸€æ¨£ä½¿ç”¨ Telegramï¼Œæˆ‘å€‘åœ¨ type ä¸‹æ‹‰å¼é¸å–®é¸æ“‡ &lt;strong>Telegram&lt;/strong>ï¼Œè¼¸å…¥æˆ‘å€‘çš„ BOT API Token ä»¥åŠ Chat IDï¼Œå„²å­˜ä¹‹å‰å¯ä»¥é»é¸ &lt;strong>test&lt;/strong> ä¾†æ¸¬è©¦ï¼&lt;/p>
&lt;div class="hx-overflow-x-auto hx-mt-6 hx-flex hx-rounded-lg hx-border hx-py-2 ltr:hx-pr-4 rtl:hx-pl-4 contrast-more:hx-border-current contrast-more:dark:hx-border-current hx-border-orange-100 hx-bg-orange-50 hx-text-orange-800 dark:hx-border-orange-400/30 dark:hx-bg-orange-400/20 dark:hx-text-orange-300">
&lt;div class="ltr:hx-pl-3 ltr:hx-pr-2 rtl:hx-pr-3 rtl:hx-pl-2">&lt;/div>
&lt;div class="hx-w-full hx-min-w-0 hx-leading-7">
&lt;div class="hx-mt-6 hx-leading-7 first:hx-mt-0">æ€éº¼ä½¿ç”¨ Telegram Botï¼šè«‹åƒè€ƒé€™ä¸€ç¯‡ &lt;a href="https://pin-yi.me/blog/git-or-cicd/ansible/#ansible-%e7%99%bc%e9%80%81%e9%80%9a%e7%9f%a5%e5%88%b0-telegram-bot" target="_blank" rel="noopener">Ansible ä»‹ç´¹èˆ‡å¯¦ä½œ (Inventoryã€Playbooksã€Moduleã€Templateã€Handlers)&lt;/a> ä¾†å–å¾— BOT API Token ä»¥åŠ Chat IDã€‚&lt;/div>
&lt;/div>
&lt;/div>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/docker/prometheus-grafana-docker/alert_1.png"
alt="Alerting è¨­å®š" width="1000">&lt;figcaption>
&lt;p>Alerting è¨­å®š&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/docker/prometheus-grafana-docker/alert_2.png"
alt="Alerting æ¸¬è©¦çµæœ" width="600">&lt;figcaption>
&lt;p>Alerting æ¸¬è©¦çµæœ&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;p>æ¥è‘—æˆ‘å€‘ä¾†è¨­è¨ˆä¸€å€‹å±¬æ–¼æˆ‘å€‘çš„æ§åˆ¶æ¿ (Panel)ï¼Œé †ä¾¿å¹«ä»–åŠ ä¸Š Alertingï¼Œç¨å¾Œä¹Ÿç”¨ &lt;code>test.sh&lt;/code>ï¼Œçœ‹çœ‹ä»–æœƒä¸æœƒè‡ªå‹•ç™¼å‡ºæé†’åˆ° Telegram Bot ğŸ˜¬&lt;/p>
&lt;p>é¦–å…ˆé»é¸å·¦å´æ¬„ä½çš„ &lt;strong>ï¼‹&lt;/strong> ç¬¦è™Ÿ &amp;gt; è£¡é¢çš„ Createï¼Œåœ¨é¸æ“‡ &lt;strong>Add an empty panel&lt;/strong>ï¼š&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/docker/prometheus-grafana-docker/alert_3.png"
alt="Create Panel" width="800">&lt;figcaption>
&lt;p>Create Panel&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;p>å† Query çš„ &lt;strong>A&lt;/strong> Metrics browser è¼¸å…¥ &lt;code>nginx_connections_accepted&lt;/code> ä¸€æ¨£ä¾†å–å¾— Nginx æ¥å—ç”¨æˆ¶ç«¯é€£æ¥ç¸½æ•¸é‡çš„åœ–è¡¨ï¼Œåˆ°å³ä¸Šè§’é¸æ“‡ &lt;strong>Last 5 minutes&lt;/strong>ï¼Œæ—é‚Šçš„åœ–å‹æˆ‘å€‘é¸æ“‡ &lt;em>Graph (old)&lt;/em>ï¼Œä¸‹é¢çš„ Title å¯ä»¥ä¿®æ”¹ä¸€ä¸‹é€™å€‹åœ–è¡¨çš„åç¨±ï¼Œæœ€å¾ŒæŒ‰ä¸‹ &lt;strong>Save&lt;/strong>ï¼Œå°±å¯ä»¥çœ‹åˆ°æˆ‘å€‘å»ºå¥½ä¸€å€‹æ§åˆ¶æ¿å›‰ ğŸ¥³&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/docker/prometheus-grafana-docker/alert_4.png"
alt="è¨­å®š Panel" width="1200">&lt;figcaption>
&lt;p>è¨­å®š Panel&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;p>æ¥è‘—æˆ‘å€‘ä¾†è¨­å®š Alertï¼Œå¯ä»¥çœ‹åˆ°å‰›å‰›åœ¨ &lt;strong>Query&lt;/strong> æ—é‚Šæœ‰ä¸€å€‹ Alertï¼Œé»é€²å»å¾ŒæŒ‰ &lt;strong>Create Alert&lt;/strong>ï¼Œæˆ‘å€‘å…ˆä¿®æ”¹ Evaluate every å¾Œé¢çš„ For æ”¹ç‚º &lt;code>1m&lt;/code> (ä»£è¡¨ç•¶æ•¸å€¼è¶…éæˆ‘å€‘æ‰€è¨­å®šçš„é–¥å€¼å¾Œï¼Œç‹€æ…‹æœƒå¾ OK è®Šæˆ Pendingï¼Œé€™æ™‚å€™é‚„ä¸æœƒç™¼é€è­¦å ±ï¼Œæœƒç­‰å¾…æˆ‘å€‘ç¾åœ¨è¨­å®šçš„ &lt;code>1m&lt;/code> åˆ†é˜å¾Œï¼Œæƒ…æ³é‚„æ˜¯æ²’æœ‰å¥½è½‰ï¼Œæ‰æœƒç™¼é€é€šçŸ¥)ï¼Œå† Conditions å¾Œé¢æ¬„ä½åŠ å…¥ 10 (æˆ‘å€‘æ‰€è¨­å®šçš„é–¥å€¼ï¼Œä»£è¡¨ &lt;code>nginx_connections_accepted&lt;/code> è¶…é 10 å°±æœƒé€²å…¥ Pending ç‹€æ…‹)ï¼Œå¾€ä¸‹æ»‘ Notifications çš„ &lt;strong>Send to&lt;/strong> é¸æ“‡æˆ‘å€‘ä¸Šé¢æ‰€å»ºç«‹çš„ channels åç¨±ï¼ŒæŒ‰ä¸‹ &lt;strong>Save&lt;/strong>ã€‚&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/docker/prometheus-grafana-docker/alert_5.png"
alt="è¨­å®šå¥½ Alert çš„æ§åˆ¶æ¿" width="800">&lt;figcaption>
&lt;p>è¨­å®šå¥½ Alert çš„æ§åˆ¶æ¿&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;p>æ¥è‘—åŸ·è¡Œ &lt;code>test.sh&lt;/code> å…©æ¬¡ï¼Œè®“ &lt;code>nginx_connections_accepted&lt;/code> è¶…éæˆ‘å€‘æ‰€è¨­å®šçš„é–¥å€¼ï¼Œå¯ä»¥çœ‹åˆ°æ§åˆ¶æ¿è¶…é 10 ä»¥ä¸Šè®Šæˆç´…è‰²ï¼š&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/docker/prometheus-grafana-docker/alert_6.png"
alt="è¶…éé–¥å€¼ï¼Œæ§åˆ¶æ¿è®Šæˆç´…è‰²" width="800">&lt;figcaption>
&lt;p>è¶…éé–¥å€¼ï¼Œæ§åˆ¶æ¿è®Šæˆç´…è‰²&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;p>æ¥è‘—ç­‰å¾…å¹¾åˆ†é˜å¾Œï¼Œç‹€æ…‹æœƒå¾ OK ç¶ è‰²è®Šæˆé»ƒè‰²çš„ Pendingï¼Œæœ€å¾Œè½‰æˆç´…è‰²çš„ Alertï¼Œé€™æ™‚å€™ Telegram å°±æœƒæ”¶åˆ°é€šçŸ¥å›‰ âŒ&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/docker/prometheus-grafana-docker/alert_7.png"
alt="è‡ªå‹•ç™¼é€é€šçŸ¥åˆ° Telegram Botï¼Œä¸¦é™„ä¸Šæ§åˆ¶æ¿åœ–ç‰‡" width="500">&lt;figcaption>
&lt;p>è‡ªå‹•ç™¼é€é€šçŸ¥åˆ° Telegram Botï¼Œä¸¦é™„ä¸Šæ§åˆ¶æ¿åœ–ç‰‡&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;br>
&lt;h2>Nginx æŒ‡æ¨™ (Metrics) æè¿°&lt;span class="hx-absolute -hx-mt-20" id="nginx-æŒ‡æ¨™-metrics-æè¿°">&lt;/span>
&lt;a href="#nginx-%e6%8c%87%e6%a8%99-metrics-%e6%8f%8f%e8%bf%b0" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>æˆ‘å€‘åœ¨ &lt;code>http://localhost:9113/metrics&lt;/code> ä¸­å¯ä»¥çœ‹åˆ°è¨±å¤šæŒ‡æ¨™ (Metrics) é‚£ä»–å€‘å„ä»£è¡¨ä»€éº¼æ„æ€å‘¢ï¼Ÿæˆ‘æŠŠå®ƒæ•´ç†æˆè¡¨æ ¼è®“å¤§å®¶å¯ä»¥é¸æ“‡è¦ä½¿ç”¨çš„æŒ‡æ¨™ (Metrics)ï¼š&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: center">æŒ‡æ¨™&lt;/th>
&lt;th style="text-align: center">æè¿°&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: center">nginx_connections_accepted&lt;/td>
&lt;td style="text-align: center">æ¥å—ç”¨æˆ¶ç«¯çš„é€£æ¥ç¸½æ•¸é‡&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">nginx_connections_active&lt;/td>
&lt;td style="text-align: center">ç•¶å‰ç”¨æˆ¶ç«¯é€£æ¥æ•¸é‡&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">nginx_connections_handled&lt;/td>
&lt;td style="text-align: center">Handled ç‹€æ…‹çš„é€£æ¥æ•¸é‡&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">nginx_connections_reading&lt;/td>
&lt;td style="text-align: center">æ­£åœ¨è®€å–çš„ç”¨æˆ¶ç«¯é€£æ¥æ•¸é‡&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">nginx_connections_waiting&lt;/td>
&lt;td style="text-align: center">æ­£åœ¨ç­‰å¾…ä¸­çš„ç”¨æˆ¶ç«¯é€£æ¥æ•¸é‡&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">nginx_connections_writing&lt;/td>
&lt;td style="text-align: center">æ­£åœ¨å¯«å…¥çš„ç”¨æˆ¶ç«¯é€£æ¥æ•¸é‡&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">nginx_http_requests_total&lt;/td>
&lt;td style="text-align: center">å®¢æˆ¶ç«¯ç¸½è«‹æ±‚æ•¸é‡&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">nginx_up&lt;/td>
&lt;td style="text-align: center">Nginx Exporter æ˜¯å¦æ­£å¸¸é‹è¡Œ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">nginxexporter_build_info&lt;/td>
&lt;td style="text-align: center">Nginx Exporter çš„æ§‹å»ºè³‡è¨Š&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;br>
&lt;h2>åƒè€ƒè³‡æ–™&lt;span class="hx-absolute -hx-mt-20" id="åƒè€ƒè³‡æ–™">&lt;/span>
&lt;a href="#%e5%8f%83%e8%80%83%e8%b3%87%e6%96%99" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>ä½¿ç”¨ Prometheus å’Œ Grafana æ‰“é€  Flask Web App ç›£æ§é è­¦ç³»çµ±ï¼š&lt;a href="https://blog.techbridge.cc/2019/08/26/how-to-use-prometheus-grafana-in-flask-app/" target="_blank" rel="noopener">https://blog.techbridge.cc/2019/08/26/how-to-use-prometheus-grafana-in-flask-app/&lt;/a>&lt;/p>
&lt;p>Nginx Exporter æ¥å…¥ï¼š&lt;a href="https://cloud.tencent.com/document/product/1416/56039" target="_blank" rel="noopener">https://cloud.tencent.com/document/product/1416/56039&lt;/a>&lt;/p>
&lt;p>é€šé nginx-prometheus-exporter ç›£æ§ nginx æŒ‡æ¨™ï¼š&lt;a href="https://maxidea.gitbook.io/k8s-testing/prometheus-he-grafana-de-dan-ji-bian-pai/tong-guo-nginxprometheusexporter-jian-kong-nginx" target="_blank" rel="noopener">https://maxidea.gitbook.io/k8s-testing/prometheus-he-grafana-de-dan-ji-bian-pai/tong-guo-nginxprometheusexporter-jian-kong-nginx&lt;/a>&lt;/p>
&lt;p>ä½¿ç”¨ nginx-prometheus-exporter ç›£æ§ nginxï¼š&lt;a href="https://www.cnblogs.com/rongfengliang/p/13580534.html" target="_blank" rel="noopener">https://www.cnblogs.com/rongfengliang/p/13580534.html&lt;/a>&lt;/p>
&lt;p>ä½¿ç”¨é˜¿é‡Œé›² Prometheus ç›£æ§ Nginxï¼ˆæ–°ç‰ˆï¼‰ï¼š&lt;a href="https://help.aliyun.com/document_detail/171819.html?spm=5176.22414175.sslink.29.6c9e1df9DdpLPP" target="_blank" rel="noopener">https://help.aliyun.com/document_detail/171819.html?spm=5176.22414175.sslink.29.6c9e1df9DdpLPP&lt;/a>&lt;/p>
&lt;p>Grafana Image Rendererï¼š&lt;a href="https://grafana.com/grafana/plugins/grafana-image-renderer/" target="_blank" rel="noopener">https://grafana.com/grafana/plugins/grafana-image-renderer/&lt;/a>&lt;/p>
&lt;p>grafana çš„ image render è®¾ç½®ï¼š&lt;a href="https://blog.csdn.net/dandanfengyun/article/details/115346594" target="_blank" rel="noopener">https://blog.csdn.net/dandanfengyun/article/details/115346594&lt;/a>&lt;/p></description></item><item><title>Docker ä»‹ç´¹ (å¦‚ä½•ä½¿ç”¨ Docker-compose å»ºç½® PHP+MySQl+Nginx ç’°å¢ƒ)</title><link>https://pin-yi.me/blog/docker/docker/</link><pubDate>Sun, 26 May 2024 00:00:00 +0000</pubDate><guid>https://pin-yi.me/blog/docker/docker/</guid><description>
&lt;h2>ä»€éº¼æ˜¯ Docker ?&lt;span class="hx-absolute -hx-mt-20" id="ä»€éº¼æ˜¯-docker-">&lt;/span>
&lt;a href="#%e4%bb%80%e9%ba%bc%e6%98%af-docker-" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>Docker æ˜¯ä¸€ç¨®è»Ÿé«”å¹³å°ï¼Œå®ƒå¯ä»¥å¿«é€Ÿå»ºç«‹ã€æ¸¬è©¦å’Œéƒ¨ç½²æ‡‰ç”¨ç¨‹å¼ã€‚ç‚ºä»€éº¼å¯ä»¥å¿«é€Ÿå»ºç«‹å‘¢ï¼Ÿå› ç‚º Docker æœƒå°‡è»Ÿé«”å°è£åˆ°åç‚ºã€å®¹å™¨ã€çš„æ¨™æº–å–®ä½ã€‚å…¶ä¸­æœƒåŒ…å«ç¨‹å¼åº«ã€ç³»çµ±å·¥å…·ã€ç¨‹å¼ç¢¼ã€åŸ·è¡Œè»Ÿé«”æ‰€éœ€çš„æ‰€æœ‰é …ç›®ã€‚
å‰›å‰›æœ‰æåˆ°å®¹å™¨ (Container)ï¼Œæ˜¯ä¸€ç¨®è™›æ“¬åŒ–æŠ€è¡“ï¼Œå®ƒé«˜æ•ˆç‡è™›æ“¬åŒ–åŠæ˜“æ–¼é·ç§»å’Œæ“´å±•çš„ç‰¹æ€§ï¼Œéå¸¸é©åˆç¾ä»£é›²ç«¯çš„é–‹ç™¼åŠä½ˆç½²ã€‚é‚£ Container èˆ‡å‚³çµ±çš„è™›æ“¬æ©Ÿæœ‰ä»€éº¼å·®åˆ¥å‘¢ï¼Ÿæˆ‘å€‘ä¾†çœ‹çœ‹ä¸‹é¢é€™å¼µåœ–&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/docker/docker/container-vm.png"
alt="Container èˆ‡ VM çš„å·®ç•°" width="700">&lt;figcaption>
&lt;p>Container èˆ‡ VM çš„å·®ç•°&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;p>å¯ä»¥çœ‹åˆ° Container æ˜¯ä»¥æ‡‰ç”¨ç¨‹å¼ç‚ºå–®ä½ï¼Œè€Œ VM å‰‡æ˜¯ä»¥ä½œæ¥­ç³»çµ±ç‚ºå–®ä½ã€‚Container æ˜¯ä¸€å€‹å°è£äº†ç›¸ä¾æ€§è³‡æºèˆ‡æ‡‰ç”¨ç¨‹å¼çš„åŸ·è¡Œç’°å¢ƒ ; VM å‰‡æ˜¯ä¸€å€‹é…ç½®å¥½ CPUã€RAM èˆ‡ Storage çš„ä½œæ¥­ç³»çµ±ï¼Œç‚ºäº†æ›´å¥½çš„åšå€åˆ¥ï¼Œæˆ‘æŠŠ Containerã€VM å…©å€‹å·®åˆ¥ç”¨è¡¨æ ¼ä¾†èªªæ˜ï½&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: center">å€åˆ¥æ¯”è¼ƒ&lt;/th>
&lt;th style="text-align: center">Container&lt;/th>
&lt;th style="text-align: center">VM&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: center">å–®ä½&lt;/td>
&lt;td style="text-align: center">æ‡‰ç”¨ç¨‹å¼&lt;/td>
&lt;td style="text-align: center">ä½œæ¥­ç³»çµ±&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">é©ç”¨æœå‹™&lt;/td>
&lt;td style="text-align: center">å¤šä½¿ç”¨æ–¼å¾®æœå‹™&lt;/td>
&lt;td style="text-align: center">ä½¿ç”¨è¼ƒå¤§å‹çš„æœå‹™&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">ç¡¬é«”è³‡æº&lt;/td>
&lt;td style="text-align: center">æ˜¯ä»¥ç¨‹å¼ç‚ºå–®ä½ï¼Œéœ€è¦çš„ç¡¬é«”è³‡æºå¾ˆå°‘&lt;/td>
&lt;td style="text-align: center">VM æœƒå…ˆä½”ç”¨ CPUã€RAM ç­‰ç­‰ç¡¬é«”è³‡æºï¼Œä¸ç®¡æœ‰æ²’æœ‰ä½¿ç”¨éƒ½æœƒå…ˆä½”ç”¨&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">é€ æˆè¡çª&lt;/td>
&lt;td style="text-align: center">Container é–“æ˜¯å½¼æ­¤éš”é›¢çš„ï¼Œå› æ­¤åœ¨åŒä¸€å°æ©Ÿå™¨å¯ä»¥åŸ·è¡Œä¸åŒç‰ˆæœ¬çš„æœå‹™&lt;/td>
&lt;td style="text-align: center">æœƒå› ç‚ºç‰ˆæœ¬ä¸åŒé€ æˆç’°å¢ƒè¡çª&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">ç³»çµ±æ”¯æ´æ•¸é‡&lt;/td>
&lt;td style="text-align: center">å–®æ©Ÿæ”¯æ´ä¸Šåƒå€‹å®¹å™¨&lt;/td>
&lt;td style="text-align: center">ä¸€èˆ¬æœ€å¤šå¹¾åå€‹&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">å„ªé»&lt;/td>
&lt;td style="text-align: center">1 . Image è¼ƒå°ï¼Œé€šå¸¸éƒ½å¹¾ MB&lt;br>2 . å•Ÿå‹•é€Ÿåº¦å¿«ï¼Œé€šå¸¸å¹¾ç§’å°±å¯ä»¥ç”Ÿæˆä¸€å€‹ Container&lt;br>3 . æ›´æ–°è¼ƒç‚ºå®¹æ˜“ï¼Œåªéœ€è¦åˆ©ç”¨æ–°çš„ Image é‡æ–°å•Ÿå‹•å°±æœƒæ›´æ–°äº†&lt;/td>
&lt;td style="text-align: center">1 . å› ç‚ºç¡¬é«”å±¤ä»¥ä¸Šéƒ½è™›æ“¬åŒ–ï¼Œå› æ­¤å®‰å…¨æ€§ç›¸å°è¼ƒé«˜&lt;br>2 . ç³»çµ±é¸æ“‡è¼ƒå¤šï¼Œåœ¨ VM å¯ä»¥é¸æ“‡ä¸åŒçš„ OS&lt;br>3 . ä¸éœ€è¦é™ä½æ‡‰ç”¨ç¨‹å¼å…§æœå‹™çš„è€¦åˆæ€§ï¼Œä¸éœ€è¦å°‡ç¨‹å¼å…§çš„æœå‹™å€‹åˆ¥æ‹†é–‹ä¾†éƒ¨ç½²&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">ç¼ºé»&lt;/td>
&lt;td style="text-align: center">1 . å®‰å…¨æ€§è¼ƒ VM å·®ï¼Œå› ç‚ºç’°å¢ƒèˆ‡ç¡¬é«”éƒ½èˆ‡æœ¬æ©Ÿå…±ç”¨&lt;br>2 . åœ¨åŒä¸€å°æ©Ÿå™¨ä¸­ï¼Œæ¯ä¸€å€‹ Container çš„ OS éƒ½æ˜¯ç›¸åŒçš„ï¼Œç„¡æ³•ä¸€å€‹ç‚º Windowsã€ä¸€å€‹ç‚º Linuxï¼Œé‚„æ˜¯ä¾è³´ Host OS&lt;br>3 . Container é€šå¸¸æœƒåˆ‡æˆå¾®æœå‹™çš„æ–¹å¼ä½œéƒ¨ç½²ï¼Œåœ¨å„å…ƒä»¶ä¸­çš„ç¶²è·¯é€£çµæœƒæ¯”è¼ƒè¤‡é›œ&lt;/td>
&lt;td style="text-align: center">1 . Image çš„å¤§å°é€šå¸¸ GB ä»¥ä¸Šï¼Œæ¯” Container å¤§å¾ˆå¤š&lt;br>2 . å•Ÿå‹•é€Ÿåº¦é€šå¸¸è¦èŠ±å¹¾åˆ†é˜ï¼Œå› æ­¤æœå‹™é‡å•Ÿé€Ÿåº¦è¼ƒæ…¢&lt;br>3 . è³‡æºä½¿ç”¨è¼ƒå¤šï¼Œå› ç‚ºä¸åªç¨‹å¼æœ¬èº«ï¼Œé‚„è¦å°‡ä¸€éƒ¨åˆ†è³‡æºåˆ†çµ¦ VM çš„ä½œæ¥­ç³»çµ±&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;strong>ç¸½çµ&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>
&lt;p>æ›´å¿«é€Ÿçš„äº¤ä»˜å’Œéƒ¨ç½²ï¼šå°æ–¼é–‹ç™¼å’Œç¶­é‹äººå“¡ä¾†èªªï¼Œæœ€å¸Œæœ›å°±æ˜¯ä¸€æ¬¡å»ºç«‹æˆ–è¨­å®šï¼Œå¯ä»¥å†ä»»æ„åœ°æ–¹æ­£å¸¸é‹è¡Œã€‚é–‹ç™¼è€…å¯ä»¥ä½¿ç”¨ä¸€å€‹æ¨™æº–çš„æ˜ åƒæª”ä¾†å»ºç«‹ä¸€å¥—é–‹ç™¼å®¹å™¨ï¼Œé–‹ç™¼å®Œæˆä¹‹å¾Œï¼Œç¶­é‹äººå“¡å¯ä»¥ç›´æ¥ä½¿ç”¨é€™å€‹å®¹å™¨ä¾†éƒ¨ç½²ç¨‹å¼ã€‚Docker å®¹å™¨å¾ˆè¼•å¾ˆå¿«ï¼å®¹å™¨çš„å•Ÿå‹•æ™‚é–“éƒ½æ˜¯å¹¾ç§’ä¸­çš„äº‹æƒ…ï¼Œå¤§é‡åœ°ç¯€ç´„é–‹ç™¼ã€æ¸¬è©¦ã€éƒ¨ç½²çš„æ™‚é–“ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ›´æœ‰æ•ˆç‡çš„è™›æ“¬åŒ–ï¼šDocker å®¹å™¨çš„åŸ·è¡Œä¸éœ€è¦é¡å¤–çš„è™›æ“¬åŒ–æ”¯æ´ï¼Œå®ƒæ˜¯æ ¸å¿ƒå±¤ç´šçš„è™›æ“¬åŒ–ï¼Œå› æ­¤å¯ä»¥å¯¦ä½œæ›´é«˜çš„æ•ˆèƒ½å’Œæ•ˆç‡ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ›´è¼•é¬†çš„é·ç§»å’Œæ“´å±•ï¼šDocker å®¹å™¨å¹¾ä¹å¯ä»¥åœ¨ä»»æ„çš„å¹³å°ä¸ŠåŸ·è¡Œï¼ŒåŒ…æ‹¬å¯¦é«”æ©Ÿå™¨ã€è™›æ“¬æ©Ÿã€å…¬æœ‰é›²ã€ç§æœ‰é›²ã€å€‹äººé›»è…¦ã€ä¼ºæœå™¨ç­‰ã€‚ é€™ç¨®å…¼å®¹æ€§å¯ä»¥è®“ä½¿ç”¨è€…æŠŠä¸€å€‹æœå‹™å¾ä¸€å€‹å¹³å°ç›´æ¥é·ç§»åˆ°å¦å¤–ä¸€å€‹ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ›´ç°¡å–®çš„ç®¡ç†ï¼šä½¿ç”¨ Dockerï¼Œåªéœ€è¦å°å°çš„ä¿®æ”¹ï¼Œå°±å¯ä»¥æ›¿ä»£ä»¥å¾€å¤§é‡çš„æ›´æ–°å·¥ä½œã€‚æ‰€æœ‰çš„ä¿®æ”¹éƒ½ä»¥å¢é‡çš„æ–¹å¼è¢«åˆ†ç™¼å’Œæ›´æ–°ï¼Œå¾è€Œå¯¦ä½œè‡ªå‹•åŒ–ä¸¦ä¸”æœ‰æ•ˆç‡çš„ç®¡ç†ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;br>
&lt;h2>Docker åŸºæœ¬æ¦‚å¿µ&lt;span class="hx-absolute -hx-mt-20" id="docker-åŸºæœ¬æ¦‚å¿µ">&lt;/span>
&lt;a href="#docker-%e5%9f%ba%e6%9c%ac%e6%a6%82%e5%bf%b5" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;ul>
&lt;li>Dockerfile&lt;/li>
&lt;li>æ˜ åƒæª” (Image)&lt;/li>
&lt;li>å®¹å™¨ (Container)&lt;/li>
&lt;li>å€‰åº« (Repository)&lt;/li>
&lt;/ul>
&lt;p>é€™å››å€‹æ˜¯ Docker æœ€åŸºæœ¬çš„çµ„æˆï¼Œäº†è§£å¾Œå°±å¯ä»¥çŸ¥é“æ•´å€‹ Docker çš„ç”Ÿå‘½é€±æœŸã€‚&lt;/p>
&lt;h3>Dockerfile&lt;span class="hx-absolute -hx-mt-20" id="dockerfile">&lt;/span>
&lt;a href="#dockerfile" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>é–‹ç™¼äººå“¡åœ¨ä½¿ç”¨ Docker æ™‚ç™¼ç¾ï¼Œå¤§å¤šç¾æˆçš„ Docker æ˜ åƒæª”ç„¡æ³•æ»¿è¶³ä»–å€‘çš„éœ€æ±‚ï¼Œå› æ­¤éœ€è¦ä¸€ç¨®èƒ½å¤ ç”Ÿæˆæ˜ åƒæª”çš„å·¥å…·ã€‚Dockerfile æ˜¯ä¸€ç¨®ç°¡æ˜“çš„æ–‡ä»¶æª”ï¼Œè£¡é¢åŒ…å«äº†å»ºç«‹æ–°æ˜ åƒæª”æ‰€éœ€çš„æŒ‡ä»¤ã€‚&lt;/p>
&lt;p>Dockerfile èªæ³•ä¸»è¦ç”± Commandï¼ˆå‘½ä»¤ï¼‰å’Œ Argument ï¼ˆåƒæ•¸é¸æ“‡ï¼‰å…©å¤§å…ƒç´ çµ„æˆã€‚ä»¥ä¸‹æ˜¯ä¸€å€‹ç°¡æ˜“çš„ Dockerfile ç¤ºæ„åœ–ï¼š&lt;/p>
&lt;p>å‘½ä»¤å¼èªæ³•ï¼‹é¸æ“‡åƒæ•¸ï¼ˆCommand + Argumentï¼‰&lt;/p>
&lt;br>
&lt;h3>æ˜ åƒæª” (Image)&lt;span class="hx-absolute -hx-mt-20" id="æ˜ åƒæª”-image">&lt;/span>
&lt;a href="#%e6%98%a0%e5%83%8f%e6%aa%94-image" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>Docker æ˜ åƒæª”æ˜¯ä¸€å€‹å”¯ç¨çš„æ¨¡æ¿ã€‚&lt;/p>
&lt;p>ä¾‹å¦‚ï¼šä¸€å€‹æ˜ åƒæª”å¯åœ¨åŒ…å«ä¸€å€‹å®Œæ•´çš„ Linux ä½œæ¥­ç³»çµ±ç’°å¢ƒï¼Œè£¡é¢å¯ä»¥åªå®‰è£ Nginx æˆ–ä½¿ç”¨è€…æœƒä½¿ç”¨åˆ°çš„å…¶ä»–æ‡‰ç”¨ç¨‹å¼ã€‚&lt;/p>
&lt;p>æˆ‘å€‘æœƒä½¿ç”¨æ˜ åƒæª”ä¾†å»ºç«‹ Docker çš„å®¹å™¨ (Container) ï¼ŒDocker ä¹Ÿæä¾›å¾ˆç°¡å–®çš„æ©Ÿåˆ¶ä¾†å»ºç«‹æ˜ åƒæª”æˆ–æ˜¯æ›´æ–°ç¾æœ‰çš„æ˜ åƒæª”ï¼Œä¹Ÿå¯ä»¥å»ä¸‹è¼‰åˆ¥äººå·²ç¶“åšå¥½çš„æ˜ åƒæª”ã€‚&lt;/p>
&lt;br>
&lt;h3>å®¹å™¨ (Container)&lt;span class="hx-absolute -hx-mt-20" id="å®¹å™¨-container">&lt;/span>
&lt;a href="#%e5%ae%b9%e5%99%a8-container" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>Docker æ˜¯åˆ©ç”¨å®¹å™¨ä¾†åŸ·è¡Œæ‡‰ç”¨ç¨‹å¼ã€‚&lt;/p>
&lt;p>æ¯ä¸€å€‹å®¹å™¨éƒ½æ˜¯ç”±æ˜ åƒæª”æ‰€å»ºç«‹çš„çš„åŸ·è¡Œç¨‹å¼ã€‚å®ƒå¯ä»¥è¢«å•Ÿå‹•ã€é–‹å§‹ã€åœæ­¢ã€åˆªé™¤ã€‚ä¸”æ¯ä¸€å€‹å®¹å™¨éƒ½æ˜¯ç›¸äº’éš”é›¢çš„ï¼Œä¸æœƒç›¸äº’å½±éŸ¿ã€‚&lt;/p>
&lt;br>
&lt;h2>Docker å¯¦ä½œ&lt;span class="hx-absolute -hx-mt-20" id="docker-å¯¦ä½œ">&lt;/span>
&lt;a href="#docker-%e5%af%a6%e4%bd%9c" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>æœ¬ç« ç¯€æœƒä»‹ç´¹ Docker ä¸‰å¤§çµ„ä»¶æ˜ åƒæª” (image)ã€å®¹å™¨ (Container)ã€å€‰åº« (Repository) è¦å¦‚ä½•å¯¦éš›æ“ä½œï¼Œä»¥åŠä»–å€‘çš„é—œè¯æ€§æ˜¯ä»€éº¼ï½
&lt;br>&lt;/p>
&lt;h3>æ˜ åƒæª” (Image)&lt;span class="hx-absolute -hx-mt-20" id="æ˜ åƒæª”-image-1">&lt;/span>
&lt;a href="#%e6%98%a0%e5%83%8f%e6%aa%94-image-1" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>æœ¬å°ç¯€æœƒä»‹ç´¹æœ‰é—œæ˜ åƒæª”çš„å…§å®¹ï¼ŒåŒ…æ‹¬ï¼š&lt;/p>
&lt;ul>
&lt;li>å¦‚ä½•å¾å€‰åº«å–å¾—æ˜ åƒæª”&lt;/li>
&lt;li>å¦‚ä½•ç®¡ç†æœ¬åœ°ä¸»æ©Ÿä¸Šçš„æ˜ åƒæª”&lt;/li>
&lt;li>æ˜ åƒæª”å¯¦ä½œ (Dockerfile)&lt;/li>
&lt;/ul>
&lt;br>
&lt;h4>å¦‚ä½•å¾å€‰åº«å–å¾—æ˜ åƒæª”&lt;span class="hx-absolute -hx-mt-20" id="å¦‚ä½•å¾å€‰åº«å–å¾—æ˜ åƒæª”">&lt;/span>
&lt;a href="#%e5%a6%82%e4%bd%95%e5%be%9e%e5%80%89%e5%ba%ab%e5%8f%96%e5%be%97%e6%98%a0%e5%83%8f%e6%aa%94" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h4>&lt;p>æˆ‘å€‘å¯ä»¥å…ˆåˆ° &lt;a href="https://hub.docker.com/" target="_blank" rel="noopener">Docker hub&lt;/a> ä¸Šé¢çœ‹çœ‹æœ‰ä»€éº¼æœå‹™æˆ–ç¨‹å¼æƒ³è¦ä¸‹è¼‰ä¾†åšä½¿ç”¨ [ è©³ç´°ä»‹ç´¹æœƒæ”¾åˆ°&lt;a href="https://pin-yi.me/docker/#%e5%80%89%e5%ba%ab-repository-1" target="_blank" rel="noopener">å€‰åº« (Repository) &lt;/a>ç« ç¯€]ï¼Œæ‰¾åˆ°æƒ³è¦çš„æœå‹™ï¼Œæˆ‘å€‘å¯ä»¥ä¸‹ &lt;code>docker pull {è¦ä¸‹è¼‰çš„æœå‹™ã€ç¨‹å¼åç¨±}&lt;/code> ï¼Œæˆ‘å€‘é€™é‚Šå°±å…ˆä¸‹è¼‰ Mysql é€™å€‹æ˜ åƒæª”ã€‚&lt;/p>
&lt;ul>
&lt;li>mysql&lt;/li>
&lt;/ul>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>$ docker pull mysql
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Using default tag: latest
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>latest: Pulling from library/mysql
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>15115158dd02: Pull complete
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>.... çœç•¥ ....
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Digest: sha256:b17a66b49277a68066559416cf44a185cfee538d0e16b5624781019bc716c122
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Status: Downloaded newer image &lt;span style="color:#66d9ef">for&lt;/span> mysql:latest
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>docker.io/library/mysql:latest&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;p>ç”±æ–¼æˆ‘å€‘ä¸‹è¼‰çš„æ²’æœ‰åŠ ä»»ä½•çš„ &lt;code>tag&lt;/code> ï¼Œä¹Ÿå°±æ˜¯ç‰ˆæœ¬ï¼Œæ‰€ä»¥æˆ‘å€‘éƒ½æ˜¯ä¸‹è¼‰æœ€æ–°ç‰ˆ latest ï¼Œå¦‚æœæƒ³è¦ä¸‹è¼‰ç‰¹å®šç‰ˆæœ¬ï¼Œå¯ä»¥åœ¨æœå‹™åç¨±å¾Œé¢åŠ ä¸Š &lt;code>:{ç‰ˆæœ¬}&lt;/code> ï¼Œå°±å¯ä»¥ä¸‹è¼‰å°æ‡‰çš„ç‰ˆæœ¬å›‰ï¼&lt;/p>
&lt;br>
&lt;p>å¦‚æœæœ‰æ¨™è¨˜ &lt;code>Official Image&lt;/code> å°±ä»£è¡¨æ˜¯å®˜æ–¹é‡‹å‡ºçš„æ˜ åƒæª” ~ åœ¨ç©©å®šæ€§ä»¥åŠå®‰å…¨ä¸Šæ›´æœ‰ä¿éšœï¼Œæ‰€ä»¥å¤§å®¶å¯ä»¥å„ªå…ˆä¸‹è¼‰æ­ï¼&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/docker/docker/docker-image.png"
alt="Docker hub ä¸‹è¼‰ Image" width="900">&lt;figcaption>
&lt;p>Docker hub ä¸‹è¼‰ Image&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;h4>ç®¡ç†æœ¬åœ°ä¸»æ©Ÿä¸Šçš„æ˜ åƒæª”&lt;span class="hx-absolute -hx-mt-20" id="ç®¡ç†æœ¬åœ°ä¸»æ©Ÿä¸Šçš„æ˜ åƒæª”">&lt;/span>
&lt;a href="#%e7%ae%a1%e7%90%86%e6%9c%ac%e5%9c%b0%e4%b8%bb%e6%a9%9f%e4%b8%8a%e7%9a%84%e6%98%a0%e5%83%8f%e6%aa%94" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h4>&lt;h5>æŸ¥çœ‹æ˜ åƒæª” (images)&lt;span class="hx-absolute -hx-mt-20" id="æŸ¥çœ‹æ˜ åƒæª”-images">&lt;/span>
&lt;a href="#%e6%9f%a5%e7%9c%8b%e6%98%a0%e5%83%8f%e6%aa%94-images" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h5>&lt;p>ç•¶æˆ‘å€‘ä¸‹è¼‰å¥½æ˜ åƒæª”å¾Œï¼Œå¯ä»¥ä½¿ç”¨ &lt;code>docker images&lt;/code> ä¾†åˆ—å‡ºæœ¬æ©Ÿå·²ä¸‹è¼‰çš„æ˜ åƒæª”ã€‚&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>$ docker images
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>REPOSITORY TAG IMAGE ID CREATED SIZE
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>php latest d6229b88aa29 &lt;span style="color:#ae81ff">3&lt;/span> days ago 484MB
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>mysql latest 826efd84393b &lt;span style="color:#ae81ff">6&lt;/span> days ago 521MB
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>nginx latest c919045c4c2b &lt;span style="color:#ae81ff">13&lt;/span> days ago 142MB&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;p>æˆ‘å€‘ä¾†çœ‹çœ‹éƒ½åˆ—å‡ºå“ªäº›è¨Šæ¯å§ï¼&lt;/p>
&lt;ul>
&lt;li>REPOSITORYï¼šä¾†è‡ªæ–¼å“ªä¸€å€‹å€‰åº«ï¼Œåƒæ˜¯ phpã€mysqlã€nginxã€‚&lt;/li>
&lt;li>TAGï¼šæ˜ åƒæª”çš„æ¨™ç±¤ï¼Œå› ç‚ºæˆ‘å€‘éƒ½ä¸‹è¼‰æœ€æ–°ç‰ˆæœ¬æ‰€ä»¥æ˜¯ latestã€‚&lt;/li>
&lt;li>IMAGE IDï¼šå®ƒçš„å”¯ä¸€ &lt;code>ID&lt;/code> è™Ÿç¢¼ã€‚&lt;/li>
&lt;li>CREATEDï¼šå»ºç«‹æ™‚é–“ã€‚&lt;/li>
&lt;li>VIRTUAL SIZEï¼šæ˜ åƒæª”å¤§å°ã€‚&lt;/li>
&lt;/ul>
&lt;br>
&lt;h5>å„²å­˜æ˜ åƒæª” (save)&lt;span class="hx-absolute -hx-mt-20" id="å„²å­˜æ˜ åƒæª”-save">&lt;/span>
&lt;a href="#%e5%84%b2%e5%ad%98%e6%98%a0%e5%83%8f%e6%aa%94-save" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h5>&lt;p>æƒ³è¦å„²å­˜æ˜ åƒæª”ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code>docker save {æ˜ åƒæª”åç¨±} &amp;gt; {æª”æ¡ˆåç¨±}.tar&lt;/code>ï¼Œä¾†åšå„²å­˜ã€‚&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>$ docker save mysql &amp;gt; mysql.tar
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ ls | grep &lt;span style="color:#e6db74">&amp;#39;mysql&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>mysql.tar&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;h5>åˆªé™¤æ˜ åƒæª” (rmi)&lt;span class="hx-absolute -hx-mt-20" id="åˆªé™¤æ˜ åƒæª”-rmi">&lt;/span>
&lt;a href="#%e5%88%aa%e9%99%a4%e6%98%a0%e5%83%8f%e6%aa%94-rmi" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h5>&lt;p>æƒ³è¦åˆªé™¤æ˜ åƒæª”ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code>docker rmi {æ˜ åƒæª”åç¨±}&lt;/code> ä¾†åšåˆªé™¤ã€‚&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>$ docker rmi demo-image
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Untagged:demo-image:latest
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Deleted: sha256:1f56acbcbe9ec613a37e26934a84d98bed73879059f424dc69754520086baa37&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>æƒ³è¦åŒæ™‚åˆªé™¤æ˜ åƒæª”æ™‚ï¼Œå¯ä»¥å…ˆç”¨ &lt;code>docker images -aq&lt;/code> åˆ—å‡ºå…¨éƒ¨æ˜ åƒæª”çš„ IMAGE IDï¼Œå†ä¸€èµ·åˆªé™¤ã€‚&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>docker rmi -f &lt;span style="color:#66d9ef">$(&lt;/span>docker images -aq&lt;span style="color:#66d9ef">)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;ul>
&lt;li>æ³¨æ„ï¼åˆªé™¤æ˜ åƒæª”(Image)æ™‚ï¼Œè¦å…ˆç”¨ &lt;code>docker rm {å®¹å™¨}&lt;/code> å»åˆªé™¤æ‰€æœ‰ä¾è³´é€™å€‹æ˜ åƒæª”çš„å®¹å™¨ã€‚&lt;/li>
&lt;/ul>
&lt;br>
&lt;p>æ¥è‘—è¦æ€éº¼å»ºç«‹è‡ªå·±çš„æ˜ åƒæª”å‘¢ï¼Ÿæˆ‘å€‘è¦ä½¿ç”¨ Dockerfile ä¾†å»ºç«‹æ˜ åƒæª”ã€‚&lt;/p>
&lt;h4>æ˜ åƒæª”å¯¦ä½œ&lt;span class="hx-absolute -hx-mt-20" id="æ˜ åƒæª”å¯¦ä½œ">&lt;/span>
&lt;a href="#%e6%98%a0%e5%83%8f%e6%aa%94%e5%af%a6%e4%bd%9c" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h4>&lt;h5>æ’°å¯« Dockerfile æ˜ åƒæª”&lt;span class="hx-absolute -hx-mt-20" id="æ’°å¯«-dockerfile-æ˜ åƒæª”">&lt;/span>
&lt;a href="#%e6%92%b0%e5%af%ab-dockerfile-%e6%98%a0%e5%83%8f%e6%aa%94" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h5>&lt;p>Dockerfile æ˜¯ä¸€ç¨®æ–‡å­—æ ¼å¼çš„è¨­å®šæª”ï¼Œå¯ä»¥é€é Dockerfile å¿«é€Ÿå»ºç«‹è‡ªè¨‚çš„æ˜ åƒæª”ï¼Œæ›å¥è©±èªªï¼ŒDockerfile å°±åƒæ˜¯å»ºç½® Docker Image çš„è…³æœ¬ã€‚&lt;/p>
&lt;p>èˆ‰å€‹ä¾‹å­ï¼šå¯ä»¥æŠŠè‡ªå·±æƒ³åƒæˆä¸€ä½è¨­è¨ˆå¸«ï¼Œè¨­è¨ˆå¥½æˆ¿å­çš„æ ¼å±€ã€æ“ºé£¾ç­‰ï¼Œç•«å¥½è¨­è¨ˆåœ– (Dockerfile) å¾Œï¼Œæœ€å¾Œè«‹å¸«å‚… (Docker) ä¾ä½ çš„æ§‹æ€å®Œæˆå°±å¯ä»¥äº†ã€‚&lt;/p>
&lt;br>
&lt;p>æˆ‘å€‘å°±ä¾†é–‹å§‹å¯¦ä½œä¸€å€‹ Dockerfile å§ ~&lt;/p>
&lt;ol>
&lt;li>æˆ‘å€‘å…ˆå‰µå»ºä¸€å€‹ä¾†æ”¾ Dockerfile çš„è³‡æ–™å¤¾ï¼Œå¯ä»¥ç›´æ¥åœ¨è·¯å¾‘ä¸‹å»ºç«‹å‡ºæ˜ åƒæª”&lt;/li>
&lt;/ol>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>mkdir demo-dockerfile
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>cd demo-dockerfile/&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;p>Dockerfile çµæ§‹ï¼Œå¤§è‡´å¯ä»¥åˆ†ç‚ºå››å€‹éƒ¨åˆ†&lt;/p>
&lt;ul>
&lt;li>åŸºç¤æ˜ åƒæª”è³‡è¨Š&lt;/li>
&lt;li>ç¶­è­·è€…è³‡è¨Š&lt;/li>
&lt;li>æ˜ åƒæª”æ“ä½œæŒ‡ä»¤&lt;/li>
&lt;li>å®¹å™¨å•Ÿå‹•æ™‚éœ€åŸ·è¡Œçš„æŒ‡ä»¤&lt;/li>
&lt;/ul>
&lt;br>
&lt;ol start="2">
&lt;li>æˆ‘å€‘æœ‰èªªé Dockerfile æ˜¯ä¸€å€‹æ–‡å­—æ ¼å¼çš„è¨­å®šæª”ï¼Œæ‰€ä»¥æˆ‘å€‘ç”¨ vim ä¾†ç·¨å¯« Dockerfileã€‚&lt;/li>
&lt;/ol>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>vim Dockerfile&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># åŸºç¤æ˜ åƒæª”è³‡è¨Š&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FROM nginx:latest
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># ç¶­è­·è€…è³‡è¨Š&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>LABEL maintainer&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;880831ian@gmail.com&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># æ˜ åƒæª”æ“ä½œæŒ‡ä»¤&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>RUN apt-get update -y&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> apt-get install nginx -y
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># é‹è¡Œæ™‚å®¹å™¨æä¾›æœå‹™çš„é€šé“&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>EXPOSE &lt;span style="color:#ae81ff">80&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># å®¹å™¨å•Ÿå‹•æ™‚éœ€åŸ·è¡Œçš„æŒ‡ä»¤&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>CMD &lt;span style="color:#f92672">[&lt;/span>&lt;span style="color:#e6db74">&amp;#34;nginx&amp;#34;&lt;/span>,&lt;span style="color:#e6db74">&amp;#34;-g&amp;#34;&lt;/span>,&lt;span style="color:#e6db74">&amp;#34;daemon off;&amp;#34;&lt;/span>&lt;span style="color:#f92672">]&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;p>&lt;code>FROM nginx:latest&lt;/code>&lt;/p>
&lt;p>ç¬¬ä¸€è¡Œç‚ºå¿…è¦çš„æŒ‡å®šåŸºç¤æ˜ åƒæª”ï¼Œé€™é‚Šä½¿ç”¨ nginx ä½œç‚ºåŸºç¤æ˜ åƒæª”ï¼Œæˆ‘å€‘ç”¨æœ€æ–°ç‰ˆæœ¬ï¼Œæ‰€ä»¥æ˜¯ latestã€‚&lt;/p>
&lt;br>
&lt;p>&lt;code>LABEL maintainer=&amp;quot;880831ian@gmail.com&amp;quot;&lt;/code>&lt;/p>
&lt;p>ç¶­è­·è€…è³‡è¨Šæƒ³ä¸ä¹Ÿæ˜¯ä¸å¯ä»¥å°‘çš„ï¼Œé€™é‚Šä¹Ÿå¯ä»¥è¼¸å…¥ Email è³‡è¨Šï¼Œåªæ˜¯è¦æ³¨æ„çš„æ˜¯æ­¤è³‡è¨Šæœƒå¯«å…¥ç”¢å‡ºæ˜ åƒæª”çš„ Author åç¨±å±¬æ€§ä¸­ã€‚&lt;/p>
&lt;br>
&lt;p>&lt;code>RUN apt-get update -y\ &amp;amp;&amp;amp; apt-get install nginx -y&lt;/code>&lt;/p>
&lt;p>é€™é‚Šæ˜¯æœ€é‡è¦çš„éƒ¨åˆ†ï¼Œæƒ³è¦åœ¨æ˜ åƒæª”æ¡ˆä¸Šè¨­å®šæˆ–å®‰è£éƒ½éœ€è¦å°‡å‘½ä»¤å¯«åœ¨é€™ï¼Œæ ¼å¼å¿…é ˆä¾ RUN &lt;command> ï¼ŒRUN æŒ‡ä»¤å¾Œé¢æ”¾ Linux æŒ‡ä»¤ï¼Œå¦‚æœæŒ‡ä»¤å¤ªé•·å¯ä»¥ä½¿ç”¨\ä¾†æ›è¡Œã€‚ -y æ˜¯åœ¨å®‰è£ Nginxï¼ŒæœƒåŒæ„æ‰€æœ‰é€²è¡Œä¸­æ‰€å‡ºç¾çš„å•é¡Œã€‚&lt;/p>
&lt;br>
&lt;p>&lt;code>EXPOSE 80&lt;/code>&lt;/p>
&lt;p>è¨­å®šé‹è¡Œæ™‚å®¹å™¨æä¾›æœå‹™çš„é€šé“ã€‚&lt;/p>
&lt;br>
&lt;p>&lt;code>CMD [&amp;quot;nginx&amp;quot;,&amp;quot;-g&amp;quot;,&amp;quot;daemon off;&amp;quot;]&lt;/code>&lt;/p>
&lt;p>æœ€å¾Œå°±æ˜¯å•Ÿå‹•æŒ‡å®šå®¹å™¨æ™‚é è¨­åŸ·è¡Œçš„æŒ‡ä»¤ï¼Œæ ¼å¼æ˜¯ CMD [&amp;ldquo;executable&amp;rdquo;,&amp;ldquo;param1&amp;rdquo;,&amp;ldquo;param2&amp;rdquo;]ã€‚&lt;/p>
&lt;br>
&lt;div class="hx-overflow-x-auto hx-mt-6 hx-flex hx-rounded-lg hx-border hx-py-2 ltr:hx-pr-4 rtl:hx-pl-4 contrast-more:hx-border-current contrast-more:dark:hx-border-current hx-border-orange-100 hx-bg-orange-50 hx-text-orange-800 dark:hx-border-orange-400/30 dark:hx-bg-orange-400/20 dark:hx-text-orange-300">
&lt;div class="ltr:hx-pl-3 ltr:hx-pr-2 rtl:hx-pr-3 rtl:hx-pl-2">&lt;/div>
&lt;div class="hx-w-full hx-min-w-0 hx-leading-7">
&lt;div class="hx-mt-6 hx-leading-7 first:hx-mt-0">&lt;p>Docker é‹è¡Œ Nginx æ™‚ç‚ºä»€éº¼è¦ä½¿ç”¨ daemon off;&lt;/p>
&lt;p>å› ç‚º Docker å®¹å™¨å•Ÿå‹•æ™‚ï¼Œé»˜èªæœƒæŠŠå®¹å™¨å…§éƒ¨ç¬¬ä¸€å€‹é€²ç¨‹ï¼Œä½œçˆ² docker å®¹å™¨æ˜¯å¦æ­£å¸¸é‹è¡Œçš„ä¾æ“šï¼Œå¦‚æœ docker å®¹å™¨ pid = 1 åˆ°é€²ç¨‹å°±æ›äº†ï¼Œdocker å°±æœƒé€€å‡ºï¼&lt;/p>
&lt;p>Docker æœªåŸ·è¡Œè‡ªå®šç¾©çš„ CMD ä¹‹å‰ï¼Œ Nginx çš„ pid æ˜¯ 1ï¼ŒåŸ·è¡Œåˆ° CMD ä¹‹å¾Œï¼ŒNginx å°±åœ¨å¾Œå°é‹è¡Œï¼Œbash æˆ–æ˜¯ sh çš„è…³æœ¬å°±æœƒè®Šæˆ pid =1 ã€‚&lt;/p>
&lt;p>æ‰€ä»¥ä¸€ä½†åŸ·è¡Œå®Œ CMDï¼ŒNginx å®¹å™¨å°±æœƒé€€å‡ºäº†ï¼Œæ‰€ä»¥æ‰éœ€è¦åŠ ä¸Š &lt;code>-g daemon off;&lt;/code>ã€‚&lt;/p>
&lt;p>åœ¨ Nginx å®˜æ–¹çš„ &lt;a href="https://hub.docker.com/_/nginx" target="_blank" rel="noopener">Docker Repository&lt;/a> ä¹Ÿæœ‰èªªæ˜ï¼Œåœ¨ Complex configuration å…§ã€‚&lt;/p>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;br>
&lt;p>é †ä¾¿èªªä¸€ä¸‹ä½¿ç”¨ Dockerfile çš„å„ªé»ï¼š1 . å¯ä»¥é€²è¡Œ Git ç‰ˆæ§ï¼Œè®“ä½ ç®¡ç†æˆ–åˆ†äº«æ›´æ–¹ä¾¿ 2 . ä½”ç”¨å®¹é‡å°ï¼Œå› ç‚ºåªæ˜¯ç´”æ–‡å­—æª”è€Œå·²ã€‚&lt;/p>
&lt;br>
&lt;h5>ä½¿ç”¨ Dockerfile å»ºç«‹æ˜ åƒæª”&lt;span class="hx-absolute -hx-mt-20" id="ä½¿ç”¨-dockerfile-å»ºç«‹æ˜ åƒæª”">&lt;/span>
&lt;a href="#%e4%bd%bf%e7%94%a8-dockerfile-%e5%bb%ba%e7%ab%8b%e6%98%a0%e5%83%8f%e6%aa%94" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h5>&lt;p>æˆ‘å€‘å·²ç¶“æ’°å¯«å®Œ Dockerfile æª”æ¡ˆäº†ï¼Œæ¥ä¸‹ä¾†è¦åŸ·è¡Œä¾†ç”¢ç”Ÿæ˜ åƒæª”ï¼Œæˆ‘å€‘è¦ä½¿ç”¨ &lt;code>docker build&lt;/code> ä¾†å»ºç«‹ï¼Œæˆ‘å€‘ä¸€èµ·ä¾†çœ‹çœ‹å§&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>docker build -t demo-image .&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>å› ç‚ºæˆ‘å€‘åœ¨ dockerfile çš„ç›®éŒ„ä¸‹ï¼Œæ‰€ä»¥ç›´æ¥ä½¿ç”¨ â€œ.â€ ä¾†åšå»ºç«‹å‹•ä½œï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ -f ä¾†æŒ‡å®š dockerfile çš„è·¯å¾‘ä½ç½®ã€‚ä½¿ç”¨ -t ä¾†è¨­å®šæ˜ åƒæª”çš„åç¨±ï¼Œæˆ‘å€‘é€™é‚Šå–åå« demo-imageã€‚&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[&lt;/span>+&lt;span style="color:#f92672">]&lt;/span> Building 2.7s &lt;span style="color:#f92672">(&lt;/span>7/7&lt;span style="color:#f92672">)&lt;/span> FINISHED
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">=&lt;/span>&amp;gt; &lt;span style="color:#f92672">[&lt;/span>internal&lt;span style="color:#f92672">]&lt;/span> load build definition from Dockerfile 0.0s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">=&lt;/span>&amp;gt; &lt;span style="color:#f92672">=&lt;/span>&amp;gt; transferring dockerfile: 44B 0.0s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">=&lt;/span>&amp;gt; &lt;span style="color:#f92672">[&lt;/span>internal&lt;span style="color:#f92672">]&lt;/span> load .dockerignore 0.0s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">=&lt;/span>&amp;gt; &lt;span style="color:#f92672">=&lt;/span>&amp;gt; transferring context: 2B 0.0s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">=&lt;/span>&amp;gt; &lt;span style="color:#f92672">[&lt;/span>internal&lt;span style="color:#f92672">]&lt;/span> load metadata &lt;span style="color:#66d9ef">for&lt;/span> docker.io/library/nginx:latest 2.6s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">=&lt;/span>&amp;gt; &lt;span style="color:#f92672">[&lt;/span>auth&lt;span style="color:#f92672">]&lt;/span> library/ubuntu:pull token &lt;span style="color:#66d9ef">for&lt;/span> registry-1.docker.io 0.0s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">=&lt;/span>&amp;gt; &lt;span style="color:#f92672">[&lt;/span>1/2&lt;span style="color:#f92672">]&lt;/span> FROM docker.io/library/nginx:latest@sha256:8ae9bafbb64f63a50caab98fd3a5e37b3eb837a3e0780b78e5218e63193961f 0.0s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">=&lt;/span>&amp;gt; CACHED &lt;span style="color:#f92672">[&lt;/span>2/2&lt;span style="color:#f92672">]&lt;/span> RUN apt-get update -y &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> apt-get install nginx -y 0.0s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">=&lt;/span>&amp;gt; exporting to image 0.0s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">=&lt;/span>&amp;gt; &lt;span style="color:#f92672">=&lt;/span>&amp;gt; exporting layers 0.0s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">=&lt;/span>&amp;gt; &lt;span style="color:#f92672">=&lt;/span>&amp;gt; writing image sha256:1f56acbcbe9ec613a37e26934a84d98bed73879059f424dc69754520086baa37 0.0s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">=&lt;/span>&amp;gt; &lt;span style="color:#f92672">=&lt;/span>&amp;gt; naming to docker.io/demo-image&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;p>å®Œæˆå¾Œæˆ‘å€‘ä½¿ç”¨ &lt;code>docker images&lt;/code> ä¾†çœ‹çœ‹æ˜¯å¦å»ºç«‹æˆåŠŸã€‚&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>$ docker images
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>REPOSITORY TAG IMAGE ID CREATED SIZE
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>demo-image latest 1f56acbcbe9e &lt;span style="color:#ae81ff">2&lt;/span> hours ago 166MB
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>php latest d6229b88aa29 &lt;span style="color:#ae81ff">4&lt;/span> days ago 484MB
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>mysql latest 826efd84393b &lt;span style="color:#ae81ff">6&lt;/span> days ago 521MB
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>nginx latest c919045c4c2b &lt;span style="color:#ae81ff">13&lt;/span> days ago 142MB&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>åŸ·è¡Œå®¹å™¨çš„éƒ¨åˆ†ï¼Œæˆ‘å€‘æ”¾åˆ°å®¹å™¨ (Container)çš„ç« ç¯€åœ¨ä»‹ç´¹ ~&lt;/p>
&lt;br>
&lt;h3>å®¹å™¨ (Container)&lt;span class="hx-absolute -hx-mt-20" id="å®¹å™¨-container-1">&lt;/span>
&lt;a href="#%e5%ae%b9%e5%99%a8-container-1" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>æˆ‘å€‘åœ¨ä»‹ç´¹æŒ‡ä»¤å‰ï¼Œå…ˆä¾†äº†è§£ä¸€ä¸‹ Dockerfileã€Docker Imageã€Docker Container é€™ä¸‰å€‹çš„é—œä¿‚ï¼Œå¯ä»¥å…ˆåƒè€ƒä»¥ä¸‹åœ–ç‰‡&lt;/p>
&lt;figure>&lt;img src="https://pin-yi.me/docker/docker/container.png"
alt="å®¹å™¨ Container çµ„æˆ" width="300">&lt;figcaption>
&lt;p>å®¹å™¨ Container çµ„æˆ&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;p>æˆ‘å€‘åœ¨å•Ÿå‹• Container æ™‚ï¼Œæœƒæœ‰é€™ä¸‰å€‹éƒ¨åˆ†çµ„æˆï¼Œæœ€åº•å±¤æ˜¯æ˜ åƒæª” (Image)ï¼Œé€™ä¸€å±¤ä¸»è¦æ˜¯é€éæ’°å¯« Dockerfile ä¹‹å¾Œ build å‡ºä¾†çš„ Docker Imageï¼Œå°±åƒæˆ‘å€‘å‰é¢èªªçš„å®ƒæ˜¯ä¸€å€‹å”¯ç¨çš„æª”æ¡ˆã€‚åŸ·è¡Œå•Ÿå‹•äº† Docker Containerï¼Œå°±æœƒåŠ ä¸Šç¬¬äºŒå±¤ï¼Œå°±æ˜¯éœ€è¦å…ˆ Init Container çš„è¨­å®šï¼Œä¾‹å¦‚æ˜¯ hostnameã€ç’°å¢ƒè®Šæ•¸ã€ç¶²è·¯é€£æ¥ç­‰ç³»çµ±è¨­å®šï¼Œæœ€å¾Œæœ€ä¸Šå±¤å†åŠ ä¸Šä¸€å±¤è®“ä½¿ç”¨è€…å¯ä»¥åœ¨æ­¤å±¤å»è®€å¯«è³‡æ–™ã€‚&lt;/p>
&lt;br>
&lt;p>æœ‰é—œæ–¼å®¹å™¨ (Container) çš„æŒ‡ä»¤éå¸¸å¤šï¼Œå…‰æ˜¯ç°¡å–®çš„ run å°±æœ‰å¾ˆå¤šåƒæ•¸ï¼Œæˆ‘å€‘å…ˆåˆ—å‡ºæ¯”è¼ƒå¸¸ç”¨ä¸”åŸºæœ¬çš„ Container æŒ‡ä»¤ï½&lt;/p>
&lt;h4>Container åŸ·è¡Œæ™‚çš„æ“ä½œ&lt;span class="hx-absolute -hx-mt-20" id="container-åŸ·è¡Œæ™‚çš„æ“ä½œ">&lt;/span>
&lt;a href="#container-%e5%9f%b7%e8%a1%8c%e6%99%82%e7%9a%84%e6%93%8d%e4%bd%9c" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h4>&lt;h5>åŸ·è¡Œå®¹å™¨ (run)&lt;span class="hx-absolute -hx-mt-20" id="åŸ·è¡Œå®¹å™¨-run">&lt;/span>
&lt;a href="#%e5%9f%b7%e8%a1%8c%e5%ae%b9%e5%99%a8-run" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h5>&lt;p>æˆ‘å€‘æƒ³è¦å‰µå»ºä¸€å€‹æ–°çš„å®¹å™¨ä¸¦é‹è¡Œï¼Œå°±å¯ä»¥ä½¿ç”¨ &lt;code>docker run&lt;/code>ï¼Œæˆ‘å€‘ä¾†çœ‹çœ‹ä»–å¯ä»¥ä½¿ç”¨å“ªäº›åƒæ•¸å§ï¼&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>docker run &lt;span style="color:#f92672">[&lt;/span>OPTIONS&lt;span style="color:#f92672">]&lt;/span> IMAGE &lt;span style="color:#f92672">[&lt;/span>COMMAND&lt;span style="color:#f92672">]&lt;/span> &lt;span style="color:#f92672">[&lt;/span>ARG...&lt;span style="color:#f92672">]&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;ul>
&lt;li>OPTIONS èªªæ˜ï¼š&lt;/li>
&lt;/ul>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: center">åƒæ•¸&lt;/th>
&lt;th style="text-align: center">æè¿°&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: center">-d&lt;/td>
&lt;td style="text-align: center">å¾Œå°é‹è¡Œå®¹å™¨&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">-i&lt;/td>
&lt;td style="text-align: center">å‘½ä»¤äº’å‹•æ¨¡å¼ï¼Œé€šå¸¸èˆ‡ -t åŒæ™‚ä½¿ç”¨&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">-t&lt;/td>
&lt;td style="text-align: center">ç‚ºå®¹å™¨é‡æ–°åˆ†é…ä¸€å€‹å‡è£çš„è¼¸å…¥çµ‚ç«¯ï¼Œé€šå¸¸èˆ‡ -i åŒæ™‚ä½¿ç”¨&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">-p&lt;/td>
&lt;td style="text-align: center">æŒ‡å®šå®¹å™¨èˆ‡æœ¬æ©Ÿçš„ Port ï¼Œæ ¼å¼æ˜¯ &lt;code>ä¸»æ©Ÿ Port : å®¹å™¨ Port&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&amp;ndash;name=&amp;quot;{åç¨±}&amp;quot;&lt;/td>
&lt;td style="text-align: center">ç‚ºå®¹å™¨è¨­å®šåç¨±&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&amp;ndash;net=&amp;quot;{ç¶²è·¯é¡å‹}&amp;quot;&lt;/td>
&lt;td style="text-align: center">æŒ‡å®šå®¹å™¨çš„ç¶²è·¯é€£æ¥é¡å‹ï¼Œæ”¯æ´ bridge/host/none/container å››ç¨®æ¨¡å¼&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&amp;ndash;link=&amp;quot;{å…¶ä»–å®¹å™¨}&amp;quot;&lt;/td>
&lt;td style="text-align: center">æ·»åŠ é€£æ¥åˆ°å¦ä¸€å€‹å®¹å™¨&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&amp;ndash;volume,-v&lt;/td>
&lt;td style="text-align: center">å°‡å®¹å™¨æª”æ¡ˆè·¯å¾‘æ˜ å°„åˆ°æœ¬åœ°ç«¯ï¼Œæ ¼å¼æ˜¯ &lt;code>æœ¬æ©Ÿè·¯å¾‘ï¼šå®¹å™¨è·¯å¾‘&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;br>
&lt;p>æˆ‘å€‘å•Ÿå‹•æˆ‘å€‘ä¸‹è¼‰å¥½çš„ Nginx ä¾†è©¦è©¦çœ‹å§ï¼&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>$ docker run -d -p 7777:80 --name&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;demo-nginx&amp;#34;&lt;/span> -v /Users/ian_zhuang/Desktop/data:/var/www/html nginx
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>31a4a4a56e3ef2fb75d538c4c9eea4914ac506a84a6ff97e1fbbb6c3213cc6b7&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>æˆ‘å€‘å°‡ Nginx å®¹å™¨åœ¨èƒŒæ™¯åŸ·è¡Œï¼Œä¸”å°‡é è¨­çš„ 80 Port èˆ‡æœ¬æ©Ÿçš„ 7777 Port ç¶åœ¨ä¸€èµ·ï¼Œè®“æˆ‘å€‘åœ¨æœ¬æ©Ÿç€è¦½ 7777 Port æœƒç›´æ¥å°å‘å®¹å™¨çš„ 80Portï¼Œè¨­å®šå®¹å™¨çš„åå­—å«åš â€œdemo-nginx&amp;quot; ï¼Œæˆ‘å€‘ Nginx å®¹å™¨çš„æª”æ¡ˆè·¯å¾‘æ˜ å°„åˆ°æœ¬åœ°ç«¯çš„æ¡Œé¢ data è³‡æ–™å¤¾ï¼Œæˆ‘å€‘å°±å¯ä»¥åœ¨æœ¬æ©Ÿæ–°å¢æª”æ¡ˆåŒæ­¥åˆ°å®¹å™¨ä¸­ã€‚&lt;/p>
&lt;br>
&lt;h5>é¡¯ç¤ºå®¹å™¨ (ps)&lt;span class="hx-absolute -hx-mt-20" id="é¡¯ç¤ºå®¹å™¨-ps">&lt;/span>
&lt;a href="#%e9%a1%af%e7%a4%ba%e5%ae%b9%e5%99%a8-ps" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h5>&lt;p>ä½¿ç”¨ &lt;code>docker ps&lt;/code> ä¾†æª¢æŸ¥ä¸€ä¸‹æ˜¯å¦å•Ÿå‹•æˆåŠŸ (&lt;code>ps&lt;/code> å¯ä»¥é¡¯ç¤ºæ˜ åƒæª”çš„åŸºæœ¬è³‡è¨Šï¼Œå¦‚æœæ²’æœ‰åŠ  -a åªæœƒé¡¯ç¤ºåŸ·è¡Œä¸­çš„å®¹å™¨)&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>$ docker ps
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>31a4a4a56e3e demo-image &lt;span style="color:#e6db74">&amp;#34;nginx -g &amp;#39;daemon ofâ€¦&amp;#34;&lt;/span> About a minute ago Up About a minute 0.0.0.0:7777-&amp;gt;80/tcp demo-nginx&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;p>æ¥è‘—æˆ‘å€‘æ¸¬è©¦æ˜¯å¦æœ‰æŠŠæ¡Œé¢ data è³‡æ–™å¤¾æ›åˆ°å®¹å™¨çš„è·¯å¾‘ï¼Œæˆ‘å€‘å…ˆåœ¨ data æ–°å¢ä¸€å€‹ hello.html ï¼Œè£¡é¢éš¨æ„è¼¸å…¥ï¼Œç€è¦½ä¸€ä¸‹ &lt;code>http://127.0.0.1:7777/hello.html&lt;/code> ï¼Œçœ‹çœ‹æ˜¯å¦æˆåŠŸã€‚&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/docker/docker/container-v.png"
alt="å®¹å™¨ Container -volume æ¸¬è©¦" width="700">&lt;figcaption>
&lt;p>å®¹å™¨ Container -volume æ¸¬è©¦&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;h5>é¡¯ç¤ºå®¹å™¨ç´€éŒ„ (logs)&lt;span class="hx-absolute -hx-mt-20" id="é¡¯ç¤ºå®¹å™¨ç´€éŒ„-logs">&lt;/span>
&lt;a href="#%e9%a1%af%e7%a4%ba%e5%ae%b9%e5%99%a8%e7%b4%80%e9%8c%84-logs" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h5>&lt;p>æƒ³è¦çœ‹åˆ°æˆ‘å€‘åŸ·è¡Œ Container çš„ç´€éŒ„ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code>logs&lt;/code> æŒ‡ä»¤ä¾†é¡¯ç¤ºã€‚&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>$ docker logs demo-nginx
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>/docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>/docker-entrypoint.sh: Looking &lt;span style="color:#66d9ef">for&lt;/span> shell scripts in /docker-entrypoint.d/
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>/docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>... çœç•¥ ...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>2022/03/15 09:27:51 &lt;span style="color:#f92672">[&lt;/span>notice&lt;span style="color:#f92672">]&lt;/span> 1#1: start worker process &lt;span style="color:#ae81ff">33&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>2022/03/15 09:27:51 &lt;span style="color:#f92672">[&lt;/span>notice&lt;span style="color:#f92672">]&lt;/span> 1#1: start worker process &lt;span style="color:#ae81ff">34&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>2022/03/15 09:27:51 &lt;span style="color:#f92672">[&lt;/span>notice&lt;span style="color:#f92672">]&lt;/span> 1#1: start worker process &lt;span style="color:#ae81ff">35&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;h5>åˆªé™¤å®¹å™¨ (rm -f)&lt;span class="hx-absolute -hx-mt-20" id="åˆªé™¤å®¹å™¨-rm--f">&lt;/span>
&lt;a href="#%e5%88%aa%e9%99%a4%e5%ae%b9%e5%99%a8-rm--f" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h5>&lt;p>æƒ³è¦åˆªé™¤ä¸éœ€è¦çš„ Containerï¼Œå¯ä»¥ä½¿ç”¨ &lt;code>rm&lt;/code> æŒ‡ä»¤ä¾†åšåˆªé™¤ï¼Œ&lt;code>-f&lt;/code> æ˜¯å¼·åˆ¶åˆªé™¤å®¹å™¨ã€‚&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>$ docker rm -f demo-nginx
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>demo-nginx&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;h5>é€²å…¥å®¹å™¨ (exec)&lt;span class="hx-absolute -hx-mt-20" id="é€²å…¥å®¹å™¨-exec">&lt;/span>
&lt;a href="#%e9%80%b2%e5%85%a5%e5%ae%b9%e5%99%a8-exec" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h5>&lt;p>æƒ³è¦é€²å…¥ container ä¾†æŸ¥çœ‹è³‡æ–™æˆ–æ˜¯ä¿®æ”¹æª”æ¡ˆï¼Œå¯ä»¥ä½¿ç”¨ &lt;code>exec&lt;/code> ä¾†é€²å…¥å®¹å™¨ä¸­ã€‚&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>$ docker exec -it demo-nginx /bin/bash
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>root@31a4a4a56e3e:/# ls
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>bin boot dev docker-entrypoint.d docker-entrypoint.sh etc home lib lib64 media mnt opt proc root run sbin srv sys tmp usr var
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>root@31a4a4a56e3e:/# cd usr/bin/
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>root@31a4a4a56e3e:/usr/bin# pwd
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>/usr/bin&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;h5>åŒ¯å‡ºæª”æ¡ˆ (export)&lt;span class="hx-absolute -hx-mt-20" id="åŒ¯å‡ºæª”æ¡ˆ-export">&lt;/span>
&lt;a href="#%e5%8c%af%e5%87%ba%e6%aa%94%e6%a1%88-export" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h5>&lt;p>æˆ‘å€‘å‰é¢æœ‰æåˆ°èªªï¼Œå¦‚æœåˆªé™¤äº†å®¹å™¨ï¼Œä»¥å‰å¯«å…¥çš„è³‡æ–™ä¹Ÿæœƒä¸è¦‹ï¼Œå¦‚æœæƒ³è¦è¼¸å‡ºè³‡æ–™ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code>export&lt;/code> å°‡å¯è®€å¯å¯«çš„é‚£ä¸€å±¤åŒ¯æˆæª”æ¡ˆã€‚&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>$ docker export demo-nginx &amp;gt; demo-nginx.tar
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ ls | grep &lt;span style="color:#e6db74">&amp;#39;demo&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>demo-nginx.tar&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;div class="hx-overflow-x-auto hx-mt-6 hx-flex hx-rounded-lg hx-border hx-py-2 ltr:hx-pr-4 rtl:hx-pl-4 contrast-more:hx-border-current contrast-more:dark:hx-border-current hx-border-orange-100 hx-bg-orange-50 hx-text-orange-800 dark:hx-border-orange-400/30 dark:hx-bg-orange-400/20 dark:hx-text-orange-300">
&lt;div class="ltr:hx-pl-3 ltr:hx-pr-2 rtl:hx-pr-3 rtl:hx-pl-2">&lt;/div>
&lt;div class="hx-w-full hx-min-w-0 hx-leading-7">
&lt;div class="hx-mt-6 hx-leading-7 first:hx-mt-0">&lt;p>save è·Ÿ export çš„å€åˆ¥ï¼š&lt;/p>
&lt;p>é‚„è¨˜å¾—æˆ‘å€‘åœ¨å„²å­˜æ˜ åƒæª”çš„æ™‚å€™æœ‰ä»‹ç´¹åˆ° save å—ï¼Œé‚£ä»–è·Ÿ export çš„å€åˆ¥æ˜¯ä»€éº¼å‘¢ï¼Ÿæˆ‘å€‘å¯ä»¥ç†è§£æˆ&lt;/p>
&lt;p>save æ˜¯æŠŠ Docker Image åŸå§‹æª”åšå„²å­˜ï¼Œexport æ˜¯æŠŠä¿®æ”¹ Docker Image çš„å…§å®¹éƒ½ä¸€ä½µå„²å­˜ã€‚&lt;/p>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;br>
&lt;h5>åŒ¯å…¥æª”æ¡ˆ (import)&lt;span class="hx-absolute -hx-mt-20" id="åŒ¯å…¥æª”æ¡ˆ-import">&lt;/span>
&lt;a href="#%e5%8c%af%e5%85%a5%e6%aa%94%e6%a1%88-import" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h5>&lt;p>æœ‰åŒ¯å‡ºæª”æ¡ˆï¼Œç•¶ç„¶ä¹Ÿæœ‰åŒ¯å…¥æª”æ¡ˆæ‹‰ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code>import&lt;/code> å°‡æˆ‘å€‘åŒ¯å‡ºçš„æª”æ¡ˆåŒ¯å…¥ Docker Image è£¡é¢ã€‚&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>$ cat ~/Desktop/demo-nginx.tar| docker import - import-nginx
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sha256:7106935f0bfbdbb84f9eb20edb8cdb2c53207f5e0963f6a4e89d8267e9d98c56
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ docker images
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>REPOSITORY TAG IMAGE ID CREATED SIZE
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>import-nginx latest 7106935f0bfb &lt;span style="color:#ae81ff">19&lt;/span> seconds ago 140MB&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;h4>Container çš„ç‹€æ…‹&lt;span class="hx-absolute -hx-mt-20" id="container-çš„ç‹€æ…‹">&lt;/span>
&lt;a href="#container-%e7%9a%84%e7%8b%80%e6%85%8b" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h4>&lt;h5>æª¢æŸ¥å®¹å™¨ç‹€æ…‹ (inspect)&lt;span class="hx-absolute -hx-mt-20" id="æª¢æŸ¥å®¹å™¨ç‹€æ…‹-inspect">&lt;/span>
&lt;a href="#%e6%aa%a2%e6%9f%a5%e5%ae%b9%e5%99%a8%e7%8b%80%e6%85%8b-inspect" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h5>&lt;p>æƒ³è¦æŸ¥çœ‹å®¹å™¨çš„ç‹€æ…‹æ•¸æ“šï¼Œå¯ä»¥ä½¿ç”¨ &lt;code>inspect&lt;/code> ä¾†é¡¯ç¤ºã€‚&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;Id&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;sha256:1f56acbcbe9ec613a37e26934a84d98bed73879059f424dc69754520086baa37&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;RepoTags&amp;#34;&lt;/span>: &lt;span style="color:#f92672">[&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;demo-image:latest&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">]&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;RepoDigests&amp;#34;&lt;/span>: &lt;span style="color:#f92672">[]&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;Parent&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;Comment&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;buildkit.dockerfile.v0&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;Created&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;2022-03-15T03:02:26.8321887Z&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;Container&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;ContainerConfig&amp;#34;&lt;/span>: &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;Hostname&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;Domainname&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;User&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>.... çœç•¥ ....&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;h5>æŸ¥çœ‹å®¹å™¨çš„ CPUã€è¨˜æ†¶é«”åŠç¶²è·¯ä½¿ç”¨ (stats)&lt;span class="hx-absolute -hx-mt-20" id="æŸ¥çœ‹å®¹å™¨çš„-cpuè¨˜æ†¶é«”åŠç¶²è·¯ä½¿ç”¨-stats">&lt;/span>
&lt;a href="#%e6%9f%a5%e7%9c%8b%e5%ae%b9%e5%99%a8%e7%9a%84-cpu%e8%a8%98%e6%86%b6%e9%ab%94%e5%8f%8a%e7%b6%b2%e8%b7%af%e4%bd%bf%e7%94%a8-stats" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h5>&lt;p>æƒ³è¦æŸ¥çœ‹å®¹å™¨çš„ CPUã€è¨˜æ†¶é«”åŠç¶²è·¯ä½¿ç”¨ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code>stats&lt;/code> ä¾†é¡¯ç¤ºã€‚&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>CONTAINER ID NAME CPU % MEM USAGE / LIMIT MEM % NET I/O BLOCK I/O PIDS
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>31a4a4a56e3e demo-nginx 0.00% 5.797MiB / 1.939GiB 0.29% 6.29kB / 2.83kB 1.46MB / 20.5kB &lt;span style="color:#ae81ff">5&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;h3>å€‰åº« (Repository)&lt;span class="hx-absolute -hx-mt-20" id="å€‰åº«-repository">&lt;/span>
&lt;a href="#%e5%80%89%e5%ba%ab-repository" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>æˆ‘å€‘åœ¨æ˜ åƒæª”çš„ç« ç¯€æœ‰ä½¿ç”¨ &lt;code>docker pull&lt;/code> ä¾†ä¸‹è¼‰åˆ¥äººçš„æ˜ åƒæª”ä¾†ä½¿ç”¨ï¼Œé‚£æˆ‘å€‘è¦å¦‚ä½•æŠŠæˆ‘å€‘åšå¥½çš„ä¸Šå‚³ä¸Šå» Docker hub å‘¢ï¼(ç”±æ–¼ Docker hub æ˜¯å…¬é–‹å¹³å°ï¼Œæ‰€ä»¥å¤§å®¶éƒ½å¯ä»¥è‡ªç”±çš„ä¸‹è¼‰æ˜ åƒæª”ï¼Œæ‰€ä»¥æ˜¯å…¬å¸æ©Ÿå¯†çš„æ˜ åƒæª”ï¼Œå°±è¦é¿å…ä¸Šå‚³æ­ï¼)&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>$ docker login
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Authenticating with existing credentials...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Login Succeeded&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>ç”±æ–¼æˆ‘æœ‰ä¸‹è¼‰æ¡Œé¢ç‰ˆçš„ Docker ï¼Œæ‰€ä»¥ç™»å…¥æ™‚ä¸éœ€è¦å†å¦å¤–è¨­å®šï¼&lt;/p>
&lt;br>
&lt;p>æˆ‘å€‘åœ¨ä¸Šå‚³åˆ° Docker hub ä¹‹å‰ï¼Œéœ€è¦å…ˆä¿®æ”¹ Image çš„ tag ï¼Œæ ¼å¼ &lt;code>docker tag {Image Name} {DockerHubå¸³è™Ÿ}/{æƒ³è¦å–çš„ Image Name}&lt;/code>&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>$ docker images | grep &lt;span style="color:#e6db74">&amp;#39;demo-image&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>demo-image latest 1f56acbcbe9e &lt;span style="color:#ae81ff">24&lt;/span> hours ago 166MB
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ docker tag demo-image 880831ian/demo-image
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ docker images | grep &lt;span style="color:#e6db74">&amp;#39;demo-image&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>880831ian/demo-image latest 1f56acbcbe9e &lt;span style="color:#ae81ff">24&lt;/span> hours ago 166MB
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>demo-image latest 1f56acbcbe9e &lt;span style="color:#ae81ff">24&lt;/span> hours ago 166MB&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;p>æ¥ä¸‹ä¾†å°±ä½¿ç”¨ &lt;code>docker push&lt;/code>ï¼Œå°‡æ˜ åƒæª”ä¸Šå‚³åˆ° Docker hub ä¸Šï¼&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>$ docker push 880831ian/demo-image
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Using default tag: latest
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>The push refers to repository &lt;span style="color:#f92672">[&lt;/span>docker.io/880831ian/demo-image&lt;span style="color:#f92672">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>7722c88c8d69: Pushed
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>68a85fa9d77e: Mounted from library/ubuntu
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>latest: digest: sha256:814caacaf3dad3eccb43dc9bcad635d0473bd5946295d40ca1ec23d13a5f6d0f size: &lt;span style="color:#ae81ff">741&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;p>æˆ‘å€‘ä¹Ÿç™»å…¥ Docker hub çœ‹ä¸€ä¸‹ï¼Œæ˜¯ä¸æ˜¯çœŸçš„ä¸Šå‚³æˆåŠŸäº†ï½&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/docker/docker/repository.png"
alt="repository" width="1000">&lt;figcaption>
&lt;p>repository&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;h2>Docker é€²éš&lt;span class="hx-absolute -hx-mt-20" id="docker-é€²éš">&lt;/span>
&lt;a href="#docker-%e9%80%b2%e9%9a%8e" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>æœ¬ç« ç¯€æœƒåˆ†æˆä¸‰å€‹å¸¸ç”¨åŠŸèƒ½ä¾†èªªæ˜&lt;/p>
&lt;ul>
&lt;li>Volumes ä»‹ç´¹&lt;/li>
&lt;li>Network æ¨¡å¼ä»‹ç´¹å’Œæ¯”è¼ƒ&lt;/li>
&lt;li>Docker-compose ä»‹ç´¹èˆ‡å¯¦ä½œ&lt;/li>
&lt;/ul>
&lt;br>
&lt;h3>Volumes ä»‹ç´¹&lt;span class="hx-absolute -hx-mt-20" id="volumes-ä»‹ç´¹">&lt;/span>
&lt;a href="#volumes-%e4%bb%8b%e7%b4%b9" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>æˆ‘å€‘åœ¨å…ˆå‰ä»‹ç´¹ Container æ™‚ï¼Œä¹Ÿæœ‰èªªåˆ°ï¼ŒContainer æœƒåˆ†æˆ Image å±¤ã€Init å±¤ä»¥åŠä½¿ç”¨è€…å¯è®€å¯å¯«å±¤çš„é€™ä¸‰å±¤ã€‚ç•¶æˆ‘å€‘å°‡ Container åˆªé™¤å¾Œï¼Œå­˜æ”¾åœ¨ Docker Container ä¸Šçš„è³‡æ–™ä¹Ÿæœƒä¸è¦‹ï¼Œé›–ç„¶å¯ä»¥ç”¨ &lt;code>export&lt;/code> ä¾†å„²å­˜ï¼Œä½†æˆ‘å€‘æ‡‰è©²åœ¨æ ¹æœ¬ä¸Šè§£æ±ºå•é¡Œã€‚&lt;/p>
&lt;p>æ‰€ä»¥æˆ‘å€‘å¯ä»¥ä½¿ç”¨å…©ç¨®æ–¹å¼ä¾†è§£æ±ºï¼&lt;/p>
&lt;ol>
&lt;li>åœ¨åŸ·è¡Œ &lt;code>docker run&lt;/code> æŒ‡ä»¤æ™‚åŠ å…¥ &lt;code>-v&lt;/code> åƒæ•¸ï¼Œå°‡ Container çš„æª”æ¡ˆè·¯å¾‘æ˜ å°„åˆ°æœ¬åœ°ç«¯çš„æª”æ¡ˆè·¯å¾‘ã€‚&lt;/li>
&lt;li>åœ¨æ’°å¯« Dockerfile æ™‚ï¼ŒåŠ å…¥ &lt;code>VOLUME&lt;/code> æŒ‡ä»¤ï¼Œå¯ä»¥å°‡è³‡æ–™å­˜æ”¾åœ¨å¯¦é«”ä¸»æ©Ÿä¸Šã€‚ä½¿ç”¨é€™å€‹æ–¹æ³•é‚„è¦æ­é…æˆ‘å€‘ä»‹ç´¹ &lt;a href="https://pin-yi.me/docker/#%e6%aa%a2%e6%9f%a5%e5%ae%b9%e5%99%a8%e7%8b%80%e6%85%8b-inspect" target="_blank" rel="noopener">Container çš„ç‹€æ…‹ &amp;gt; æª¢æŸ¥å®¹å™¨ç‹€æ…‹ (inspect)&lt;/a> ï¼Œä¾†æŸ¥è©¢æœ¬åœ°ç«¯æª”æ¡ˆçš„å­˜æ”¾è·¯å¾‘åœ¨å“ªã€‚&lt;/li>
&lt;/ol>
&lt;br>
&lt;h4>ä½¿ç”¨ -v æŒ‡ä»¤å°‡å®¹å™¨æ˜ å°„åˆ°æœ¬åœ°ç«¯&lt;span class="hx-absolute -hx-mt-20" id="ä½¿ç”¨--v-æŒ‡ä»¤å°‡å®¹å™¨æ˜ å°„åˆ°æœ¬åœ°ç«¯">&lt;/span>
&lt;a href="#%e4%bd%bf%e7%94%a8--v-%e6%8c%87%e4%bb%a4%e5%b0%87%e5%ae%b9%e5%99%a8%e6%98%a0%e5%b0%84%e5%88%b0%e6%9c%ac%e5%9c%b0%e7%ab%af" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h4>&lt;p>åœ¨ä½¿ç”¨ &lt;code>docker run&lt;/code> æŒ‡ä»¤æ™‚ï¼Œä½¿ç”¨ &lt;code>-v&lt;/code> å°‡å®¹å™¨æª”æ¡ˆè·¯å¾‘æ˜ å°„åˆ°æœ¬åœ°çš„æª”æ¡ˆè·¯å¾‘ã€‚&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>$ docker run -it -v /Users/ian_zhuang/Desktop/data:/storage centos /bin/bash
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>latest: Pulling from library/centos
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Digest: sha256:a27fd8080b517143cbbbab9dfb7c8571c40d67d534bbdee55bd6c473f432b177
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Status: Downloaded newer image &lt;span style="color:#66d9ef">for&lt;/span> centos:latest
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[&lt;/span>root@a99b41fba3ca /&lt;span style="color:#f92672">]&lt;/span>&lt;span style="color:#75715e">#&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;p>æˆ‘å€‘åœ¨è‘—é¢çš„ data è³‡æ–™å¤¾éš¨æ„æ–°å¢æª”æ¡ˆæˆ–æ˜¯è³‡æ–™ï¼Œå†é€²å…¥ Docker Container å…§çš„ /storage (è©²æª”æ¡ˆæ˜¯å› ç‚ºä½¿ç”¨ -v è€Œæ–°å¢çš„è³‡æ–™å¤¾) ï¼Œçœ‹çœ‹æœ‰æ²’æœ‰åŒæ­¥æ–°å¢ã€‚&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[&lt;/span>root@a99b41fba3ca /&lt;span style="color:#f92672">]&lt;/span>&lt;span style="color:#75715e"># cd storage&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[&lt;/span>root@a99b41fba3ca storage&lt;span style="color:#f92672">]&lt;/span>&lt;span style="color:#75715e"># pwd&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>/storage
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[&lt;/span>root@a99b41fba3ca storage&lt;span style="color:#f92672">]&lt;/span>&lt;span style="color:#75715e"># ls&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>1.html 2.html 3.html&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;h4>Dockerfile VOLUME ä½¿ç”¨&lt;span class="hx-absolute -hx-mt-20" id="dockerfile-volume-ä½¿ç”¨">&lt;/span>
&lt;a href="#dockerfile-volume-%e4%bd%bf%e7%94%a8" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h4>&lt;p>æˆ‘å€‘å…ˆæ‰“é–‹ä¸Šæ¬¡çš„ &lt;a href="https://pin-yi.me/docker/#%e6%92%b0%e5%af%ab-dockerfile-%e6%98%a0%e5%83%8f%e6%aa%94" target="_blank" rel="noopener">Dockerfile&lt;/a> æª”æ¡ˆï¼Œåœ¨åŸºç¤æ˜ åƒæª”è³‡è¨Šçš„åº•ä¸‹ä½¿ç”¨ &lt;code>VOLUME&lt;/code> æŒ‡ä»¤ï¼ŒåŠ å…¥ storage è³‡æ–™å¤¾ï¼Œå†å°‡ Image Build èµ·ä¾†ï¼Œå•Ÿå‹• Containerï¼Œåœ¨ /storage è£¡é¢éš¨ä¾¿æ–°å¢è³‡æ–™ï¼Œæœ€å¾Œæˆ‘å€‘åœ¨ç”¨ &lt;code>docker inspect&lt;/code> æŒ‡ä»¤ä¾†æ‰¾æ˜ å°„åœ¨æœ¬åœ°ç«¯çš„è·¯å¾‘ã€‚&lt;/p>
&lt;br>
&lt;ol>
&lt;li>åœ¨åŸºç¤æ˜ åƒæª”è³‡è¨Šçš„åº•ä¸‹ä½¿ç”¨ &lt;code>VOLUME&lt;/code> æŒ‡ä»¤ï¼ŒåŠ å…¥ storage è³‡æ–™å¤¾&lt;/li>
&lt;/ol>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># åŸºç¤æ˜ åƒæª”è³‡è¨Š&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FROM ubuntu:latest
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>VOLUME &lt;span style="color:#f92672">[&lt;/span>&lt;span style="color:#e6db74">&amp;#34;/storage&amp;#34;&lt;/span>&lt;span style="color:#f92672">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>.... çœç•¥ ....&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;ol start="2">
&lt;li>å»ºç«‹æ˜ åƒæª”&lt;/li>
&lt;/ol>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>$ docker build -t demo-image:v2 .
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[&lt;/span>+&lt;span style="color:#f92672">]&lt;/span> Building 1.3s &lt;span style="color:#f92672">(&lt;/span>6/6&lt;span style="color:#f92672">)&lt;/span> FINISHED
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">=&lt;/span>&amp;gt; &lt;span style="color:#f92672">[&lt;/span>internal&lt;span style="color:#f92672">]&lt;/span> load build definition from Dockerfile 0.0s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">=&lt;/span>&amp;gt; &lt;span style="color:#f92672">=&lt;/span>&amp;gt; transferring dockerfile: 44B 0.0s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">=&lt;/span>&amp;gt; &lt;span style="color:#f92672">[&lt;/span>internal&lt;span style="color:#f92672">]&lt;/span> load .dockerignore 0.0s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">=&lt;/span>&amp;gt; &lt;span style="color:#f92672">=&lt;/span>&amp;gt; transferring context: 2B 0.0s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">=&lt;/span>&amp;gt; &lt;span style="color:#f92672">[&lt;/span>internal&lt;span style="color:#f92672">]&lt;/span> load metadata &lt;span style="color:#66d9ef">for&lt;/span> docker.io/library/ubuntu:latest 1.2s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">=&lt;/span>&amp;gt; &lt;span style="color:#f92672">[&lt;/span>1/2&lt;span style="color:#f92672">]&lt;/span> FROM docker.io/library/ubuntu:latest@sha256:8ae9bafbb64f63a50caab98fd3a5e37b3eb837a3e0780b78e5218e63193961f9 0.0s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">=&lt;/span>&amp;gt; CACHED &lt;span style="color:#f92672">[&lt;/span>2/2&lt;span style="color:#f92672">]&lt;/span> RUN apt-get update -y &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> apt-get install nginx -y 0.0s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">=&lt;/span>&amp;gt; exporting to image 0.0s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">=&lt;/span>&amp;gt; &lt;span style="color:#f92672">=&lt;/span>&amp;gt; exporting layers 0.0s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">=&lt;/span>&amp;gt; &lt;span style="color:#f92672">=&lt;/span>&amp;gt; writing image sha256:0618bb2685ecfe200d9df4a91380d482031352d0e00cbfdf70fcd063aa8654fa 0.0s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">=&lt;/span>&amp;gt; &lt;span style="color:#f92672">=&lt;/span>&amp;gt; naming to docker.io/library/demo-image:v2&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;ol start="3">
&lt;li>å•Ÿå‹• Containerï¼Œä¸¦åœ¨ /storage å…§æ–°å¢éš¨æ„è³‡æ–™&lt;/li>
&lt;/ol>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>$ docker run -it demo-image:v2 /bin/bash
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>root@4f8712562dfe:/# echo &lt;span style="color:#e6db74">&amp;#34;Hello ian&amp;#34;&lt;/span> &amp;gt; /storage/helloworld.txt
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>root@4f8712562dfe:/# ll /storage
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>total &lt;span style="color:#ae81ff">12&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>drwxr-xr-x &lt;span style="color:#ae81ff">2&lt;/span> root root &lt;span style="color:#ae81ff">4096&lt;/span> Mar &lt;span style="color:#ae81ff">16&lt;/span> 05:39 ./
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>drwxr-xr-x &lt;span style="color:#ae81ff">1&lt;/span> root root &lt;span style="color:#ae81ff">4096&lt;/span> Mar &lt;span style="color:#ae81ff">16&lt;/span> 05:38 ../
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>-rw-r--r-- &lt;span style="color:#ae81ff">1&lt;/span> root root &lt;span style="color:#ae81ff">10&lt;/span> Mar &lt;span style="color:#ae81ff">16&lt;/span> 05:39 helloworld.txt&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;ol start="4">
&lt;li>ä½¿ç”¨ &lt;code>inspect&lt;/code> æŒ‡ä»¤ï¼Œä¾†æ‰¾åˆ° Volume åœ¨æœ¬åœ°ç«¯æ˜ å°„çš„è³‡æ–™å¤¾è·¯å¾‘ï¼Œçœ‹çœ‹è£¡é¢æœ‰æ²’æœ‰æˆ‘å€‘åœ¨ Container è£¡é¢æ–°å¢çš„è³‡æ–™å§&lt;/li>
&lt;/ol>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>$ docker inspect -f &lt;span style="color:#e6db74">&amp;#39;{{.Mounts}}&amp;#39;&lt;/span> 4f8712562dfe
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[{&lt;/span>volume 4fe10ca3f...çœç•¥ /var/lib/docker/volumes/4fe10ca3f234633164d9b3c541893c68db1b4f98806525076a2edd5c1c7863c4/_data /storage local true &lt;span style="color:#f92672">}]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ docker run -it --privileged --pid&lt;span style="color:#f92672">=&lt;/span>host debian nsenter -t &lt;span style="color:#ae81ff">1&lt;/span> -m -u -n -i sh
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>/ &lt;span style="color:#75715e"># cd /var/lib/docker/volumes/4fe10ca3f234633164d9b3c541893c68db1b4f98806525076a2edd5c1c7863c4/_data&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>/var/lib/docker/volumes/4fe10ca3f234633164d9b3c541893c68db1b4f98806525076a2edd5c1c7863c4/_data &lt;span style="color:#75715e"># ls&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>helloworld.txt&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;div class="hx-overflow-x-auto hx-mt-6 hx-flex hx-rounded-lg hx-border hx-py-2 ltr:hx-pr-4 rtl:hx-pl-4 contrast-more:hx-border-current contrast-more:dark:hx-border-current hx-border-orange-100 hx-bg-orange-50 hx-text-orange-800 dark:hx-border-orange-400/30 dark:hx-bg-orange-400/20 dark:hx-text-orange-300">
&lt;div class="ltr:hx-pl-3 ltr:hx-pr-2 rtl:hx-pr-3 rtl:hx-pl-2">&lt;/div>
&lt;div class="hx-w-full hx-min-w-0 hx-leading-7">
&lt;div class="hx-mt-6 hx-leading-7 first:hx-mt-0">&lt;p>mac OS æ‰¾ä¸åˆ° /var/lib/docker/volumesï¼š
ç”±æ–¼ macOS ä¸‹çš„ docker å¯¦éš›æ˜¯åœ¨ vm è£¡åˆå¤šåŠ ä¸€å±¤ï¼Œæ‰€ä»¥æ²’è¾¦æ³•ç›´æ¥è¨ªå• /var/lib/docker/volumesï¼Œå¿…é ˆå…ˆé€éä»¥ä¸‹æŒ‡ä»¤é€²å…¥ VM ä¸­ã€‚&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>docker run -it --privileged --pid&lt;span style="color:#f92672">=&lt;/span>host debian nsenter -t &lt;span style="color:#ae81ff">1&lt;/span> -m -u -n -i sh&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>è©³ç´°å…§å®¹å¯ä»¥åƒè€ƒ &lt;a href="https://stackoverflow.com/questions/38532483/where-is-var-lib-docker-on-mac-os-x" target="_blank" rel="noopener">Where is /var/lib/docker on Mac/OS X&lt;/a>ã€‚&lt;/p>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;br>
&lt;h4>å®¹å™¨èˆ‡å®¹å™¨ä¹‹é–“è³‡æ–™å…±äº«&lt;span class="hx-absolute -hx-mt-20" id="å®¹å™¨èˆ‡å®¹å™¨ä¹‹é–“è³‡æ–™å…±äº«">&lt;/span>
&lt;a href="#%e5%ae%b9%e5%99%a8%e8%88%87%e5%ae%b9%e5%99%a8%e4%b9%8b%e9%96%93%e8%b3%87%e6%96%99%e5%85%b1%e4%ba%ab" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h4>&lt;p>å¦‚ä½•å•Ÿç”¨å®¹å™¨èˆ‡å®¹å™¨ä¹‹é–“çš„è³‡æ–™å…±äº«ï¼Œå¯ä»¥ç”¨ä»¥ä¸‹æ–¹å¼&lt;/p>
&lt;ol>
&lt;li>å…ˆå•Ÿå‹•ç¬¬ä¸€å€‹å®¹å™¨æŒ‡ä»¤å¦‚ä¸‹&lt;/li>
&lt;/ol>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>docker run -it -v /data --name&lt;span style="color:#f92672">=&lt;/span>container1 centos /bin/bash
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[&lt;/span>root@ a0307ce757ca /&lt;span style="color:#f92672">]&lt;/span>&lt;span style="color:#75715e">#&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;ol start="2">
&lt;li>å¦äºŒå€‹å®¹å™¨æŒ‡ä»¤å¦‚ä¸‹&lt;/li>
&lt;/ol>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>docker run -it --volumes-from container1 --name&lt;span style="color:#f92672">=&lt;/span>container2 centos /bin/bash
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[&lt;/span>root@720d57983cd4 /&lt;span style="color:#f92672">]&lt;/span>&lt;span style="color:#75715e">#&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;ul>
&lt;li>&lt;code>--volumes-from&lt;/code> åƒæ•¸æŒ‡å®š container1 çš„è³‡æ–™æœƒèˆ‡ container2 åšå…±äº«ã€‚&lt;/li>
&lt;/ul>
&lt;br>
&lt;ol start="3">
&lt;li>æˆ‘å€‘åœ¨ç¬¬ä¸€å€‹å®¹å™¨ï¼Œé€²å…¥ /data è³‡æ–™å¤¾ï¼Œéš¨æ©Ÿè¼¸å…¥è³‡æ–™&lt;/li>
&lt;/ol>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[&lt;/span>root@a0307ce757ca /&lt;span style="color:#f92672">]&lt;/span>&lt;span style="color:#75715e"># cd /data/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[&lt;/span>root@a0307ce757ca data&lt;span style="color:#f92672">]&lt;/span>&lt;span style="color:#75715e"># echo &amp;#34;ian~&amp;#34; &amp;gt; hello.txt&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;ol start="4">
&lt;li>å†ä¾†çœ‹ä¸€ä¸‹ç¬¬äºŒå€‹å®¹å™¨ /data è³‡æ–™å¤¾ï¼Œæ˜¯å¦æœ‰æˆ‘å€‘åœ¨å®¹å™¨(a0307ce757ca)ç”¢ç”Ÿçš„è³‡æ–™&lt;/li>
&lt;/ol>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[&lt;/span>root@720d57983cd4 /&lt;span style="color:#f92672">]&lt;/span>&lt;span style="color:#75715e"># cat /data/hello.txt&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ian~&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;h3>Network æ¨¡å¼å’Œæ¯”è¼ƒ&lt;span class="hx-absolute -hx-mt-20" id="network-æ¨¡å¼å’Œæ¯”è¼ƒ">&lt;/span>
&lt;a href="#network-%e6%a8%a1%e5%bc%8f%e5%92%8c%e6%af%94%e8%bc%83" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>åœ¨åŸ·è¡Œ &lt;code>docker run&lt;/code> å…¶ä¸­ä¸€å€‹åƒæ•¸æ˜¯ &lt;code>--net&lt;/code> ï¼Œä»–å¯ä»¥è¨­å®š Container è¦ä½¿ç”¨å“ªä¸€ç¨®çš„ç¶²è·¯æ¨¡å¼ï¼Œä»¥ä¸‹åˆ†åˆ¥èªªæ˜é€™äº›ç¶²è·¯æ¨¡å¼&lt;/p>
&lt;ul>
&lt;li>noneï¼šåœ¨åŸ·è¡Œ Container æ™‚ï¼Œç¶²è·¯åŠŸèƒ½æ˜¯é—œé–‰çš„ï¼Œæ‰€ä»¥ç„¡æ³•èˆ‡æ­¤ Container é€£ç·šã€‚&lt;/li>
&lt;li>containerï¼šä½¿ç”¨ç›¸åŒçš„ Network Namespace ï¼Œå‡è¨­ Container 1 çš„ IP æ˜¯ 172.17.0.2ï¼Œé‚£ Container 2 çš„ IP ä¹Ÿæ˜¯ 172.17.0.2ã€‚&lt;/li>
&lt;li>hostï¼šContainer çš„ç¶²è·¯è¨­å®šå’Œå¯¦é«”ä¸»æ©Ÿä½¿ç”¨ç›¸åŒçš„ç¶²è·¯è¨­å®šï¼Œæ‰€ä»¥ Container è£¡é¢ä¹Ÿå¯ä»¥ä¿®æ”¹å¯¦é«”æ©Ÿå™¨çš„ç¶²è·¯è¨­å®šï¼Œå› æ­¤ä½¿ç”¨æ­¤æ¨¡å¼éœ€è¦è€ƒæ…®ç¶²è·¯å®‰å…¨æ€§ä¸Šçš„å•é¡Œã€‚&lt;/li>
&lt;li>bridgeï¼šDocker é è¨­å°±æ˜¯æ­¤ç¶²è·¯æ¨¡å¼ï¼Œé€™å€‹ç¶²è·¯æ¨¡å¼å°±åƒæ˜¯ NAT çš„ç¶²è·¯æ¨¡å¼ï¼Œä¾‹å¦‚å¯¦é«”ä¸»æ©Ÿçš„ IP æ˜¯ 192.168.1.10 å®ƒæœƒå°æ‡‰åˆ° Container è£¡é¢çš„ 172.17.0.2ï¼Œåœ¨å•Ÿå‹• Docker çš„æœå‹™æ™‚æœƒæœ‰ä¸€å€‹ docker0 çš„ç¶²è·¯å¡ä¾†åšæ­¤ç¶²è·¯çš„æ©‹æ¥ã€‚&lt;/li>
&lt;li>overlayï¼šContainer ä¹‹é–“å¯ä»¥åœ¨ä¸åŒçš„å¯¦é«”æ©Ÿå™¨ä¸Šåšé€£ç·šï¼Œä¾‹å¦‚ ï¼¨ ost 1 æœ‰ä¸€å€‹ Container 1 ï¼Œç„¶å¾Œ Host 2 æœ‰ä¸€å€‹ Container 2ï¼ŒContainer 1 å¯ä»¥ç›´æ¥ä½¿ç”¨ overlay çš„ç¶²è·¯æ¨¡å¼å’Œ Container 2 åšç¶²è·¯é€£ç·šã€‚&lt;/li>
&lt;li>macvlanï¼šå¯ä»¥ç›´æ¥åˆ†é…å¯¦é«”ç¶²å¡çš„ MAC address çµ¦ç‰¹å®šçš„ Containerï¼Œè®“ Container é€éå¯¦é«”çš„ç¶²å¡ä½¿ç”¨ç¶²è·¯ã€‚&lt;/li>
&lt;/ul>
&lt;br>
&lt;p>é‚£æˆ‘å€‘å°±ä¾†å¯¦ä½œæ¯ä¸€å€‹ç¶²è·¯æ¨¡å¼å§ï¼&lt;/p>
&lt;h4>none&lt;span class="hx-absolute -hx-mt-20" id="none">&lt;/span>
&lt;a href="#none" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h4>&lt;p>æˆ‘å€‘ä½¿ç”¨ &lt;code>docker run&lt;/code>æŒ‡ä»¤ï¼Œåœ¨å¾Œé¢åŠ å…¥åƒæ•¸ &lt;code>--net=none&lt;/code> ï¼Œæˆ‘å€‘å»ºç«‹ &lt;code>jonlabelle/network-tools&lt;/code> (è£¡é¢æœ‰å¾ˆå¤šç¶²è·¯æ¸¬è©¦å·¥å…·)ã€‚&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>$ docker run -it --net&lt;span style="color:#f92672">=&lt;/span>none jonlabelle/network-tools
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[&lt;/span>docker@network-tools&lt;span style="color:#f92672">]&lt;/span>$ ifconfig
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>lo Link encap:Local Loopback
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> inet addr:127.0.0.1 Mask:255.0.0.0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> .... çœç•¥ ....&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>å¯ä»¥çœ‹åˆ°æˆ‘å€‘ä½¿ç”¨ &lt;code>ifconfig&lt;/code> æŸ¥è©¢ï¼Œåªæœ‰æœ¬åœ°ç«¯çš„ 127.0.0.1 IPï¼Œæˆ‘å€‘åœ¨ä½¿ç”¨ &lt;code>ping&lt;/code> ä¾†æ¸¬è©¦ google ç¶²ç«™å§&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[&lt;/span>docker@network-tools&lt;span style="color:#f92672">]&lt;/span>$ ping www.google.com
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ping: www.google.com: Try again&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;h4>container&lt;span class="hx-absolute -hx-mt-20" id="container">&lt;/span>
&lt;a href="#container" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h4>&lt;p>æˆ‘å€‘å…ˆå•Ÿå‹•ä¸€å€‹åç‚º container1 çš„å®¹å™¨&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>docker run --name container1 -it jonlabelle/network-tools&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;p>å†é–‹å•Ÿå¦ä¸€å€‹ Terminal ä¾†å•Ÿå‹• container2 çš„å®¹å™¨ï¼Œä¸¦è¨­å®šç›¸åŒçš„ Network Namespace&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>docker run --name container2 --net&lt;span style="color:#f92672">=&lt;/span>container:container1 -it jonlabelle/network-tools&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;p>ä¸€æ¨£ä½¿ç”¨ &lt;code>ifconfig&lt;/code> æŸ¥è©¢ï¼Œå¯ä»¥ç™¼ç¾å…©å€‹å®¹å™¨çš„ IP éƒ½æ˜¯ç›¸åŒçš„&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>eth0 Link encap:Ethernet HWaddr 02:42:AC:11:00:02
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> inet addr:172.17.0.2 Bcast:172.17.255.255 Mask:255.255.0.0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> UP BROADCAST RUNNING MULTICAST MTU:1500 Metric:1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> .... çœç•¥ ....&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;h4>host&lt;span class="hx-absolute -hx-mt-20" id="host">&lt;/span>
&lt;a href="#host" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h4>&lt;p>åœ¨åŸ·è¡Œ &lt;code>docker run&lt;/code> æŒ‡ä»¤æ™‚ï¼Œåœ¨å¾Œé¢åŠ å…¥åƒæ•¸ &lt;code>--net=host&lt;/code> ï¼Œä¾†æ¸¬è©¦ host æ¨¡å¼&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>docker run --net&lt;span style="color:#f92672">=&lt;/span>host -it jonlabelle/network-tools&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;p>å¯ä»¥çœ‹åˆ° Container çš„ç¶²è·¯è³‡è¨Šå’Œå¯¦é«”ä¸»æ©Ÿçš„ç¶²è·¯è³‡è¨Šæ˜¯ç›¸åŒçš„çµæœ&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[&lt;/span>docker@network-tools&lt;span style="color:#f92672">]&lt;/span>$ ifconfig
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>br-36a27cab1817 Link encap:Ethernet HWaddr 02:42:20:DF:DB:FD
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> inet addr:172.20.0.1 Bcast:172.20.255.255 Mask:255.255.0.0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> UP BROADCAST MULTICAST MTU:1500 Metric:1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> RX packets:0 errors:0 dropped:0 overruns:0 frame:0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> .... çœç•¥ ....&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;figure>&lt;img src="https://pin-yi.me/docker/docker/host.png"
alt="host ç¶²è·¯æ¨¡å¼" width="500">&lt;figcaption>
&lt;p>host ç¶²è·¯æ¨¡å¼&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;h4>bridge&lt;span class="hx-absolute -hx-mt-20" id="bridge">&lt;/span>
&lt;a href="#bridge" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h4>&lt;p>åœ¨åŸ·è¡Œ &lt;code>docker run&lt;/code> æŒ‡ä»¤æ™‚ï¼Œåœ¨å¾Œé¢åŠ å…¥åƒæ•¸ &lt;code>--net=bridge&lt;/code> ï¼Œä¾†æ¸¬è©¦ bridge æ¨¡å¼&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>docker run --net&lt;span style="color:#f92672">=&lt;/span>bridge -it jonlabelle/network-tools&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;p>docker æœƒæ–°å¢ä¸€å€‹è™›æ“¬ç¶²å¡ä½œç‚ºå®¹å™¨ç¶²è·¯å°å¤–çš„å‡ºå£ï¼Œé è¨­åç¨±ç‚º &lt;code>docker0&lt;/code>ï¼Œdocker0 æœƒè·Ÿæœ¬æ©Ÿçš„å°å¤–ç¶²å¡(åœ–ä¸­çš„ &lt;code>eth0&lt;/code> )ç›¸é€£ï¼Œè—‰æ­¤å–å¾—å°å¤–é€£ç·šçš„èƒ½åŠ›ï¼Œä¹Ÿå› ç‚ºæ¯ä¸€å€‹å®¹å™¨éƒ½æœƒä½¿ç”¨ä¸€å€‹ veth device èˆ‡ docker0 ç›¸é€£ï¼Œæ‰€ä»¥ä¹Ÿå…·å‚™å°å¤–é€£ç·šçš„èƒ½åŠ›ã€‚&lt;/p>
&lt;figure>&lt;img src="https://pin-yi.me/docker/docker/host.png"
alt="bridge ç¶²è·¯æ¨¡å¼" width="600">&lt;figcaption>
&lt;p>bridge ç¶²è·¯æ¨¡å¼&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;h4>overlay&lt;span class="hx-absolute -hx-mt-20" id="overlay">&lt;/span>
&lt;a href="#overlay" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h4>&lt;p>ä¸‹åœ–æ˜¯èªªæ˜ Host1 å¯¦é«”ä¸»æ©Ÿè£¡é¢æœ‰ Container1ï¼Œç„¶å¾Œ Host2 å¯¦é«”ä¸»æ©Ÿè£¡é¢æœ‰ Container2ï¼Œå¯ä»¥é€é Docker overlay æ¨¡å¼å°‡ Container1 å’Œ Container2 é€£æ¥åšæºé€šã€‚å¦å¤–é‚„éœ€è¦ä¸€å€‹ Consol ä¾†å­˜é€£ç·šçš„è³‡æ–™åº«ï¼Œåœ¨ä½¿ç”¨ overlay æ™‚è¦å…ˆåœ¨ Docker åšè¨­å®šï¼Œé€™æ¨£æ‰èƒ½å­˜æ”¾ overlay ç¶²è·¯æ¨¡å¼çš„é€£ç·šè³‡è¨Šã€‚&lt;/p>
&lt;figure>&lt;img src="https://pin-yi.me/docker/docker/overlay.png"
alt="overlay ç¶²è·¯æ¨¡å¼" width="550">&lt;figcaption>
&lt;p>overlay ç¶²è·¯æ¨¡å¼&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;h4>macvlan&lt;span class="hx-absolute -hx-mt-20" id="macvlan">&lt;/span>
&lt;a href="#macvlan" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h4>&lt;p>macvlan çš„åŸç†å°±æ˜¯åœ¨æœ¬æ©Ÿçš„ç¶²å¡ä¸Šè™›æ“¬å‡ºå¾ˆå¤šå€‹å­ç¶²å¡ï¼Œé€šéä¸åŒçš„ MAC ä½ç½®åœ¨æ•¸æ“šéˆè·¯å±¤é€²è¡Œç¶²è·¯è³‡æ–™çš„è½‰ç™¼ã€‚&lt;/p>
&lt;figure>&lt;img src="https://pin-yi.me/docker/docker/macvlan.png"
alt="macvlan ç¶²è·¯æ¨¡å¼" width="450">&lt;figcaption>
&lt;p>macvlan ç¶²è·¯æ¨¡å¼&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;h3>Docker-compose&lt;span class="hx-absolute -hx-mt-20" id="docker-compose">&lt;/span>
&lt;a href="#docker-compose" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>æˆ‘å€‘åœ¨åŸ·è¡Œå¤šå€‹å®¹å™¨æ™‚ï¼Œéœ€è¦é‡è¤‡çš„ä¸‹ &lt;code>run&lt;/code> æŒ‡ä»¤ä¾†åŸ·è¡Œï¼Œä»¥åŠå®¹å™¨èˆ‡å®¹å™¨ä¹‹é–“è¦åšé—œè¯ä¹Ÿè¦è¨˜å¾—æ¯ä¸€å€‹ä¹‹é–“è¦æ€éº¼é€£çµï¼Œæœƒè®Šå¾—å¾ˆéº»ç…©ä¸”ä¸æ˜“ç®¡ç†ï¼Œæ‰€ä»¥æœ‰äº† &lt;code>docker-compose&lt;/code> å¯ä»¥å°‡å¤šå€‹å®¹å™¨çµ„åˆèµ·ä¾†ï¼Œè®Šæˆä¸€å€‹å¼·å¤§çš„åŠŸèƒ½ã€‚&lt;/p>
&lt;p>åªè¦å¯«ä¸€å€‹ &lt;code>docker-compose.yml&lt;/code> æŠŠæ‰€æœ‰æœƒä½¿ç”¨åˆ°çš„ Docker image ä»¥åŠæ¯ä¸€å€‹å®¹å™¨ä¹‹é–“çš„é—œè¯æˆ–æ˜¯ç¶²è·¯çš„è¨­å®šéƒ½å¯«ä¸Šå»ï¼Œæœ€å¾Œå†ä½¿ç”¨ &lt;code>docker-compose up&lt;/code> æŒ‡ä»¤ï¼Œå°±å¯ä»¥æŠŠæ‰€æœ‰çš„å®¹å™¨éƒ½åŸ·è¡Œèµ·ä¾†å›‰ï¼&lt;/p>
&lt;br>
&lt;p>æˆ‘å€‘å°±ç›´æ¥ä¾†å¯¦ä½œæˆ‘å€‘é€™æ¬¡çš„æ¨™é¡Œï¼Œè¦ä½¿ç”¨ docker-compose ä¾†æ•´åˆ PHP MySQL Nginx ç’°å¢ƒã€‚&lt;/p>
&lt;ol>
&lt;li>æˆ‘å€‘å…ˆé–‹å•Ÿä¸€å€‹è³‡æ–™å¤¾ï¼Œå–åå« &lt;code>docker-compose&lt;/code> ï¼Œä¾†æ”¾ç½®æˆ‘å€‘çš„ docker-compose æª”æ¡ˆ&lt;/li>
&lt;li>æ¥è‘—æ–°å¢ &lt;code>docker-compose.yml&lt;/code> æª”æ¡ˆï¼Œè¦æº–å‚™ä¾†æ’°å¯«æˆ‘å€‘çš„è¨­å®šæª”å›‰ï¼ ç”±æ–¼å…§å®¹æœ‰é»é•·ï¼Œæ‰€ä»¥æˆ‘åˆ†æ®µèªªæ˜ï¼Œ(&lt;a href="https://github.com/880831ian/docker-compose-php-mysql-nginx" target="_blank" rel="noopener">é€™é‚Šæœ‰æ”¾å·²ç¶“å¯«å¥½çš„æª”æ¡ˆæ­&lt;/a>)&lt;/li>
&lt;/ol>
&lt;br>
&lt;p>&lt;strong>æª”æ¡ˆç›®éŒ„&lt;/strong>&lt;/p>
&lt;div class="hextra-filetree hx-mt-6 hx-select-none hx-text-sm hx-text-gray-800 dark:hx-text-gray-300 not-prose">
&lt;div class="hx-inline-block hx-rounded-lg hx-border hx-px-4 hx-py-2 dark:hx-border-neutral-800">
&lt;li class="hx-flex hx-list-none">
&lt;span class="hx-inline-flex hx-cursor-default hx-items-center hx-py-1">&lt;svg width=1em xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true">&lt;path stroke-linecap="round" stroke-linejoin="round" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>&lt;/svg>&lt;span class="ltr:hx-ml-1 rtl:hx-mr-1">Docker-compose.yml&lt;/span>
&lt;/span>
&lt;/li>
&lt;li class="hx-group hx-flex hx-list-none hx-flex-col">
&lt;button class="hextra-filetree-folder hx-inline-flex hx-cursor-pointer hx-items-center hx-py-1 hover:hx-opacity-60">
&lt;span data-state="open" class="data-[state=open]:hx-hidden">&lt;svg width=1em xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true">&lt;path stroke-linecap="round" stroke-linejoin="round" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"/>&lt;/svg>&lt;/span>
&lt;span data-state="open" class="data-[state=closed]:hx-hidden">&lt;svg width=1em xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true">&lt;path stroke-linecap="round" stroke-linejoin="round" d="M5 19a2 2 0 01-2-2V7a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1M5 19h14a2 2 0 002-2v-5a2 2 0 00-2-2H9a2 2 0 00-2 2v5a2 2 0 01-2 2z"/>&lt;/svg>&lt;/span>
&lt;span class="ltr:hx-ml-1 rtl:hx-mr-1">docker-volume&lt;/span>
&lt;/button>
&lt;ul data-state="open" class="ltr:hx-pl-5 rtl:hx-pr-5 data-[state=closed]:hx-hidden">
&lt;li class="hx-group hx-flex hx-list-none hx-flex-col">
&lt;button class="hextra-filetree-folder hx-inline-flex hx-cursor-pointer hx-items-center hx-py-1 hover:hx-opacity-60">
&lt;span data-state="open" class="data-[state=open]:hx-hidden">&lt;svg width=1em xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true">&lt;path stroke-linecap="round" stroke-linejoin="round" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"/>&lt;/svg>&lt;/span>
&lt;span data-state="open" class="data-[state=closed]:hx-hidden">&lt;svg width=1em xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true">&lt;path stroke-linecap="round" stroke-linejoin="round" d="M5 19a2 2 0 01-2-2V7a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1M5 19h14a2 2 0 002-2v-5a2 2 0 00-2-2H9a2 2 0 00-2 2v5a2 2 0 01-2 2z"/>&lt;/svg>&lt;/span>
&lt;span class="ltr:hx-ml-1 rtl:hx-mr-1">html&lt;/span>
&lt;/button>
&lt;ul data-state="open" class="ltr:hx-pl-5 rtl:hx-pr-5 data-[state=closed]:hx-hidden">
&lt;li class="hx-flex hx-list-none">
&lt;span class="hx-inline-flex hx-cursor-default hx-items-center hx-py-1">&lt;svg width=1em xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true">&lt;path stroke-linecap="round" stroke-linejoin="round" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>&lt;/svg>&lt;span class="ltr:hx-ml-1 rtl:hx-mr-1">index.php&lt;/span>
&lt;/span>
&lt;/li>
&lt;li class="hx-flex hx-list-none">
&lt;span class="hx-inline-flex hx-cursor-default hx-items-center hx-py-1">&lt;svg width=1em xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true">&lt;path stroke-linecap="round" stroke-linejoin="round" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>&lt;/svg>&lt;span class="ltr:hx-ml-1 rtl:hx-mr-1">info.php&lt;/span>
&lt;/span>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li class="hx-group hx-flex hx-list-none hx-flex-col">
&lt;button class="hextra-filetree-folder hx-inline-flex hx-cursor-pointer hx-items-center hx-py-1 hover:hx-opacity-60">
&lt;span data-state="open" class="data-[state=open]:hx-hidden">&lt;svg width=1em xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true">&lt;path stroke-linecap="round" stroke-linejoin="round" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"/>&lt;/svg>&lt;/span>
&lt;span data-state="open" class="data-[state=closed]:hx-hidden">&lt;svg width=1em xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true">&lt;path stroke-linecap="round" stroke-linejoin="round" d="M5 19a2 2 0 01-2-2V7a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1M5 19h14a2 2 0 002-2v-5a2 2 0 00-2-2H9a2 2 0 00-2 2v5a2 2 0 01-2 2z"/>&lt;/svg>&lt;/span>
&lt;span class="ltr:hx-ml-1 rtl:hx-mr-1">nginx&lt;/span>
&lt;/button>
&lt;ul data-state="open" class="ltr:hx-pl-5 rtl:hx-pr-5 data-[state=closed]:hx-hidden">
&lt;li class="hx-flex hx-list-none">
&lt;span class="hx-inline-flex hx-cursor-default hx-items-center hx-py-1">&lt;svg width=1em xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true">&lt;path stroke-linecap="round" stroke-linejoin="round" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>&lt;/svg>&lt;span class="ltr:hx-ml-1 rtl:hx-mr-1">Dockerfile&lt;/span>
&lt;/span>
&lt;/li>
&lt;li class="hx-flex hx-list-none">
&lt;span class="hx-inline-flex hx-cursor-default hx-items-center hx-py-1">&lt;svg width=1em xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true">&lt;path stroke-linecap="round" stroke-linejoin="round" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>&lt;/svg>&lt;span class="ltr:hx-ml-1 rtl:hx-mr-1">default.conf&lt;/span>
&lt;/span>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li class="hx-group hx-flex hx-list-none hx-flex-col">
&lt;button class="hextra-filetree-folder hx-inline-flex hx-cursor-pointer hx-items-center hx-py-1 hover:hx-opacity-60">
&lt;span data-state="open" class="data-[state=open]:hx-hidden">&lt;svg width=1em xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true">&lt;path stroke-linecap="round" stroke-linejoin="round" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"/>&lt;/svg>&lt;/span>
&lt;span data-state="open" class="data-[state=closed]:hx-hidden">&lt;svg width=1em xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true">&lt;path stroke-linecap="round" stroke-linejoin="round" d="M5 19a2 2 0 01-2-2V7a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1M5 19h14a2 2 0 002-2v-5a2 2 0 00-2-2H9a2 2 0 00-2 2v5a2 2 0 01-2 2z"/>&lt;/svg>&lt;/span>
&lt;span class="ltr:hx-ml-1 rtl:hx-mr-1">php&lt;/span>
&lt;/button>
&lt;ul data-state="open" class="ltr:hx-pl-5 rtl:hx-pr-5 data-[state=closed]:hx-hidden">
&lt;li class="hx-flex hx-list-none">
&lt;span class="hx-inline-flex hx-cursor-default hx-items-center hx-py-1">&lt;svg width=1em xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true">&lt;path stroke-linecap="round" stroke-linejoin="round" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>&lt;/svg>&lt;span class="ltr:hx-ml-1 rtl:hx-mr-1">Dockerfile&lt;/span>
&lt;/span>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/div>
&lt;/div>
&lt;br>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yml" data-lang="yml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">version&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;3.8&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">services&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>... &lt;span style="color:#ae81ff">çœç•¥ ....&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>å¯ä»¥çœ‹åˆ°ä¸€é–‹é ­ï¼Œæœƒå…ˆå¯«ç‰ˆæœ¬ï¼Œé€™é‚Šä»£è¡¨çš„æ˜¯æœƒä½¿ç”¨ 3.8 ç‰ˆæœ¬çš„è¨­å®šæª”ï¼Œè©³ç´°ç‰ˆæœ¬å°ç…§å¯ä»¥åƒè€ƒ &lt;a href="https://docs.docker.com/compose/compose-file/compose-versioning/" target="_blank" rel="noopener">Compose file versions and upgrading&lt;/a>&lt;/p>
&lt;p>services å¯ä»¥è¨­å®šç”¨ä¾†å•Ÿå‹•å¤šçš„å®¹å™¨ï¼Œè£¡é¢æˆ‘å€‘ç¸½å…±æ”¾äº†ä¸‰å€‹å®¹å™¨ï¼Œåˆ†åˆ¥æ˜¯ nginxã€phpã€mysql ã€‚&lt;/p>
&lt;p>é‚£æˆ‘å€‘ä¾†çœ‹çœ‹ nginx è£¡é¢æ”¾äº†ä»€éº¼å§ï¼æˆ‘æœƒä¾ç…§ç¨‹å¼ç¢¼å¾€ä¸‹èªªæ˜ï¼Œæœ‰ä¸æ¸…æ¥šçš„å¯ä»¥åº•ä¸‹ç•™è¨€ï¼&lt;/p>
&lt;br>
&lt;h4>nginx&lt;span class="hx-absolute -hx-mt-20" id="nginx">&lt;/span>
&lt;a href="#nginx" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h4>&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yml" data-lang="yml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">nginx&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">build&lt;/span>: &lt;span style="color:#ae81ff">./nginx/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">container_name&lt;/span>: &lt;span style="color:#ae81ff">nginx&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ports&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">7777&lt;/span>:&lt;span style="color:#ae81ff">80&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">./docker-volume/log/:/var/log/nginx/&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>nginx çš„ &lt;code>build&lt;/code> å°±æ˜¯è¦åŸ·è¡Œé€™å€‹ nginx å®¹å™¨çš„æ˜ åƒæª”ï¼Œé‚„è¨˜å¾—æˆ‘å€‘ä¹Ÿå¯ä»¥ä½¿ç”¨ Dockerfile ä¾†æ’°å¯«æ˜ åƒæª”æ¡ˆå—ï¼?&lt;/p>
&lt;p>ç”±æ–¼æˆ‘å€‘é‚„è¦è¨­å®šå…¶ä»–å…§å®¹ï¼Œæ‰€ä»¥ç‰¹åˆ¥å¦å¤–æ‹‰ä¸€å€‹ nginx è³‡æ–™å¤¾ä¾†æ”¾ç½®ï¼Œè£¡é¢æ”¾äº†å…©å€‹æª”æ¡ˆï¼Œåˆ†åˆ¥æ˜¯ Dockerfileã€default.confã€‚&lt;/p>
&lt;p>Dockerfile æª”æ¡ˆè£¡é¢æœƒä½¿ç”¨ nginx ç‰ˆæœ¬ 1.20 ï¼Œä¸¦å°‡ default.conf è¤‡è£½åˆ°å®¹å™¨çš„ /etc/nginx/conf.d/default.conf ä¾†å–ä»£è¨­å®šã€‚&lt;/p>
&lt;p>ä»¥åŠæˆ‘å€‘ä½¿ç”¨ &lt;code>ports&lt;/code> å°‡å®¹å™¨ 80 Port æŒ‡å‘æœ¬æ©Ÿ 7777 Port ï¼Œæ ¼å¼æ˜¯ &lt;code>æœ¬æ©Ÿ Port : å®¹å™¨ Port&lt;/code>ï¼Œ&lt;/p>
&lt;p>å†ä½¿ç”¨ &lt;code>volumes&lt;/code> ä¾†è¨­å®šæˆ‘å€‘ nginx å®¹å™¨ &lt;code>log&lt;/code> è³‡æ–™å¤¾æ˜ å°„åˆ°æœ¬æ©Ÿçš„ &lt;code>./docker-volume/log/&lt;/code> è³‡æ–™å¤¾ã€‚&lt;/p>
&lt;br>
&lt;h4>php&lt;span class="hx-absolute -hx-mt-20" id="php">&lt;/span>
&lt;a href="#php" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h4>&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yml" data-lang="yml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">php&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">build&lt;/span>: &lt;span style="color:#ae81ff">./php/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">container_name&lt;/span>: &lt;span style="color:#ae81ff">php&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">expose&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">9000&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">./docker-volume/html/:/var/www/html/&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>php çš„ &lt;code>build&lt;/code> æ˜¯è¦åŸ·è¡Œé€™å€‹ php å®¹å™¨çš„æ˜ åƒæª”ï¼Œç”±æ–¼æˆ‘å€‘é‚„è¦è¨­å®šå…¶ä»–å…§å®¹ï¼Œæ‰€ä»¥ç‰¹åˆ¥å¦å¤–æ‹‰ä¸€å€‹ php è³‡æ–™å¤¾ä¾†æ”¾ç½® Dokcerfileã€‚&lt;/p>
&lt;p>Dockerfile æª”æ¡ˆè£¡é¢æœƒä½¿ç”¨ php ç‰ˆæœ¬ 7.4-fpmï¼Œä¸¦ä¸”åœ¨å®¹å™¨åŸ·è¡Œ &lt;code>docker-php-ext-install&lt;/code>ã€&lt;code>mysqli&lt;/code>ã€‚&lt;/p>
&lt;p>ä¸¦å°‡ Port 9000 ç™¼ä½ˆæ–¼æœ¬æ©Ÿï¼Œå†ä½¿ç”¨ &lt;code>volumes&lt;/code> ä¾†è¨­å®š &lt;code>/var/www/html&lt;/code> ç¶²ç«™æ ¹ç›®éŒ„æ˜ å°„åˆ°æœ¬æ©Ÿçš„ &lt;code>./docker-volume/html/&lt;/code> è³‡æ–™å¤¾ã€‚&lt;/p>
&lt;br>
&lt;h4>mysql&lt;span class="hx-absolute -hx-mt-20" id="mysql">&lt;/span>
&lt;a href="#mysql" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h4>&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yml" data-lang="yml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">mysql&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">image&lt;/span>: &lt;span style="color:#ae81ff">mysql:8.0.28&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">container_name&lt;/span>: &lt;span style="color:#ae81ff">mysql&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">./docker-volume/mysql/:/var/lib/mysql&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">environment&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">MYSQL_ROOT_PASSWORD&lt;/span>: &lt;span style="color:#ae81ff">secret&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">MYSQL_DATABASE&lt;/span>: &lt;span style="color:#ae81ff">mydb&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">MYSQL_USER&lt;/span>: &lt;span style="color:#ae81ff">myuser&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">MYSQL_PASSWORD&lt;/span>: &lt;span style="color:#ae81ff">password&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>mysql ä½¿ç”¨çš„æ˜ åƒæª”æ˜¯ mysql ç‰ˆæœ¬æ˜¯ 8.0.28ï¼Œæˆ‘å€‘ç‚ºäº†è¦ä¿ç•™è³‡æ–™åº«çš„è³‡æ–™ï¼Œæ‰€ä»¥å°‡å®¹å™¨çš„ &lt;code>/var/lib/mysql&lt;/code> æ˜ å°„åˆ°æœ¬åœ°ç«¯ &lt;code>./docker-volume/mysql&lt;/code> è³‡æ–™å¤¾ã€‚&lt;/p>
&lt;p>æœ€å¾Œçš„ç’°å¢ƒè®Šæ•¸ï¼Œè¨­å®š root å¸³è™Ÿçš„ç™»å…¥å¯†ç¢¼ï¼Œä»¥åŠè¦ä½¿ç”¨çš„è³‡æ–™åº«ã€ä½¿ç”¨è€…çš„å¸³è™Ÿã€ä½¿ç”¨è€…çš„å¯†ç¢¼ã€‚&lt;/p>
&lt;br>
&lt;p>æœ€å¾Œåœ¨ä¸Šé¢çš„ (&lt;a href="https://github.com/880831ian/docker-compose-php-mysql-nginx" target="_blank" rel="noopener">é€™é‚Šæœ‰æ”¾å·²ç¶“å¯«å¥½çš„æª”æ¡ˆæ­&lt;/a>) è£¡é¢é‚„æœ‰å¤šä¸€å€‹ docker-volume/html çš„è³‡æ–™å¤¾ï¼Œå°±æ˜¯æˆ‘å€‘å‰›å‰›æ˜ å°„åˆ°æœ¬åœ°ç«¯çš„è³‡æ–™å¤¾ï¼Œè³‡æ–™å¤¾å…§å·²ç¶“æ”¾æœ‰é€£ç·šæ¸¬è©¦çš„æª”æ¡ˆï¼Œè¼¸å…¥ç¶²å€ &lt;code>http://127.0.0.1:7777/index.php&lt;/code>ï¼Œå¦‚æœé–‹å•Ÿå¾Œæœ‰é¡¯ç¤ºä¸‹æ–¹ç•«é¢ï¼Œå°±ä»£è¡¨æˆ‘å€‘æˆåŠŸç”¨ docker-compose å°‡ PHP MySQL Nginx æ•´åˆå†ä¸€èµ·å›‰ï¼&lt;/p>
&lt;figure>&lt;img src="https://pin-yi.me/docker/docker/localhost-7777.png"
alt="æ¸¬è©¦æ˜¯å¦æˆåŠŸç”¨ docker-compose æ•´åˆ PHP MySQL Nginx" width="450">&lt;figcaption>
&lt;p>æ¸¬è©¦æ˜¯å¦æˆåŠŸç”¨ docker-compose æ•´åˆ PHP MySQL Nginx&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;h2>åƒè€ƒè³‡æ–™&lt;span class="hx-absolute -hx-mt-20" id="åƒè€ƒè³‡æ–™">&lt;/span>
&lt;a href="#%e5%8f%83%e8%80%83%e8%b3%87%e6%96%99" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>Docker å®˜ç¶²ï¼š&lt;a href="https://docs.docker.com/get-started/" target="_blank" rel="noopener">https://docs.docker.com/get-started/&lt;/a>&lt;/p>
&lt;p>ä»€éº¼æ˜¯ Dockerï¼Ÿï¼š&lt;a href="https://aws.amazon.com/tw/docker/" target="_blank" rel="noopener">https://aws.amazon.com/tw/docker/&lt;/a>&lt;/p>
&lt;p>Dockerï¼ï¼å¾å…¥é–€åˆ°å¯¦è¸ï¼š&lt;a href="https://philipzheng.gitbook.io/docker_practice/#yuan-chu-chu-ji-can-kao-zi-liao" target="_blank" rel="noopener">https://philipzheng.gitbook.io/docker_practice/#yuan-chu-chu-ji-can-kao-zi-liao&lt;/a>&lt;/p>
&lt;p>Dockerfile å»ºç«‹è‡ªè¨‚æ˜ åƒæª” â€” æ¶èµ·ç¶²ç«™å¿«é€Ÿåˆç°¡å–®ï¼ˆä¸€ï¼‰ï¼š&lt;a href="https://medium.com/@jackercleaninglab/dockerfile-%E5%BB%BA%E7%AB%8B%E8%87%AA%E8%A8%82%E6%98%A0%E5%83%8F%E6%AA%94-%E6%9E%B6%E8%B5%B7%E7%B6%B2%E7%AB%99%E5%BF%AB%E9%80%9F%E5%8F%88%E7%B0%A1%E5%96%AE-%E4%B8%80-22b2743f97b9" target="_blank" rel="noopener">https://medium.com/@jackercleaninglab/dockerfile-%E5%BB%BA%E7%AB%8B%E8%87%AA%E8%A8%82%E6%98%A0%E5%83%8F%E6%AA%94-%E6%9E%B6%E8%B5%B7%E7%B6%B2%E7%AB%99%E5%BF%AB%E9%80%9F%E5%8F%88%E7%B0%A1%E5%96%AE-%E4%B8%80-22b2743f97b9&lt;/a>&lt;/p>
&lt;p>ç”¨ 30 å¤©ä¾†ä»‹ç´¹å’Œä½¿ç”¨ Dockerï¼š&lt;a href="https://ithelp.ithome.com.tw/users/20103456/ironman/1320" target="_blank" rel="noopener">https://ithelp.ithome.com.tw/users/20103456/ironman/1320&lt;/a>&lt;/p>
&lt;p>Docker ç¶²è·¯ç°¡ä»‹ï¼š&lt;a href="https://godleon.github.io/blog/Docker/docker-network-overview/" target="_blank" rel="noopener">https://godleon.github.io/blog/Docker/docker-network-overview/&lt;/a>&lt;/p>
&lt;p>Docker-compose Giving static IP in network mode : bridgeï¼š&lt;a href="https://stackoverflow.com/questions/61949319/docker-compose-giving-static-ip-in-network-mode-bridge" target="_blank" rel="noopener">https://stackoverflow.com/questions/61949319/docker-compose-giving-static-ip-in-network-mode-bridge&lt;/a>&lt;/p></description></item></channel></rss>