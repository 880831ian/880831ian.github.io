<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>PIN-YI â€“ Google Cloud Platform</title><link>https://pin-yi.me/blog/gcp/</link><description>Recent content in Google Cloud Platform on PIN-YI</description><generator>Hugo -- gohugo.io</generator><language>zh-tw</language><atom:link href="https://pin-yi.me/blog/gcp/index.xml" rel="self" type="application/rss+xml"/><item><title>å¦‚ä½•éæ¿¾ GCP LOGï¼Œæ¸›å°‘ Cloud Logging API çš„èŠ±è²»</title><link>https://pin-yi.me/blog/gcp/gcp-log-reduce-cloud-logging-api/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pin-yi.me/blog/gcp/gcp-log-reduce-cloud-logging-api/</guid><description>
&lt;p>ç•¶æˆ‘å€‘ä½¿ç”¨ GCP çš„ Cloud Logging æœå‹™ä¾†æŸ¥çœ‹ Log æ™‚ï¼Œæœ‰æ™‚å€™æœƒæœ‰ä¸€äº›æˆ‘å€‘ä¸éœ€è¦é¡¯ç¤ºå‡ºä¾†çš„ï¼Œæˆ–æ˜¯å¾ä¾†éƒ½ä¸æœƒå»æŸ¥è©¢çš„ Logï¼Œå†è€…æ˜¯ GCP æœ¬èº«çš„éŒ¯èª¤å°è‡´å¤§é‡å™´éŒ¯çš„ Log ï¼Œé€™äº› Log éƒ½æœƒå°è‡´ Cloud Logging çš„è²»ç”¨å¢åŠ ã€‚&lt;/p>
&lt;h2>ä»‹ç´¹ Cloud Logging&lt;span class="absolute -mt-20" id="ä»‹ç´¹-cloud-logging">&lt;/span>
&lt;a href="#%e4%bb%8b%e7%b4%b9-cloud-logging" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>å…ˆä¾†ç°¡å–®èªªä¸€ä¸‹ Cloud Logging é€™é …æœå‹™çš„åŸºæœ¬æ¶æ§‹ï¼Œè«‹çœ‹åœ–ï¼š&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/gcp/gcp-log-reduce-cloud-logging-api/overview.png"
alt="Cloud Logging åŸºæœ¬æ¶æ§‹" width="800">&lt;figcaption>
&lt;p>Cloud Logging åŸºæœ¬æ¶æ§‹&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;p>å¯ä»¥çœ‹åˆ° Logs Data æœƒé€é API å†ç¶“é _Default log sink (router) å­˜åˆ°ç›¸æ‡‰å‘½åçš„ log bucket (é è¨­é…ç½®)ï¼Œåœ–ä¸­ _Required ä»¥åŠ _Default çš„ log sink éƒ½æ˜¯ GCP è‡ªå‹•å‰µå»ºçš„æ¥æ”¶å™¨ï¼Œä¸‹é¢ç°¡è¿°ä¸€ä¸‹å®ƒå€‘çš„å€åˆ¥ï¼š&lt;/p>
&lt;br>
&lt;h3>_Required æ—¥èªŒå„²å­˜æ¡¶&lt;span class="absolute -mt-20" id="_required-æ—¥èªŒå„²å­˜æ¡¶">&lt;/span>
&lt;a href="#_required-%e6%97%a5%e8%aa%8c%e5%84%b2%e5%ad%98%e6%a1%b6" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>Cloud Logging æœƒå°‡ä»¥ä¸‹é¡å‹çš„ Log å­˜åˆ° _Required å„²å­˜æ¡¶&lt;/p>
&lt;ol>
&lt;li>
&lt;p>ç®¡ç†å“¡æ´»å‹•å¯©æ ¸ Log&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç³»çµ±äº‹ä»¶å¯©æ ¸ Log&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Access Transparency Log&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>Cloud Logging æœƒå°‡ _Required å„²å­˜æ¡¶ Log ä¿ç•™ 400 å¤©ï¼Œç„¡æ³•èª¿æ•´è©²æœŸé™ï¼Œä¸”ç„¡æ³•ä¿®æ”¹æˆ–åˆªé™¤ _Required å„²å­˜æ¡¶ï¼Œä¹Ÿæ²’è¾¦æ³•åœç”¨ _Required log sink æ¥å—å™¨è·¯ç”±åˆ° _Required å„²å­˜æ¡¶çš„è¨­å®šã€‚&lt;/p>
&lt;br>
&lt;h3>_Default æ—¥èªŒå„²å­˜æ¡¶&lt;span class="absolute -mt-20" id="_default-æ—¥èªŒå„²å­˜æ¡¶">&lt;/span>
&lt;a href="#_default-%e6%97%a5%e8%aa%8c%e5%84%b2%e5%ad%98%e6%a1%b6" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>åªè¦ä¸æ˜¯å­˜åœ¨ _Required æ—¥èªŒå„²å­˜æ¡¶çš„ Log å°±æœƒé€é _Default log sink æ¥å—å™¨è·¯ç”±åˆ° _Default å„²å­˜æ¡¶ã€‚&lt;/p>
&lt;p>é™¤éæœ‰å¦å¤–é…ç½®è‡ªå®šç¾©è¨­å®šï¼Œ å¦å‰‡ _Default æ—¥èªŒå„²å­˜æ¡¶ Log åªæœƒä¿ç•™ 30 å¤©ï¼Œä¹Ÿä¸€æ¨£ç„¡æ³•åˆªé™¤ _Default æ—¥èªŒå„²å­˜æ¡¶ã€‚æ­¤å¤– Cloud Logging çš„è²»ç”¨æ˜¯ä»¥å­˜åœ¨ _Default æ—¥èªŒå„²å­˜æ¡¶ä¾†è¨ˆç®—ã€‚&lt;/p>
&lt;br>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>åŠŸèƒ½&lt;/th>
&lt;th>åƒ¹æ ¼&lt;/th>
&lt;th>æ¯æœˆå…è²»é¡åº¦&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Logging æå–&lt;/td>
&lt;td>æå–çš„ Log $0.5/GiB&lt;/td>
&lt;td>æ¯å€‹é …ç›®å‰ 50 GiB&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Logging å„²å­˜&lt;/td>
&lt;td>ä¿ç•™è¶…é 30 å¤©çš„ Logï¼Œæ¯æœˆæ¯ GiB $0.01&lt;/td>
&lt;td>åœ¨é»˜èªä¿ç•™æœŸé™çš„ Log ä¸æœƒæœ‰é¡å¤–å„²å­˜è²»ç”¨&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>æŸ¥çœ‹è©²å°ˆæ¡ˆä½¿ç”¨çš„ Cloud Logging API è²»ç”¨ï¼š&lt;a href="https://console.cloud.google.com/apis/api/logging.googleapis.com/cost" target="_blank" rel="noopener">https://console.cloud.google.com/apis/api/logging.googleapis.com/cost&lt;/a>&lt;/p>
&lt;br>
&lt;h2>éæ¿¾ Log&lt;span class="absolute -mt-20" id="éæ¿¾-log">&lt;/span>
&lt;a href="#%e9%81%8e%e6%bf%be-log" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>é‚£ç¾åœ¨çŸ¥é“ Cloud Logging çš„æ¶æ§‹ï¼Œé‚£ç•¶æˆ‘å€‘é‡åˆ°éœ€è¦éæ¿¾ Log æ™‚ï¼Œæˆ‘å€‘å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ­¥é©Ÿä¾†éæ¿¾ä»¥ç¯€çœ Cloud Logging API è²»ç”¨ï¼š&lt;/p>
&lt;h3>ç¯„ä¾‹èªªæ˜&lt;span class="absolute -mt-20" id="ç¯„ä¾‹èªªæ˜">&lt;/span>
&lt;a href="#%e7%af%84%e4%be%8b%e8%aa%aa%e6%98%8e" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>é€™æ¬¡ç¯„ä¾‹æ˜¯ google åœ¨ 2023/07/06 æ‰€ç™¼ä½ˆçš„ Service Healthï¼Œç•¶ GKE ç‰ˆæœ¬å¤§æ–¼ 1.24 ä»¥ä¸Šï¼Œå°±æœƒå™´&lt;/p>
&lt;ol>
&lt;li>
&lt;p>Failed to get record: decoder: failed to decode payload: EOF&lt;/p>
&lt;/li>
&lt;li>
&lt;p>cannot parse &amp;lsquo;0609 05:31:59.491654&amp;rsquo; after %L&lt;/p>
&lt;/li>
&lt;li>
&lt;p>invalid time format %m%d %H:%M:%S.%L%z for &amp;lsquo;0609 05:31:59.490647&amp;rsquo;&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>é€™ä¸‰ç¨®é¡å‹çš„éŒ¯èª¤ Logï¼Œåœ¨ç­‰å¾…å®˜æ–¹ä¿®å¾©å‰ï¼Œå®˜æ–¹çš„å»ºè­°æ˜¯å…ˆå°‡ä»–çµ¦éæ¿¾æ‰ï¼Œé¿å…ä¸€ç›´åˆ·å™´éŒ¢ â”(Â´Ğ´`)â”Œ&lt;/p>
&lt;p>é™„ä¸Šç•¶æ™‚çš„ Service Health é€£çµï¼š&lt;a href="https://status.cloud.google.com/incidents/y5XvpyBXFhsphSt4DfiE" target="_blank" rel="noopener">https://status.cloud.google.com/incidents/y5XvpyBXFhsphSt4DfiE&lt;/a>&lt;/p>
&lt;br>
&lt;p>æˆ‘å€‘åœ¨ä¸Šé¢æ¶æ§‹åœ–æœ‰èªªåˆ°ï¼ŒLog æœƒé€é log sink è·¯ç”±åˆ° bucketï¼Œæ‰€ä»¥æˆ‘å€‘è¦å°‡éæ¿¾æ¢ä»¶åŠ åœ¨ log router ä¸Šï¼š&lt;/p>
&lt;div class="steps ml-4 mb-12 border-l border-gray-200 pl-6 dark:border-neutral-800 [counter-reset:step]">
&lt;h3>é¸æ“‡ Log Router&lt;span class="absolute -mt-20" id="é¸æ“‡-log-router">&lt;/span>
&lt;a href="#%e9%81%b8%e6%93%87-log-router" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/gcp/gcp-log-reduce-cloud-logging-api/1.png"
alt="é¸æ“‡ Log Router" width="550">&lt;figcaption>
&lt;p>é¸æ“‡ Log Router&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;h3>é¸æ“‡ Log Router Sinks&lt;span class="absolute -mt-20" id="é¸æ“‡-log-router-sinks">&lt;/span>
&lt;a href="#%e9%81%b8%e6%93%87-log-router-sinks" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>é¸æ“‡ _Default çš„ Log Router Sinksï¼Œé»é¸å³é‚ŠæŒ‰éˆ•çš„ Edit Sink&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/gcp/gcp-log-reduce-cloud-logging-api/2.png"
alt="é¸æ“‡ _Default çš„ Log Router Sinks">&lt;figcaption>
&lt;p>é¸æ“‡ _Default çš„ Log Router Sinks&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;h3>è¨­å®š Sink details&lt;span class="absolute -mt-20" id="è¨­å®š-sink-details">&lt;/span>
&lt;a href="#%e8%a8%ad%e5%ae%9a-sink-details" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>ç¬¬ä¸€å€‹æ˜¯ detailsï¼Œå¯ä»¥è¼¸å…¥èªªæ˜ï¼Œé€™é‚Šè¼¸å…¥ï¼šgoogle æœ‰ bug æœƒå™´å¤§é‡çš„æ„å¤– LOGï¼Œæ€•è²»ç”¨é£†é«˜ï¼Œå…ˆç”¨å®˜æ–¹å»ºè­°çš„ä¾†éæ¿¾ LOGï¼Œè©³ç´°å¯ä»¥çœ‹ï¼š &lt;a href="https://status.cloud.google.com/incidents/y5XvpyBXFhsphSt4DfiE" target="_blank" rel="noopener">https://status.cloud.google.com/incidents/y5XvpyBXFhsphSt4DfiE&lt;/a>&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/gcp/gcp-log-reduce-cloud-logging-api/3.png"
alt="è¼¸å…¥ Sink details èªªæ˜">&lt;figcaption>
&lt;p>è¼¸å…¥ Sink details èªªæ˜&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;h3>é¸æ“‡ Sink Service è·Ÿ Bucket&lt;span class="absolute -mt-20" id="é¸æ“‡-sink-service-è·Ÿ-bucket">&lt;/span>
&lt;a href="#%e9%81%b8%e6%93%87-sink-service-%e8%b7%9f-bucket" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>æ¥è‘— sink æœå‹™é¸æ“‡ Logging bucketï¼Œä»¥åŠå°æ‡‰å„²å­˜çš„ log bucket (é€™é‚ŠåŸºæœ¬ä¸Šéƒ½æ˜¯é è¨­)&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/gcp/gcp-log-reduce-cloud-logging-api/4.png"
alt="é¸æ“‡ Logging bucket">&lt;figcaption>
&lt;p>é¸æ“‡ Logging bucket&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;h3>è¨­å®š include Log&lt;span class="absolute -mt-20" id="è¨­å®š-include-log">&lt;/span>
&lt;a href="#%e8%a8%ad%e5%ae%9a-include-log" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>é¸æ“‡é‚£äº›å¯ä»¥è¢« include åˆ° sink æ¥æ”¶å™¨çš„ LOG æ ¼å¼ (é€™é‚ŠåŸºæœ¬ä¸Šéƒ½æ˜¯é è¨­)&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/gcp/gcp-log-reduce-cloud-logging-api/5.png"
alt="é è¨­çš„ LOG æ ¼å¼">&lt;figcaption>
&lt;p>é è¨­çš„ LOG æ ¼å¼&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;h3>è¨­å®š filter Log&lt;span class="absolute -mt-20" id="è¨­å®š-filter-log">&lt;/span>
&lt;a href="#%e8%a8%ad%e5%ae%9a-filter-log" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>é€™é‚Šå°±æ˜¯æˆ‘å€‘è¦è¼¸å…¥éæ¿¾çš„åœ°æ–¹ï¼Œå…ˆé»æ“Š ADD EXCLUSIONï¼Œè¼¸å…¥éæ¿¾çš„åç¨±ï¼Œä»¥åŠéæ¿¾çš„å…§å®¹æ ¼å¼ï¼Œæˆ‘å€‘è¼¸å…¥ google åœ¨ Service Health æ‰€æä¾›çš„æ ¼å¼ï¼Œæœ€å¾ŒæŒ‰ä¸‹ UPDATE SINK&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/gcp/gcp-log-reduce-cloud-logging-api/6.png"
alt="æ–°å¢è¦éæ¿¾çš„ LOG æ ¼å¼">&lt;figcaption>
&lt;p>æ–°å¢è¦éæ¿¾çš„ LOG æ ¼å¼&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;h3>è¨­å®šå®Œæˆ&lt;span class="absolute -mt-20" id="è¨­å®šå®Œæˆ">&lt;/span>
&lt;a href="#%e8%a8%ad%e5%ae%9a%e5%ae%8c%e6%88%90" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>ç­‰å¾…æ›´æ–°å®Œæˆï¼Œå°±å¯ä»¥çœ‹åˆ°æˆ‘å€‘å·²ç¶“åœ¨æ¥æ”¶å™¨ä¸Šè¨­å®šå¥½éæ¿¾æ¢ä»¶å›‰ï½&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/gcp/gcp-log-reduce-cloud-logging-api/7.png"
alt="æŸ¥çœ‹è©³ç´°æ¥æ”¶å™¨è¨­å®š">&lt;figcaption>
&lt;p>æŸ¥çœ‹è©³ç´°æ¥æ”¶å™¨è¨­å®š&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;h3>æª¢æŸ¥ Log æ˜¯å¦éæ¿¾æˆåŠŸ&lt;span class="absolute -mt-20" id="æª¢æŸ¥-log-æ˜¯å¦éæ¿¾æˆåŠŸ">&lt;/span>
&lt;a href="#%e6%aa%a2%e6%9f%a5-log-%e6%98%af%e5%90%a6%e9%81%8e%e6%bf%be%e6%88%90%e5%8a%9f" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>æœ€å¾Œå†æª¢æŸ¥ä¸€ä¸‹ Log æ˜¯ä¸æ˜¯æ²’æœ‰æ”¶åˆ°è©²éŒ¯èª¤çš„ Log å…§å®¹&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/gcp/gcp-log-reduce-cloud-logging-api/8.png"
alt="æª¢æŸ¥ LOG æ˜¯å¦ä¸æœƒå†å‡ºç¾">&lt;figcaption>
&lt;p>æª¢æŸ¥ LOG æ˜¯å¦ä¸æœƒå†å‡ºç¾&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;/div>
&lt;h2>åƒè€ƒè³‡æ–™&lt;span class="absolute -mt-20" id="åƒè€ƒè³‡æ–™">&lt;/span>
&lt;a href="#%e5%8f%83%e8%80%83%e8%b3%87%e6%96%99" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>Routing and storage overview &lt;a href="https://cloud.google.com/logging/docs/routing/overview" target="_blank" rel="noopener">https://cloud.google.com/logging/docs/routing/overview&lt;/a>&lt;/p></description></item><item><title>Google Kubernetes Engine CronJob æœƒæœ‰çŸ­æš«æ™‚é–“æ²’æœ‰åŸ·è¡Œ Job</title><link>https://pin-yi.me/blog/gcp/gke-cronjob-not-working/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pin-yi.me/blog/gcp/gke-cronjob-not-working/</guid><description>
&lt;p>å‰é™£å­å…¬å¸å»ºç«‹åœ¨ Google Kubernetes Engine å¢é›†ä¸Šçš„ CronJob æœå‹™æœƒæœ‰çŸ­æš«æ™‚é–“æ²’æœ‰åŸ·è¡Œ Jobã€‚å…ˆå‰æƒ…æè¦ä¸€ä¸‹ï¼Œæ­¤ CronJob çš„è¨­å®šæ˜¯æ¯åˆ†é˜éƒ½æœƒåŸ·è¡Œ (åœ–ä¸€)ï¼Œæ‰€ä»¥ç†ç•¶ä¾†èªª Log æ‡‰è©²è¦å¯ä»¥çœ‹åˆ°æ¯åˆ†é˜éƒ½æœ‰æ­¤ CronJob çš„ç´€éŒ„ï¼Œä½†æœ‰æ™‚å€™æœƒç™¼ç”Ÿ CronJob çŸ­æš«æ™‚é–“éƒ½æ²’æœ‰åŸ·è¡Œçš„ç‹€æ³ï¼Œæ‰¾äº†ä¸€é™£å­éƒ½æ²’æœ‰æ‰¾åˆ°åŸå› ï¼Œæœ€å¾Œé–‹æ”¯æ´å–®è«‹ Google é‚£é‚Šå”åŠ©æŸ¥çœ‹ï¼Œçµ‚æ–¼æ‰¾åˆ°åŸå› æ‹‰ ğŸ˜ã€‚é‚£å°±è·Ÿæˆ‘ä¸€èµ·çœ‹ä¸€ä¸‹ç™¼ç”Ÿçš„éç¨‹ï¼Œä»¥åŠ Google å¹«æˆ‘å€‘æ‰¾åˆ°çš„åŸå› ï¼Œä»¥åŠè¦å¦‚ä½•è§£æ±ºç­‰ç­‰ï½&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/gcp/gke-cronjob-not-working/1.png"
alt="(åœ–ä¸€) CronJob schedule æ™‚é–“ç‚ºæ¯åˆ†é˜åŸ·è¡Œ" width="600">&lt;figcaption>
&lt;p>(åœ–ä¸€) CronJob schedule æ™‚é–“ç‚ºæ¯åˆ†é˜åŸ·è¡Œ&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;h2>å•é¡Œç™¼ç”Ÿä»¥åŠå•é¡ŒåŸå› &lt;span class="absolute -mt-20" id="å•é¡Œç™¼ç”Ÿä»¥åŠå•é¡ŒåŸå› ">&lt;/span>
&lt;a href="#%e5%95%8f%e9%a1%8c%e7%99%bc%e7%94%9f%e4%bb%a5%e5%8f%8a%e5%95%8f%e9%a1%8c%e5%8e%9f%e5%9b%a0" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>æˆ‘å€‘ä½¿ç”¨ Google Cloud Platform è£¡é¢çš„è¨˜éŒ„åŠŸèƒ½ï¼Œå¯ä»¥çœ‹åˆ° (åœ–äºŒ)ï¼Œåœ¨æ¯åˆ†é˜åŸ·è¡Œçš„ Log ä¸­ï¼Œæœ‰çŸ­æš«æ™‚é–“æ²’æœ‰åŸ·è¡Œ Jobï¼Œä½†é€™å€‹æ™‚é–“é™¤äº† CronJob ä»¥å¤–ï¼Œå…¶ä»–çš„æœå‹™éƒ½æ˜¯å¥½çš„ã€‚&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/gcp/gke-cronjob-not-working/2.png"
alt="(åœ–äºŒ) Google Cloud Platform è¨˜éŒ„æœ‰çŸ­æš«æ²’æœ‰åŸ·è¡Œ" width="700">&lt;figcaption>
&lt;p>(åœ–äºŒ) Google Cloud Platform è¨˜éŒ„æœ‰çŸ­æš«æ²’æœ‰åŸ·è¡Œ&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;p>æ‰¾äº†ä¸€é™£å­éƒ½æ²’æœ‰æ‰¾åˆ°åŸå› ï¼Œæ–¼æ˜¯æˆ‘å€‘é–‹æ”¯æ´å–®è«‹ Google é‚£é‚Šå”åŠ©æŸ¥çœ‹ï¼ŒGoogle é‚£é‚Šæ‰¾äº†ä¸€é™£å­å¾Œçµ‚æ–¼æ‰¾åˆ°åŸå› æ‹‰ï¼ï¼ï¼æˆ‘å€‘ä¸€èµ·ä¾†çœ‹çœ‹å§ (åœ–ä¸‰)&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/gcp/gke-cronjob-not-working/3.png"
alt="(åœ–ä¸‰) Google æ”¯æ´å–®å›è¦†" width="700">&lt;figcaption>
&lt;p>(åœ–ä¸‰) Google æ”¯æ´å–®å›è¦†&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;p>å°±å¦‚åŒ Google æ‰€èªªï¼Œä½¿ç”¨æä¾›çš„æŒ‡ä»¤åƒæ•¸ä¾†æŸ¥è©¢ï¼Œå¢é›†åœ¨è©²æ™‚æ®µæœ‰ç™¼ç”Ÿ master control plane çš„å‡ç´šï¼Œå¦‚ (åœ–å››)ï¼Œå†åŠ ä¸Šæˆ‘å€‘å»ºçš„é€™å€‹ cluster æ˜¯ä½¿ç”¨ zonal cluster (åœ–äº”)ï¼Œæ‰€ä»¥å¢é›†åªæœ‰ä¸€å€‹ control planeï¼Œç•¶ control plane åœ¨æ›´æ–°æ™‚ï¼Œæœƒç„¡æ³•éƒ¨ç½²æ–°çš„ workloadï¼Œå°è‡´è©² CronJob æ²’æœ‰åŸ·è¡Œ Jobã€‚åƒè€ƒè³‡æ–™ [1]&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/gcp/gke-cronjob-not-working/4.png"
alt="(åœ–å››) ç™¼ç”Ÿ master control plane çš„å‡ç´š" width="700">&lt;figcaption>
&lt;p>(åœ–å››) ç™¼ç”Ÿ master control plane çš„å‡ç´š&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;figure>&lt;img src="https://pin-yi.me/gcp/gke-cronjob-not-working/5.png"
alt="(åœ–äº”) æœ‰å•é¡Œçš„å¢é›†ä½ç½®é¡å‹" width="450">&lt;figcaption>
&lt;p>(åœ–äº”) æœ‰å•é¡Œçš„å¢é›†ä½ç½®é¡å‹&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;p>Google çš„å»ºè­°æ˜¯å¯ä»¥è€ƒæ…®ä½¿ç”¨å¦ä¸€å€‹ regional clusterï¼Œè®“ master node åœ¨æ›´æ–°æ™‚ä¸æœƒåªåœ¨å–®ä¸€åœ°å€ï¼Œæˆ–æ˜¯ä¸€æ¨£ä½¿ç”¨èˆŠçš„ zonal clusterï¼Œé€éè¨­å®š Maintenance window æˆ–è€… Maintenance exclusions ä¾†é™ä½æœå‹™å—åˆ° workload çš„å½±éŸ¿ã€‚åƒè€ƒè³‡æ–™ [2]&lt;/p>
&lt;br>
&lt;div class="overflow-x-auto mt-6 flex rounded-lg border py-2 ltr:pr-4 rtl:pl-4 contrast-more:border-current contrast-more:dark:border-current border-orange-100 bg-orange-50 text-orange-800 dark:border-orange-400/30 dark:bg-orange-400/20 dark:text-orange-300">
&lt;div class="ltr:pl-3 ltr:pr-2 rtl:pr-3 rtl:pl-2">&lt;/div>
&lt;div class="w-full min-w-0 leading-7">
&lt;div class="mt-6 leading-7 first:mt-0">
&lt;ol>
&lt;li>
&lt;p>å°±ç®—æŠŠ node_pool è£¡é¢çš„è‡ªå‹•å‡ç´šçµ¦åœæ‰ï¼Œä¹Ÿæ²’æœ‰è¾¦æ³•è§£æ±ºæ­¤å•é¡Œï¼å› ç‚ºæ­¤ master control plane (ä¹Ÿå°±æ˜¯ master node) çš„å‡ç´šï¼Œä¸æ˜¯ worker node çš„ node pool å‡ç´šï¼Œæ˜¯ç”± GKE è² è²¬ç¶­è­·çš„ï¼Œæ‰€ä»¥ä»–å€‘æœƒå®šæœŸå‡ç´š control planeï¼Œä¹Ÿæ²’è¾¦æ³•åœæ­¢æ­¤é¡çš„å‡ç´šã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>è‹¥å·²ç¶“å»ºç«‹å¥½ zonal cluster å¾Œï¼Œæƒ³è¦æ”¹æˆ regional cluster ï¼Œæ˜¯æ²’æœ‰è¾¦æ³•ä½¿ç”¨ä¿®æ”¹çš„æ–¹å¼ï¼Œä¸€å®šåªèƒ½é‡å»º clusterï¼Œæ‰€ä»¥å¤§å®¶åœ¨å»ºç«‹æ™‚è¦æ³¨æ„ï½&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;br>
&lt;h2>è§£æ±ºå•é¡Œ&lt;span class="absolute -mt-20" id="è§£æ±ºå•é¡Œ">&lt;/span>
&lt;a href="#%e8%a7%a3%e6%b1%ba%e5%95%8f%e9%a1%8c" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>æœ€å¾Œæˆ‘å€‘é¸æ“‡å°‡å¢é›†çµ¦æ•´å€‹é‡å»ºï¼Œä¾†ç¢ºä¿ CronJob ä¸æœƒæœ‰æ²’æœ‰åŸ·è¡Œåˆ°çš„ç‹€æ³ç™¼ç”Ÿï¼Œé‡å»ºå¢é›†è·Ÿæ¬æœå‹™çš„éç¨‹å¾ˆè¾›è‹¦çš„ ğŸ˜° å¸Œæœ›å¤§å®¶ä¸è¦ç™¼ç”Ÿ QQï¼Œæœ€å¾Œæˆ‘å€‘ä¾†çœ‹ä¸€ä¸‹é‡å»ºå®Œå¾Œï¼Œåœ¨ master control plane æ›´æ–°çš„æ™‚å€™ï¼Œé‚„æœƒä¸æœƒæœ‰ CronJob æ²’æœ‰åŸ·è¡Œçš„æƒ…æ³ç™¼ç”Ÿã€‚&lt;/p>
&lt;br>
&lt;p>æ–°å¢é›†ä½¿ç”¨ regional cluster ä¾†å»ºç«‹ï¼Œåœ¨ 2/1 ä¹Ÿæœ‰ master control plane çš„å‡ç´šã€‚ (åœ–å…­)&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/gcp/gke-cronjob-not-working/6.png"
alt="(åœ–å…­) ç™¼ç”Ÿ master control plane çš„å‡ç´š" width="700">&lt;figcaption>
&lt;p>(åœ–å…­) ç™¼ç”Ÿ master control plane çš„å‡ç´š&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;p>æŸ¥çœ‹ CronJob åŸ·è¡Œçš„ç´€éŒ„å¯ä»¥ç™¼ç¾ä¸¦æ²’æœ‰ Job æ²’æœ‰åŸ·è¡Œçš„æƒ…æ³ç™¼ç”Ÿã€‚ (åœ–ä¸ƒ)&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/gcp/gke-cronjob-not-working/7.png"
alt="(åœ–ä¸ƒ) å¢é›†ä½ç½®é¡å‹" width="700">&lt;figcaption>
&lt;p>(åœ–ä¸ƒ) å¢é›†ä½ç½®é¡å‹&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;figure>&lt;img src="https://pin-yi.me/gcp/gke-cronjob-not-working/8.png"
alt="(åœ–å…«) æ–°å¢é›†ä½ç½®é¡å‹" width="450">&lt;figcaption>
&lt;p>(åœ–å…«) æ–°å¢é›†ä½ç½®é¡å‹&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;h2>åƒè€ƒè³‡æ–™&lt;span class="absolute -mt-20" id="åƒè€ƒè³‡æ–™">&lt;/span>
&lt;a href="#%e5%8f%83%e8%80%83%e8%b3%87%e6%96%99" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>[1] Standard cluster upgradesï¼š&lt;a href="https://cloud.google.com/kubernetes-engine/docs/concepts/cluster-upgrades" target="_blank" rel="noopener">https://cloud.google.com/kubernetes-engine/docs/concepts/cluster-upgrades&lt;/a>&lt;/p>
&lt;p>[2] maintenance-windows-and-exclusionsï¼š&lt;a href="https://cloud.google.com/kubernetes-engine/docs/concepts/maintenance-windows-and-exclusions" target="_blank" rel="noopener">https://cloud.google.com/kubernetes-engine/docs/concepts/maintenance-windows-and-exclusions&lt;/a>&lt;/p></description></item></channel></rss>