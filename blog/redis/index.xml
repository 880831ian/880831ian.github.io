<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>PIN-YI â€“ Redis</title><link>https://pin-yi.me/blog/redis/</link><description>Recent content in Redis on PIN-YI</description><generator>Hugo -- gohugo.io</generator><language>zh-tw</language><atom:link href="https://pin-yi.me/blog/redis/index.xml" rel="self" type="application/rss+xml"/><item><title>ç”¨ HAProxy å° Redis åšè² è¼‰å¹³è¡¡ (Redis Sentinelã€Docker-compose)</title><link>https://pin-yi.me/blog/redis/redis-sentinel-docker-compose-haproxy/</link><pubDate>Fri, 22 Apr 2022 00:00:00 +0000</pubDate><guid>https://pin-yi.me/blog/redis/redis-sentinel-docker-compose-haproxy/</guid><description>
&lt;p>å‰æƒ…æè¦ï¼šæœ¬ç¯‡æ˜¯ &lt;a href="../redis-sentinel-docker-compose">Redis å“¨å…µæ¨¡å¼ (Sentinel) æ­é… Docker-compose å¯¦ä½œ
&lt;/a> çš„å¾ŒçºŒæ–‡ç« ï¼Œä¸»è¦æœƒå„ªåŒ–åŸæœ¬çš„ç¨‹å¼ç¢¼ï¼Œä¸¦åŠ ä¸Š HAProxy ä¾†åšè² è¼‰å¹³è¡¡ï¼&lt;/p>
&lt;h2>ä»€éº¼æ˜¯ HAProxy ä»¥åŠè² è¼‰å‡è¡¡ ?&lt;span class="hx:absolute hx:-mt-20" id="ä»€éº¼æ˜¯-haproxy-ä»¥åŠè² è¼‰å‡è¡¡-">&lt;/span>
&lt;a href="#%e4%bb%80%e9%ba%bc%e6%98%af-haproxy-%e4%bb%a5%e5%8f%8a%e8%b2%a0%e8%bc%89%e5%9d%87%e8%a1%a1-" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>HAProxy æ˜¯ä¸€å€‹ä½¿ç”¨ C èªè¨€ç·¨å¯«çš„è‡ªç”±åŠé–‹æ”¾åŸå§‹ç¢¼è»Ÿé«”ï¼Œå…¶æä¾›é«˜å¯ç”¨æ€§ã€è² è¼‰å‡è¡¡ï¼Œä»¥åŠåŸºæ–¼ TCP å’Œ HTTP çš„æ‡‰ç”¨ç¨‹å¼ä»£ç†ã€‚&lt;/p>
&lt;p>è² è¼‰å¹³è¡¡ (Load Balance)ï¼š&lt;/p>
&lt;p>ç¾åœ¨å¾ˆå¤šç¶²è·¯æœå‹™éƒ½éœ€è¦æœå‹™å¤§é‡ä½¿ç”¨è€…ï¼Œä»¥å‰å¯ä»¥ç ¸éŒ¢æ“´å……æ©Ÿå™¨ç¡¬é«”è¨­æ–½ï¼Œä½†éš¨è‘—ç¶²è·¯æœå‹™çš„ç”¨é‡æš´å¢ï¼Œå¢åŠ ä¼ºæœå™¨ç¡¬é«”è¨­å‚™å·²ç¶“ç„¡æ³•è§£æ±ºå•é¡Œã€‚&lt;/p>
&lt;p>ç‚ºäº†å¯ä»¥æ“´å……æœå‹™ï¼Œè² è¼‰å¹³è¡¡æˆç‚ºä¸»æµçš„æŠ€è¡“ï¼Œé€™å¹¾å¹´é›–ç„¶é›²ç«¯èˆ‡åˆ†æ•£å¼å„²å­˜é‹ç®—æŠ€è¡“ç«ç´…ï¼Œé™¤éæœ‰ç‰¹åˆ¥çš„ä½¿ç”¨éœ€æ±‚ï¼Œä¸ç„¶åœ¨æŠ€è¡“ä¸Šè² è¼‰å‡è¡¡ç®—æ˜¯æ¯”è¼ƒå®¹æ˜“é”æˆèˆ‡æŒæ¡çš„æŠ€è¡“ã€‚&lt;/p>
&lt;p>è² è¼‰å¹³è¡¡é™¤äº†åˆ†æµèƒ½åŠ›ä¹‹å¤–ï¼Œæœ‰å¦ä¸€å€‹å¾ˆå¤§çš„å¥½è™•å°±æ˜¯å¯ä»¥æä¾› High Availabilityï¼Œä¹Ÿå°±æ˜¯å‚³èªªä¸­çš„ HA æ¶æ§‹ï¼Œå¥½è®“ä½ ä¸€å°æ©Ÿå™¨æ›äº†å…¶ä»–ä¼ºæœå™¨å¯ä»¥ç¹¼çºŒæœå‹™ï¼Œé™ä½æ–·ç·šç‡ã€‚&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/redis/redis-sentinel-docker-compose-haproxy/haproxy.webp"
alt="HAProxy èˆ‡ Reids Sentinel ç¤ºæ„åœ– selcukusta/redis-sentinel-with-haproxy " width="700">&lt;figcaption>
&lt;p>HAProxy èˆ‡ Reids Sentinel ç¤ºæ„åœ– &lt;a href="https://github.com/selcukusta/redis-sentinel-with-haproxy"target="_blank" rel="noopener">selcukusta/redis-sentinel-with-haproxy&lt;svg class="hx:inline hx:rtl:rotate-270 hx:align-baseline" height="1em" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
&lt;path d="m9.1716 7.7574h7.0711m0 0v7.0711m0-7.0711-8.4853 8.4853" stroke-linecap="round" stroke-linejoin="round"/>
&lt;/svg>&lt;/a>&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;h2>å¯¦ä½œ&lt;span class="hx:absolute hx:-mt-20" id="å¯¦ä½œ">&lt;/span>
&lt;a href="#%e5%af%a6%e4%bd%9c" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>é‚£æ¥ä¸‹ä¾†æœƒä½¿ç”¨ Docker-compose å¯¦ä½œ Redis å“¨å…µæ¨¡å¼ + HAProxyï¼Œ&lt;a href="https://github.com/880831ian/docker-compose-redis-sentinel-haproxy"target="_blank" rel="noopener">ç¯„ä¾‹ç¨‹å¼é€£çµ é»æˆ‘&lt;svg class="hx:inline hx:rtl:rotate-270 hx:align-baseline" height="1em" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
&lt;path d="m9.1716 7.7574h7.0711m0 0v7.0711m0-7.0711-8.4853 8.4853" stroke-linecap="round" stroke-linejoin="round"/>
&lt;/svg>&lt;/a> ğŸ˜˜&lt;/p>
&lt;p>ç‰ˆæœ¬è³‡è¨Š&lt;/p>
&lt;ul>
&lt;li>macOSï¼š11.6&lt;/li>
&lt;li>Dockerï¼šDocker version 20.10.12, build e91ed57&lt;/li>
&lt;li>Nginxï¼š1.20&lt;/li>
&lt;li>PHPï¼š7.4-fpm&lt;/li>
&lt;li>Redisï¼š6.2.6&lt;/li>
&lt;li>HAProxyï¼šHAProxy version 2.5.5-384c5c5 2022/03/14 - &lt;a href="https://haproxy.org/"target="_blank" rel="noopener">https://haproxy.org/&lt;svg class="hx:inline hx:rtl:rotate-270 hx:align-baseline" height="1em" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
&lt;path d="m9.1716 7.7574h7.0711m0 0v7.0711m0-7.0711-8.4853 8.4853" stroke-linecap="round" stroke-linejoin="round"/>
&lt;/svg>&lt;/a>&lt;/li>
&lt;/ul>
&lt;br>
&lt;h3>æª”æ¡ˆçµæ§‹&lt;span class="hx:absolute hx:-mt-20" id="æª”æ¡ˆçµæ§‹">&lt;/span>
&lt;a href="#%e6%aa%94%e6%a1%88%e7%b5%90%e6%a7%8b" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;pre>&lt;code>.
â”œâ”€â”€ Docker-compose.yaml
â”œâ”€â”€ docker-volume
â”‚Â Â  â”œâ”€â”€ haproxy
â”‚Â Â  â”‚Â Â  â””â”€â”€ haproxy.cfg
â”‚Â Â  â”œâ”€â”€ nginx
â”‚Â Â  â”‚Â Â  â””â”€â”€ nginx.conf
â”‚Â Â  â”œâ”€â”€ php
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ info.php
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ r.php
â”‚Â Â  â”‚Â Â  â””â”€â”€ rw.php
â”‚Â Â  â””â”€â”€ redis
â”‚Â Â  â”œâ”€â”€ redis.conf
â”‚Â Â  â”œâ”€â”€ redis1
â”‚Â Â  â”œâ”€â”€ redis2
â”‚Â Â  â””â”€â”€ redis3
â”œâ”€â”€ php
â”‚Â Â  â””â”€â”€ Dockerfile
â”œâ”€â”€ redis.sh
â””â”€â”€ sentinel
â”œâ”€â”€ Docker-compose.yaml
â”œâ”€â”€ sentinel1
â”‚Â Â  â””â”€â”€ sentinel.conf
â”œâ”€â”€ sentinel2
â”‚Â Â  â””â”€â”€ sentinel.conf
â””â”€â”€ sentinel3
â””â”€â”€ sentinel.conf&lt;/code>&lt;/pre>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;p>é€™æ˜¯ä¸»è¦çš„çµæ§‹ï¼Œç°¡å–®èªªæ˜ä¸€ä¸‹ï¼š&lt;/p>
&lt;ul>
&lt;li>Docker-compose.yamlï¼šæœƒæ”¾ç½®è¦ç”¢ç”Ÿçš„ Nginxã€PHPã€redis1ã€redis2ã€redis3 å®¹å™¨è¨­å®šæª”ã€‚&lt;/li>
&lt;li>docker-volume/haproxy/haproxy.cfgï¼šhaproxy çš„è¨­å®šæª”ã€‚&lt;/li>
&lt;li>docker-volume/nginx/nginx.confï¼šnginx çš„è¨­å®šæª”ã€‚&lt;/li>
&lt;li>docker-volume/php/(r.phpã€rw.php)ï¼šæ¸¬è©¦ç”¨æª”æ¡ˆã€‚&lt;/li>
&lt;li>docker-volume/redis/redis.confï¼šredis çš„è¨­å®šæª”ã€‚&lt;/li>
&lt;li>docker-volume/redis/(redis1ã€redis2ã€redis3)ï¼šæ”¾ redis çš„è³‡æ–™ã€‚&lt;/li>
&lt;li>php/Dokcerfileï¼šå› ç‚ºåœ¨ php è¦ä½¿ç”¨ redis éœ€è¦å¤šå®‰è£ä¸€äº›è¨­å®šï¼Œæ‰€ä»¥ç”¨ Dockerfile å¦å¤–å¯« PHP çš„æ˜ åƒæª”ã€‚&lt;/li>
&lt;li>redis.shï¼šæ˜¯æˆ‘å¦å¤–å¤šå¯«çš„è…³æœ¬ï¼Œå¯ä»¥æŸ¥çœ‹ç›¸å°æ‡‰çš„è§’è‰²ã€‚&lt;/li>
&lt;li>sentinel/Docker-compose.yamlï¼šæœƒæ”¾ç½®è¦ç”¢ç”Ÿçš„ haproxyã€sentinel1ã€sentinel2ã€sentinel3 çš„å®¹å™¨è¨­å®šæª”ã€‚&lt;/li>
&lt;li>sentinel/(sentinel1ã€sentinel2ã€sentinel3)/.confï¼šå“¨å…µçš„è¨­å®šæª”ã€‚&lt;/li>
&lt;/ul>
&lt;br>
&lt;p>é‚£æˆ‘å€‘å°±ä¾ç…§å®‰è£çš„è¨­å®šé–‹å§‹èªªæ˜ï¼š&lt;/p>
&lt;h3>Docker-compose.yaml&lt;span class="hx:absolute hx:-mt-20" id="docker-composeyaml">&lt;/span>
&lt;a href="#docker-composeyaml" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yml" data-lang="yml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">version&lt;/span>: &lt;span style="color:#e6db74">&amp;#39;3.8&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">services&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">nginx&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">image&lt;/span>: &lt;span style="color:#ae81ff">nginx:1.20&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">container_name&lt;/span>: &lt;span style="color:#ae81ff">nginx&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">networks&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">HAProxy_Redis&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ports&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#e6db74">&amp;#34;8888:80&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">./docker-volume/nginx/:/etc/nginx/conf.d/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">./log/nginx/:/var/log/nginx/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">environment&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">TZ=Asia/Taipei&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">php&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">build&lt;/span>: &lt;span style="color:#ae81ff">./php&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">container_name&lt;/span>: &lt;span style="color:#ae81ff">php&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">networks&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">HAProxy_Redis&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">expose&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">9000&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">./docker-volume/php/:/var/www/html&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">redis1&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">image&lt;/span>: &lt;span style="color:#ae81ff">redis&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">container_name&lt;/span>: &lt;span style="color:#ae81ff">redis1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">command&lt;/span>: &lt;span style="color:#ae81ff">redis-server /usr/local/etc/redis/redis.conf --appendonly yes&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">./docker-volume/redis/redis1/:/data&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">./docker-volume/redis/:/usr/local/etc/redis/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">./log/redis1:/var/log/redis/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">environment&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">TZ=Asia/Taipei&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">networks&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">HAProxy_Redis&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ipv4_address&lt;/span>: &lt;span style="color:#ae81ff">172.20.0.11&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ports&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">6379&lt;/span>:&lt;span style="color:#ae81ff">6379&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">redis2&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">image&lt;/span>: &lt;span style="color:#ae81ff">redis&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">container_name&lt;/span>: &lt;span style="color:#ae81ff">redis2&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">command&lt;/span>: &lt;span style="color:#ae81ff">redis-server /usr/local/etc/redis/redis.conf --slaveof redis1 6379 --appendonly yes&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">./docker-volume/redis/redis2/:/data&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">./docker-volume/redis/:/usr/local/etc/redis/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">./log/redis2:/var/log/redis/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">environment&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">TZ=Asia/Taipei&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">networks&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">HAProxy_Redis&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ipv4_address&lt;/span>: &lt;span style="color:#ae81ff">172.20.0.12&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ports&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">6380&lt;/span>:&lt;span style="color:#ae81ff">6379&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">depends_on&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">redis1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">redis3&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">image&lt;/span>: &lt;span style="color:#ae81ff">redis&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">container_name&lt;/span>: &lt;span style="color:#ae81ff">redis3&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">command&lt;/span>: &lt;span style="color:#ae81ff">redis-server /usr/local/etc/redis/redis.conf --slaveof redis1 6379 --appendonly yes&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">./docker-volume/redis/redis3/:/data&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">./docker-volume/redis/:/usr/local/etc/redis/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">./log/redis3:/var/log/redis/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">environment&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">TZ=Asia/Taipei&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">networks&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">HAProxy_Redis&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ipv4_address&lt;/span>: &lt;span style="color:#ae81ff">172.20.0.13&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ports&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">6381&lt;/span>:&lt;span style="color:#ae81ff">6379&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">depends_on&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">redis1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">redis2&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">networks&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">HAProxy_Redis&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">driver&lt;/span>: &lt;span style="color:#ae81ff">bridge&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">HAProxy_Redis&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ipam&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">config&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">subnet&lt;/span>: &lt;span style="color:#ae81ff">172.20.0.0&lt;/span>&lt;span style="color:#ae81ff">/16&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">gateway&lt;/span>: &lt;span style="color:#ae81ff">172.20.0.1&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>ä¸€æ¨£è©³ç´°çš„ Docker è¨­å®šèªªæ˜ï¼Œå¯ä»¥åƒè€ƒ &lt;a href="../../docker/docker">Docker ä»‹ç´¹&lt;/a> å…§æœ‰è©³ç´°è¨­å®šèªªæ˜ã€‚å…¶ä»–æ¯”è¼ƒç‰¹åˆ¥çš„åœ°æ–¹æ˜¯ï¼š&lt;/p>
&lt;ul>
&lt;li>å¹«æ¯ä¸€å€‹å®¹å™¨éƒ½è¨­å®šå¥½ IP ï¼Œæ–¹ä¾¿å¾ŒçºŒæ¸¬è©¦ä½¿ç”¨ã€‚&lt;/li>
&lt;li>æœ‰æ›è¼‰ log ç›®éŒ„ï¼Œå¯ä»¥å°‡æˆ‘å€‘è¨­å®šå¥½çš„ log åšæ”¶é›†ã€‚&lt;/li>
&lt;li>å‘ˆä¸Šï¼Œæœ‰åŠ å…¥ environment æ™‚å€ï¼Œé€™æ¨£åœ¨çœ‹ log çš„æ™‚å€™æ‰çŸ¥é“æ­£ç¢ºæ™‚é–“ã€‚&lt;/li>
&lt;/ul>
&lt;br>
&lt;h3>docker-volume/haproxy/haproxy.cfg&lt;span class="hx:absolute hx:-mt-20" id="docker-volumehaproxyhaproxycfg">&lt;/span>
&lt;a href="#docker-volumehaproxyhaproxycfg" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-cfg" data-lang="cfg">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">global&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">log stdout format raw local0 info&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">defaults&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">mode http # é»˜èªæ¨¡å¼ { tcp | http | health }ï¼Œtcp æ˜¯4å±¤ï¼Œhttp æ˜¯7å±¤ï¼Œhealth åªæœƒè¿”å› OK&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">timeout client 10s # å®¢æˆ¶ç«¯è¶…æ™‚&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">timeout connect 5s # é€£æ¥è¶…æ™‚&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">timeout server 10s # ä¼ºæœå™¨è¶…æ™‚&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">timeout http-request 10s&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">log global&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">listen admin_status&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">bind 0.0.0.0:8404&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">mode http&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">stats enable&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">stats uri /redis&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">stats realm Global\ statistics&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">stats refresh 1s&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">listen rw-redis # åˆ¤æ–·æ˜¯å¦ç‚º master ä¸¦å¯è®€å¯å¯«&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">bind 0.0.0.0:16379&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">mode tcp&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">balance roundrobin&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">option tcp-check # redis å¥åº·æ£€æŸ¥ï¼Œç¢ºä¿æ˜¯ master&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">tcp-check connect&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">tcp-check send PING\r\n&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">tcp-check expect string +PONG&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">tcp-check send info\ replication\r\n&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">tcp-check expect string role:master&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">tcp-check send QUIT\r\n&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">tcp-check expect string +OK&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">server redis1 redis1:6379 check inter 2000&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">server redis2 redis2:6379 check inter 2000&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">server redis3 redis3:6379 check inter 2000&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">listen r-redis # åˆ¤æ–·æ˜¯å¦ç‚º masterã€slave ä¸¦å¯è®€&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">bind 0.0.0.0:16380&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">mode tcp&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">balance roundrobin&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">server redis1 redis1:6379 check inter 2000&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">server redis2 redis2:6379 check inter 2000&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">server redis3 redis3:6379 check inter 2000&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>é€™è£¡æ˜¯æœ¬ç« çš„é‡é»ï¼Œæˆ‘å€‘æœƒåœ¨é€™é‚Šè¨­å®šå¥½ haproxyï¼Œè©³ç´°èªªæ˜è«‹çœ‹ï¼š&lt;/p>
&lt;p>defaultsï¼š
ä¸€äº›åˆå§‹å€¼ï¼Œåƒæ˜¯ mode æˆ‘å€‘é è¨­ httpï¼Œå®ƒä¸»è¦æœ‰ä¸‰ç¨®æ¨¡å¼ { tcp | http | health }ï¼Œtcp æ˜¯4å±¤ï¼Œhttp æ˜¯7å±¤ï¼Œhealth åªæœƒè¿”å› OKï¼Œä»¥åŠå®¢æˆ¶ç«¯ã€é€£æ¥ã€ä¼ºæœå™¨ã€http è«‹æ±‚è¶…æ™‚æ™‚é–“è¨­å®šã€‚&lt;/p>
&lt;p>listen admin_statusï¼š&lt;/p>
&lt;ul>
&lt;li>bindï¼šæˆ‘å€‘è¦é–‹å•Ÿ HAProxy ç›£æ§å¹³å°çš„ portã€‚&lt;/li>
&lt;li>modeï¼šæ¨¡å¼ï¼Œæˆ‘å€‘ä½¿ç”¨ http æ¨¡å¼ã€‚&lt;/li>
&lt;li>stats ï¼šæ˜¯å¦è¦å•Ÿå‹•å¹³å°ã€‚&lt;/li>
&lt;li>stats uriï¼šå¹³å°ç¶²å€ï¼Œæˆ‘å€‘ä½¿ç”¨ redisã€‚&lt;/li>
&lt;li>stats refreshï¼šå¹³å°è‡ªå‹•æ›´æ–°æ™‚é–“ï¼Œæˆ‘å€‘è¨­å®š 1 ç§’ã€‚&lt;/li>
&lt;/ul>
&lt;p>listen rw-redisï¼š&lt;/p>
&lt;ul>
&lt;li>bind ï¼šrw ä½¿ç”¨ 16379 Port ä¾†ç•¶è¼¸å‡ºã€‚&lt;/li>
&lt;li>balanceï¼šä½¿ç”¨è² è¼‰å¹³è¡¡ã€‚&lt;/li>
&lt;/ul>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;pre>&lt;code>option tcp-check # redis å¥åº·æ£€æŸ¥ï¼Œç¢ºä¿æ˜¯ master
tcp-check connect
tcp-check send PING\r\n
tcp-check expect string &amp;#43;PONG
tcp-check send info\ replication\r\n
tcp-check expect string role:master
tcp-check send QUIT\r\n
tcp-check expect string &amp;#43;OK&lt;/code>&lt;/pre>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>ä¸Šé¢é€™äº›æ˜¯ç”¨ä¾†åˆ¤æ–·è§’è‰²æ˜¯ä¸æ˜¯ masterã€‚&lt;/p>
&lt;p>æœ€å¾Œæ”¾æˆ‘å€‘ 3 å€‹ redis æœå‹™ï¼š&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;pre>&lt;code> server redis1 redis1:6379 check inter 2000
server redis2 redis2:6379 check inter 2000
server redis3 redis3:6379 check inter 2000&lt;/code>&lt;/pre>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;ul>
&lt;li>checkï¼šé–‹å•Ÿå¥åº·åµæ¸¬ã€‚&lt;/li>
&lt;li>interï¼šåƒæ•¸æ›´æ”¹æª¢æŸ¥é–“éš”ï¼Œé è¨­æ˜¯ 2 ç§’ã€‚&lt;/li>
&lt;/ul>
&lt;br>
&lt;h3>docker-volume/nginx/nginx.conf&lt;span class="hx:absolute hx:-mt-20" id="docker-volumenginxnginxconf">&lt;/span>
&lt;a href="#docker-volumenginxnginxconf" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;pre>&lt;code>server {
listen 80;
server_name default_server;
return 404;
}
server {
listen 80;
server_name test.com;
index index.php index.html;
error_log /var/log/nginx/error.log warn;
access_log /var/log/nginx/access.log;
root /var/www/html;
location / {
try_files $uri $uri/ /index.php?$query_string;
}
location ~ \.php$ {
fastcgi_pass php:9000;
fastcgi_index index.php;
include fastcgi_params;
fastcgi_param SCRIPT_FILENAME /var/www/html$fastcgi_script_name;
}
}&lt;/code>&lt;/pre>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>Nginx è¨­å®šæª”æ¡ˆã€‚&lt;/p>
&lt;br>
&lt;h3>docker-volume/php/rw.php&lt;span class="hx:absolute hx:-mt-20" id="docker-volumephprwphp">&lt;/span>
&lt;a href="#docker-volumephprwphp" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-php" data-lang="php">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;lt;?&lt;/span>&lt;span style="color:#a6e22e">php&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$redis &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">new&lt;/span> &lt;span style="color:#a6e22e">Redis&lt;/span>();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$redis&lt;span style="color:#f92672">-&amp;gt;&lt;/span>&lt;span style="color:#a6e22e">connect&lt;/span>(&lt;span style="color:#e6db74">&amp;#39;172.20.0.20&amp;#39;&lt;/span>, &lt;span style="color:#ae81ff">16379&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$r &lt;span style="color:#f92672">=&lt;/span> $redis&lt;span style="color:#f92672">-&amp;gt;&lt;/span>&lt;span style="color:#a6e22e">info&lt;/span>();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">echo&lt;/span> $r[&lt;span style="color:#e6db74">&amp;#39;run_id&amp;#39;&lt;/span>] &lt;span style="color:#f92672">.&lt;/span> &lt;span style="color:#e6db74">&amp;#39;&amp;lt;br&amp;gt;&amp;#39;&lt;/span> &lt;span style="color:#f92672">.&lt;/span> $r[&lt;span style="color:#e6db74">&amp;#39;role&amp;#39;&lt;/span>] &lt;span style="color:#f92672">.&lt;/span> &lt;span style="color:#e6db74">&amp;#39;&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;&amp;#39;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">echo&lt;/span> &lt;span style="color:#e6db74">&amp;#39;&amp;lt;pre&amp;gt;&amp;#39;&lt;/span>, &lt;span style="color:#a6e22e">print_r&lt;/span>($r), &lt;span style="color:#e6db74">&amp;#39;&amp;lt;/pre&amp;gt;&amp;#39;&lt;/span>;&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>è·Ÿ &lt;code>r.php&lt;/code> æ¯”è¼ƒä¸åŒçš„æ˜¯ï¼Œä½¿ç”¨ 16379 Portï¼Œæˆ‘å€‘åœ¨ &lt;code>haproxy.cfg&lt;/code> æœ‰è¨­å®š rw-redisï¼Œä¾†åˆ¤æ–·æ˜¯ä¸æ˜¯ master ä¸¦ä¸”æ˜¯å¯è®€å¯å¯«ã€‚&lt;/p>
&lt;br>
&lt;h3>docker-volume/php/r.php&lt;span class="hx:absolute hx:-mt-20" id="docker-volumephprphp">&lt;/span>
&lt;a href="#docker-volumephprphp" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-php" data-lang="php">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;lt;?&lt;/span>&lt;span style="color:#a6e22e">php&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$redis &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">new&lt;/span> &lt;span style="color:#a6e22e">Redis&lt;/span>();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$redis&lt;span style="color:#f92672">-&amp;gt;&lt;/span>&lt;span style="color:#a6e22e">connect&lt;/span>(&lt;span style="color:#e6db74">&amp;#39;172.20.0.20&amp;#39;&lt;/span>, &lt;span style="color:#ae81ff">16380&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$r &lt;span style="color:#f92672">=&lt;/span> $redis&lt;span style="color:#f92672">-&amp;gt;&lt;/span>&lt;span style="color:#a6e22e">info&lt;/span>();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">echo&lt;/span> $r[&lt;span style="color:#e6db74">&amp;#39;run_id&amp;#39;&lt;/span>] &lt;span style="color:#f92672">.&lt;/span> &lt;span style="color:#e6db74">&amp;#39;&amp;lt;br&amp;gt;&amp;#39;&lt;/span> &lt;span style="color:#f92672">.&lt;/span> $r[&lt;span style="color:#e6db74">&amp;#39;role&amp;#39;&lt;/span>] &lt;span style="color:#f92672">.&lt;/span> &lt;span style="color:#e6db74">&amp;#39;&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;&amp;#39;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">echo&lt;/span> &lt;span style="color:#e6db74">&amp;#39;&amp;lt;pre&amp;gt;&amp;#39;&lt;/span>, &lt;span style="color:#a6e22e">print_r&lt;/span>($r), &lt;span style="color:#e6db74">&amp;#39;&amp;lt;/pre&amp;gt;&amp;#39;&lt;/span>;&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>ä½¿ç”¨ 16380 Portï¼Œåœ¨ &lt;code>haproxy.cfg&lt;/code> æœ‰è¨­å®š r-redisï¼Œä¾†é¡¯ç¤ºæ˜¯ä¸æ˜¯ masterã€slave ä¸”å¯è®€ã€‚&lt;/p>
&lt;br>
&lt;h3>php/Dockerfile&lt;span class="hx:absolute hx:-mt-20" id="phpdockerfile">&lt;/span>
&lt;a href="#phpdockerfile" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-Dockerfile" data-lang="Dockerfile">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">FROM&lt;/span>&lt;span style="color:#e6db74"> php:7.4-fpm&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">&lt;/span>&lt;span style="color:#66d9ef">RUN&lt;/span> pecl install -o -f redis &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>&lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> rm -rf /tmp/pear &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>&lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> echo &lt;span style="color:#e6db74">&amp;#34;extension=redis.so&amp;#34;&lt;/span> &amp;gt; /usr/local/etc/php/conf.d/redis.ini &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>&lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> echo &lt;span style="color:#e6db74">&amp;#34;session.save_handler = redis&amp;#34;&lt;/span> &amp;gt;&amp;gt; /usr/local/etc/php/conf.d/redis.ini &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>&lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> echo &lt;span style="color:#e6db74">&amp;#34;session.save_path = tcp://redis:6379&amp;#34;&lt;/span> &amp;gt;&amp;gt; /usr/local/etc/php/conf.d/redis.ini&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>å› ç‚º PHP è¦ä½¿ç”¨ Redisï¼Œæœƒéœ€è¦å®‰è£ä¸€äº›å¥—ä»¶ï¼Œæ‰€ä»¥æˆ‘å€‘å°‡ PHP åˆ†é–‹ä¾†ï¼Œä½¿ç”¨ Dockerfile ä¾†è¨­å®šæ˜ åƒæª”ã€‚&lt;/p>
&lt;br>
&lt;h3>redis.sh&lt;span class="hx:absolute hx:-mt-20" id="redissh">&lt;/span>
&lt;a href="#redissh" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>green&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;\033[1;32m&amp;#34;&lt;/span>;white&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;\033[1;0m&amp;#34;&lt;/span>;red&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;\033[1;31m&amp;#34;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo &lt;span style="color:#e6db74">&amp;#34;redis1 IPAddress:&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>redis1_ip&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>docker inspect redis1 | grep &lt;span style="color:#e6db74">&amp;#34;IPv4&amp;#34;&lt;/span> | egrep -o &lt;span style="color:#e6db74">&amp;#34;[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}&amp;#34;&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo $redis1_ip;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo &lt;span style="color:#e6db74">&amp;#34;------------------------------&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo &lt;span style="color:#e6db74">&amp;#34;redis2 IPAddress:&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>redis2_ip&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>docker inspect redis2 | grep &lt;span style="color:#e6db74">&amp;#34;IPv4&amp;#34;&lt;/span> | egrep -o &lt;span style="color:#e6db74">&amp;#34;[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}&amp;#34;&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo $redis2_ip;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo &lt;span style="color:#e6db74">&amp;#34;------------------------------&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo &lt;span style="color:#e6db74">&amp;#34;redis3 IPAddress:&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>redis3_ip&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>docker inspect redis3 | grep &lt;span style="color:#e6db74">&amp;#34;IPv4&amp;#34;&lt;/span> | egrep -o &lt;span style="color:#e6db74">&amp;#34;[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}&amp;#34;&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo $redis3_ip;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo &lt;span style="color:#e6db74">&amp;#34;------------------------------&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo &lt;span style="color:#e6db74">&amp;#34;haproxy IPAddress:&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>haproxy_ip&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>docker inspect haproxy | grep &lt;span style="color:#e6db74">&amp;#34;IPv4&amp;#34;&lt;/span> | egrep -o &lt;span style="color:#e6db74">&amp;#34;[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}&amp;#34;&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo $haproxy_ip;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo &lt;span style="color:#e6db74">&amp;#34;------------------------------&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo &lt;span style="color:#e6db74">&amp;#34;redis1:&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>docker exec -it redis1 redis-cli info Replication | grep role
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo &lt;span style="color:#e6db74">&amp;#34;redis2:&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>docker exec -it redis2 redis-cli info Replication | grep role
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo &lt;span style="color:#e6db74">&amp;#34;redis3:&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>docker exec -it redis3 redis-cli info Replication | grep role&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>é€™å€‹æ˜¯æˆ‘è‡ªå·±æ‰€å¯«çš„è…³æœ¬ï¼Œå¯ä»¥è©³ç´°çŸ¥é“ç›®å‰æœå‹™çš„è§’è‰²è½‰ç§»ç‹€æ³ã€‚&lt;/p>
&lt;br>
&lt;h3>sentinel/Docker-compose.yaml&lt;span class="hx:absolute hx:-mt-20" id="sentineldocker-composeyaml">&lt;/span>
&lt;a href="#sentineldocker-composeyaml" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yml" data-lang="yml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">version&lt;/span>: &lt;span style="color:#e6db74">&amp;#39;3.8&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">services&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">haproxy&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">image&lt;/span>: &lt;span style="color:#ae81ff">haproxy&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">container_name&lt;/span>: &lt;span style="color:#ae81ff">haproxy&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">../docker-volume/haproxy/:/usr/local/etc/haproxy&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">environment&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">TZ=Asia/Taipei&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">networks&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">HAProxy_Redis&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ipv4_address&lt;/span>: &lt;span style="color:#ae81ff">172.20.0.20&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ports&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">16379&lt;/span>:&lt;span style="color:#ae81ff">6379&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">8404&lt;/span>:&lt;span style="color:#ae81ff">8404&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">sentinel1&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">image&lt;/span>: &lt;span style="color:#ae81ff">redis&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">container_name&lt;/span>: &lt;span style="color:#ae81ff">redis-sentinel-1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">networks&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">HAProxy_Redis&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ports&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">26379&lt;/span>:&lt;span style="color:#ae81ff">26379&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">command&lt;/span>: &lt;span style="color:#ae81ff">redis-server /usr/local/etc/redis/sentinel.conf --sentinel&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">./sentinel1:/usr/local/etc/redis/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">../log/sentinel1:/var/log/redis/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">environment&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">TZ=Asia/Taipei&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">sentinel2&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">image&lt;/span>: &lt;span style="color:#ae81ff">redis&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">container_name&lt;/span>: &lt;span style="color:#ae81ff">redis-sentinel-2&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">networks&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">HAProxy_Redis&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ports&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">26380&lt;/span>:&lt;span style="color:#ae81ff">26379&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">command&lt;/span>: &lt;span style="color:#ae81ff">redis-server /usr/local/etc/redis/sentinel.conf --sentinel&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">./sentinel2:/usr/local/etc/redis/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">../log/sentinel2:/var/log/redis/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">environment&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">TZ=Asia/Taipei&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">sentinel3&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">image&lt;/span>: &lt;span style="color:#ae81ff">redis&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">container_name&lt;/span>: &lt;span style="color:#ae81ff">redis-sentinel-3&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">networks&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">HAProxy_Redis&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ports&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">26381&lt;/span>:&lt;span style="color:#ae81ff">26379&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">command&lt;/span>: &lt;span style="color:#ae81ff">redis-server /usr/local/etc/redis/sentinel.conf --sentinel&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">./sentinel3:/usr/local/etc/redis/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">../log/sentinel3:/var/log/redis/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">environment&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">TZ=Asia/Taipei&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">networks&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">HAProxy_Redis&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">external&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">HAProxy_Redis&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;h3>sentinel/sentine.conf&lt;span class="hx:absolute hx:-mt-20" id="sentinelsentineconf">&lt;/span>
&lt;a href="#sentinelsentineconf" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>å› ç‚º sentine å…§å®¹éƒ½åŸºæœ¬ä¸Šç›¸åŒï¼Œæ‰€ä»¥èˆ‰ä¸€å€‹ä¾†èªªæ˜ï¼š&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;pre>&lt;code>port 26379
logfile &amp;#34;/var/log/redis/redis-sentinel.log&amp;#34;
protected-mode no
#è¨­å®šè¦ç›£æ§çš„ Masterï¼Œæœ€å¾Œçš„ 2 ä»£è¡¨åˆ¤å®šå®¢è§€ä¸‹ç·šæ‰€éœ€çš„å“¨å…µæ•¸
sentinel monitor mymaster 172.20.0.11 6379 2
#å“¨å…µ Ping ä¸åˆ° Master è¶…éæ­¤æ¯«ç§’æ•¸æœƒèªå®šä¸»è§€ä¸‹ç·š
sentinel down-after-milliseconds mymaster 5000&lt;/code>&lt;/pre>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>è¦è¨­å®šæŒ‡å®šçš„ Port sentine1 æ˜¯ 26379ã€sentine2 æ˜¯ 26380ã€sentine3 æ˜¯ 26381ã€‚æ¥ä¸‹ä¾†è¦è¨­å®šè¦ç›£æ§çš„ Masterï¼Œæœ€å¾Œçš„æ•¸å­—ä»£è¡¨æˆ‘å€‘å‰é¢æœ‰æåˆ°å®¢è§€ä¸‹ç·šéœ€è¦é”åˆ°çš„å“¨å…µæ•¸ã€‚ä»¥åŠä¸»è§€ä¸‹ç·šçš„æ™‚é–“è·Ÿ failover è¶…éçš„æ™‚é–“ã€‚&lt;/p>
&lt;br>
&lt;h2>æ¸¬è©¦&lt;span class="hx:absolute hx:-mt-20" id="æ¸¬è©¦">&lt;/span>
&lt;a href="#%e6%b8%ac%e8%a9%a6" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>æˆ‘å€‘å…ˆç”¨ docker-compose up ä¾†å•Ÿå‹• Docker-compose.yamlï¼Œæ¥è‘—å†å•Ÿå‹• sentinel/Docker-compose.yamlï¼š&lt;/p>
&lt;figure>&lt;img src="https://pin-yi.me/redis/redis-sentinel-docker-compose-haproxy/yaml.webp"
alt="å•Ÿå‹• Docker-compose.yaml" width="700">&lt;figcaption>
&lt;p>å•Ÿå‹• Docker-compose.yaml&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;figure>&lt;img src="https://pin-yi.me/redis/redis-sentinel-docker-compose-haproxy/sentinel-yaml.webp"
alt="å•Ÿå‹• sentinel/Docker-compose.yaml" width="700">&lt;figcaption>
&lt;p>å•Ÿå‹• sentinel/Docker-compose.yaml&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;p>ç”±æ–¼ç‚ºäº†æ¸¬è©¦ï¼Œæœ‰å…ˆå°‡æ‰€æœ‰å®¹å™¨è¨­å®šå¥½ IPï¼Œå°±ä¸æœƒåƒä¸Šä¸€ç¯‡æ–‡ç« ä¸€æ¨£è¦å»æŠ“ IP ï¼Œæ‰èƒ½å•Ÿå‹• Sentinelã€‚&lt;/p>
&lt;br>
&lt;p>é€™æ™‚å€™å¯ä»¥ä½¿ç”¨ç€è¦½å™¨æœå°‹ä»¥ä¸‹ç¶²å€ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>test.com:8404/redis&lt;/code>ï¼šHAProxy ç›£çœ‹å¹³å°(åªå–ç‰‡æ®µ)ã€‚&lt;/li>
&lt;/ul>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/redis/redis-sentinel-docker-compose-haproxy/haproxy8404.webp"
alt="HAProxy ç›£æ§å¹³å°" width="1200">&lt;figcaption>
&lt;p>HAProxy ç›£æ§å¹³å°&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;ul>
&lt;li>&lt;code>test.com:8888/rw.php&lt;/code>ï¼šåªæœƒé¡¯ç¤º masterï¼Œä¸¦ä¸”å¯è®€å¯å¯«ã€‚&lt;/li>
&lt;/ul>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/redis/redis-sentinel-docker-compose-haproxy/rw.webp"
alt="master (redis1)" width="600">&lt;figcaption>
&lt;p>master (redis1)&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;ul>
&lt;li>&lt;code>test.com:8888/r.php&lt;/code>ï¼šæœƒé¡¯ç¤º masterã€slaveï¼Œä¸”å¯è®€ã€‚&lt;/li>
&lt;/ul>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/redis/redis-sentinel-docker-compose-haproxy/r1.webp"
alt="master (redis1)" width="600">&lt;figcaption>
&lt;p>master (redis1)&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;figure>&lt;img src="https://pin-yi.me/redis/redis-sentinel-docker-compose-haproxy/r3.webp"
alt="slave (redis2)" width="600">&lt;figcaption>
&lt;p>slave (redis2)&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;figure>&lt;img src="https://pin-yi.me/redis/redis-sentinel-docker-compose-haproxy/r2.webp"
alt="slave (redis3)" width="600">&lt;figcaption>
&lt;p>slave (redis3)&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;p>æ¥ä¸‹ä¾†å¯ä»¥åŸ·è¡Œï¼š&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>$ sh redis.sh
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>redis1 IPAddress:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>172.20.0.11
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>------------------------------
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>redis2 IPAddress:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>172.20.0.12
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>------------------------------
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>redis3 IPAddress:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>172.20.0.13
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>------------------------------
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>haproxy IPAddress:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>172.20.0.20
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>------------------------------
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>redis1:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>role:master
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>redis2:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>role:slave
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>redis3:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>role:slave&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>å°±æœƒé¡¯ç¤ºä¸‰å€‹ redis çš„ IP ä»¥åŠ haproxy çš„ IPï¼Œé€™äº›éƒ½æ˜¯å·²ç¶“å¯«åœ¨ Docker-compose.yaml æª”æ¡ˆå…§çš„ï¼Œå¦‚æœå¿˜è¨˜çš„å¯ä»¥å†å¾€å‰çœ‹ â†‘&lt;/p>
&lt;p>æ¥ä¸‹ä¾†æˆ‘å€‘å¯ä»¥å…ˆä¸€ç›´ F5 &lt;code>test.com:8888/r.php&lt;/code>ï¼Œä¾†æ¨¡æ“¬å¤§é‡çš„è®€å–è«‹æ±‚ï¼Œå¦‚æœç™¼ç¾ç¶²ç«™å…§å®¹ä¸€ç›´åœ¨æ›´æ›ï¼Œå°±ä»£è¡¨æˆ‘å€‘æˆåŠŸé€é HAProxy åšåˆ°è² è¼‰å¹³è¡¡äº†ï¼Œå¯ä»¥å°‡è®€å–çš„éœ€æ±‚åˆ†çµ¦ä¸‰å€‹æœå‹™åšè™•ç†ï¼é‚£å› ç‚º &lt;code>test.com:8888/rw.php&lt;/code> ä»–åªæœƒæŠ“ masterï¼Œæ‰€ä»¥åˆ·æ–°é‚„æ˜¯åŒä¸€å€‹ masterã€‚&lt;/p>
&lt;br>
&lt;p>é‚„è¨˜å¾—æˆ‘å€‘ä¸Šæ¬¡ç”¨ Redis çš„å“¨å…µæ¨¡å¼å—ï¼Ÿé‚£æˆ‘å€‘ç”¨å®ƒä¾†æ­é… Haproxy æœƒæœ‰ä»€éº¼çµæœå‘¢ï¼Ÿ&lt;/p>
&lt;p>æˆ‘å€‘å…ˆä½¿ç”¨ &lt;code>docker stop&lt;/code> ä¾†æ¨¡æ“¬æœå‹™ä¸­æ–·ï¼š&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>$ docker stop redis1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>redis1&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>å¯ä»¥çœ‹åˆ° &lt;code>test.com:8404/redis&lt;/code> åŸæœ¬ç¶ è‰²çš„ redis1 é–‹å§‹è®Šæˆé»ƒè‰²ï¼Œæœ€å¾Œè®Šæˆç´…è‰²ï¼š&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/redis/redis-sentinel-docker-compose-haproxy/haproxy8404-1.webp"
alt="æ¨¡æ“¬ä¸­æ–·æœå‹™ HAProxy ç›£æ§å¹³å°" width="1200">&lt;figcaption>
&lt;p>æ¨¡æ“¬ä¸­æ–·æœå‹™ HAProxy ç›£æ§å¹³å°&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;p>æœ€å¾Œå¯ä»¥çœ‹åˆ° Redis Sentinel ä½œå‹•ï¼Œå°‡ master è½‰ç§»åˆ° redis3ï¼š&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/redis/redis-sentinel-docker-compose-haproxy/haproxy8404-2.webp"
alt="æ¨¡æ“¬ä¸­æ–·æœå‹™ HAProxy ç›£æ§å¹³å°" width="1200">&lt;figcaption>
&lt;p>æ¨¡æ“¬ä¸­æ–·æœå‹™ HAProxy ç›£æ§å¹³å°&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;p>é€™æ™‚å€™æˆ‘å€‘å†å»çœ‹ &lt;code>test.com:8888/rw.php&lt;/code> ï¼Œå°±æœƒç™¼ç¾èˆ‡å‰›å‰›çš„ master ä¸å¤ªä¸€æ¨£å›‰ï¼Œå› ç‚ºå·²ç¶“è®Šæˆ redis2 äº†ï¼&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/redis/redis-sentinel-docker-compose-haproxy/rw-1.webp"
alt="master (redis2)" width="600">&lt;figcaption>
&lt;p>master (redis2)&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;p>ä»£è¡¨æˆ‘å€‘ HAProxy ä¹Ÿæœ‰æˆåŠŸå°‡ master çµ¦é¡¯ç¤ºå‡ºä¾†ï¼&lt;/p>
&lt;br>
&lt;p>æˆ‘å€‘å†å»çœ‹ &lt;code>test.com:8888/r.php&lt;/code> ï¼Œå°±å¯ä»¥ç™¼ç¾å‰©ä¸‹ redis2 ä»¥åŠ redis 3 äº†ï¼Œå› ç‚º redis1 è¢«æˆ‘å€‘çµ¦æš«åœæœå‹™äº†ï¼Œè€Œä¸” redis2 è®Šæˆ masterï¼&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/redis/redis-sentinel-docker-compose-haproxy/r4.webp"
alt="master (redis2)" width="600">&lt;figcaption>
&lt;p>master (redis2)&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;figure>&lt;img src="https://pin-yi.me/redis/redis-sentinel-docker-compose-haproxy/r2.webp"
alt="slave (redis3)" width="600">&lt;figcaption>
&lt;p>slave (redis3)&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;h2>åƒè€ƒè³‡æ–™&lt;span class="hx:absolute hx:-mt-20" id="åƒè€ƒè³‡æ–™">&lt;/span>
&lt;a href="#%e5%8f%83%e8%80%83%e8%b3%87%e6%96%99" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>HAProxy é¦–é ï¼š&lt;a href="http://www.haproxy.org/"target="_blank" rel="noopener">http://www.haproxy.org/&lt;svg class="hx:inline hx:rtl:rotate-270 hx:align-baseline" height="1em" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
&lt;path d="m9.1716 7.7574h7.0711m0 0v7.0711m0-7.0711-8.4853 8.4853" stroke-linecap="round" stroke-linejoin="round"/>
&lt;/svg>&lt;/a>&lt;/p>
&lt;p>HAproxyçš„å®‰è£è¨­å®šåŠç¯„ä¾‹ï¼š&lt;a href="https://tw511.com/a/01/6959.html"target="_blank" rel="noopener">https://tw511.com/a/01/6959.html&lt;svg class="hx:inline hx:rtl:rotate-270 hx:align-baseline" height="1em" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
&lt;path d="m9.1716 7.7574h7.0711m0 0v7.0711m0-7.0711-8.4853 8.4853" stroke-linecap="round" stroke-linejoin="round"/>
&lt;/svg>&lt;/a>&lt;/p>
&lt;p>redis sentinelé›†ç¾¤é…ç½®åŠhaproxyé…ç½®ï¼š&lt;a href="https://www.cnblogs.com/tzm7614/p/5691912.html"target="_blank" rel="noopener">https://www.cnblogs.com/tzm7614/p/5691912.html&lt;svg class="hx:inline hx:rtl:rotate-270 hx:align-baseline" height="1em" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
&lt;path d="m9.1716 7.7574h7.0711m0 0v7.0711m0-7.0711-8.4853 8.4853" stroke-linecap="round" stroke-linejoin="round"/>
&lt;/svg>&lt;/a>&lt;/p>
&lt;p>å¯Œäººç”¨ L4 Switchï¼Œçª®äººç”¨ Linux HAProxyï¼ï¼š&lt;a href="https://blog.toright.com/posts/3967/%E5%AF%8C%E4%BA%BA%E7%94%A8-l4-switch%EF%BC%8C%E7%AA%AE%E4%BA%BA%E7%94%A8-linux-haproxy%EF%BC%81.html"target="_blank" rel="noopener">https://blog.toright.com/posts/3967/%E5%AF%8C%E4%BA%BA%E7%94%A8-l4-switch%EF%BC%8C%E7%AA%AE%E4%BA%BA%E7%94%A8-linux-haproxy%EF%BC%81.html&lt;svg class="hx:inline hx:rtl:rotate-270 hx:align-baseline" height="1em" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
&lt;path d="m9.1716 7.7574h7.0711m0 0v7.0711m0-7.0711-8.4853 8.4853" stroke-linecap="round" stroke-linejoin="round"/>
&lt;/svg>&lt;/a>&lt;/p>
&lt;p>selcukusta/redis-sentinel-with-haproxyï¼š&lt;a href="https://github.com/selcukusta/redis-sentinel-with-haproxy"target="_blank" rel="noopener">https://github.com/selcukusta/redis-sentinel-with-haproxy&lt;svg class="hx:inline hx:rtl:rotate-270 hx:align-baseline" height="1em" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
&lt;path d="m9.1716 7.7574h7.0711m0 0v7.0711m0-7.0711-8.4853 8.4853" stroke-linecap="round" stroke-linejoin="round"/>
&lt;/svg>&lt;/a>&lt;/p>
&lt;p>How to Enable Health Checks in HAProxyï¼š&lt;a href="https://www.haproxy.com/blog/how-to-enable-health-checks-in-haproxy/"target="_blank" rel="noopener">https://www.haproxy.com/blog/how-to-enable-health-checks-in-haproxy/&lt;svg class="hx:inline hx:rtl:rotate-270 hx:align-baseline" height="1em" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
&lt;path d="m9.1716 7.7574h7.0711m0 0v7.0711m0-7.0711-8.4853 8.4853" stroke-linecap="round" stroke-linejoin="round"/>
&lt;/svg>&lt;/a>&lt;/p></description></item><item><title>Redis å“¨å…µæ¨¡å¼ (Sentinel) æ­é… Docker-compose å¯¦ä½œ</title><link>https://pin-yi.me/blog/redis/redis-sentinel-docker-compose/</link><pubDate>Tue, 19 Apr 2022 00:00:00 +0000</pubDate><guid>https://pin-yi.me/blog/redis/redis-sentinel-docker-compose/</guid><description>
&lt;h2>ä»€éº¼æ˜¯ Redis å“¨å…µæ¨¡å¼ (Sentinel) ?&lt;span class="hx:absolute hx:-mt-20" id="ä»€éº¼æ˜¯-redis-å“¨å…µæ¨¡å¼-sentinel-">&lt;/span>
&lt;a href="#%e4%bb%80%e9%ba%bc%e6%98%af-redis-%e5%93%a8%e5%85%b5%e6%a8%a1%e5%bc%8f-sentinel-" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>æœ‰é—œ Redis ä¹‹å‰æœ‰å¯«ä¸€ç¯‡ &lt;a href="../redis-introduce/">Redis çš„ä»‹ç´¹æ–‡&lt;/a>ï¼Œæœ‰èˆˆè¶£å¯ä»¥å»çœ‹çœ‹ï¼&lt;/p>
&lt;p>Redis æä¾›éå¸¸å¯¦ç”¨çš„åŠŸèƒ½ä¾†è®“æˆ‘å€‘å¯¦ç¾å¤šæ©Ÿçš„ in-memory è³‡æ–™åº«ï¼š&lt;/p>
&lt;ul>
&lt;li>ä¸»å¾è¤‡è£½æ¨¡å¼ (Master-Slave Replication)&lt;/li>
&lt;li>å“¨å…µæ¨¡å¼ (Sentinel)&lt;/li>
&lt;li>å¢é›†æ¨¡å¼ (Cluster)&lt;/li>
&lt;/ul>
&lt;br>
&lt;p>æˆ‘å€‘é€™é‚Šä¸»è¦ä»‹ç´¹å“¨å…µæ¨¡å¼ (Sentinel)ï¼Œä½†ä¸»è¦ä¹Ÿæ˜¯ç”±ä¸»å¾è¤‡è£½æ¨¡å¼ (Master-Slave Replication) ä¿®æ”¹è€Œä¾†ï¼š&lt;/p>
&lt;p>å“¨å…µæ¨¡å¼å°±æ˜¯ç”¨ä¾†ç›£è¦– Redis ç³»çµ±ï¼Œå“¨å…µæœƒç›£æ§ Master æ˜¯å¦æ­£å¸¸é‹ä½œã€‚å¦‚æœé‡åˆ° Master å‡ºç¾æ•…éšœæˆ–æ˜¯é›¢ç·šæ™‚ï¼Œå“¨å…µä¹‹é–“æœƒé–‹å§‹åˆ¤æ–·ï¼Œç›´åˆ°æˆ‘å€‘æ‰€è¨­å®šéœ€é”åˆ°çš„åˆ¤æ–·æ•¸é‡å¾Œï¼Œå“¨å…µæœƒå°‡å…¶æ‰€å±¬çš„ Slave è®Šæˆ Masterï¼Œä¸¦å†å°‡å…¶ä»–çš„ Slave æŒ‡å‘æ–°çš„ Masterã€‚&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/redis/redis-sentinel-docker-compose/sentinal.webp"
alt="å“¨å…µæ¨¡å¼ (Sentinel)" width="550">&lt;figcaption>
&lt;p>å“¨å…µæ¨¡å¼ (Sentinel)&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;h3>ç›£æ§&lt;span class="hx:absolute hx:-mt-20" id="ç›£æ§">&lt;/span>
&lt;a href="#%e7%9b%a3%e6%8e%a7" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>å“¨å…µæœƒå’Œè¦ç›£æ§çš„ Master å»ºç«‹å…©æ¢é€£æ¥ï¼Œ&lt;code>Cmd&lt;/code> å’Œ &lt;code>Pub/Sub&lt;/code>ï¼š&lt;/p>
&lt;ul>
&lt;li>Cmd æ˜¯å“¨å…µç”¨ä¾†å®šæœŸå‘ Master ç™¼é€ &lt;code>Info&lt;/code> å‘½ä»¤ä»¥å–å¾— Master çš„è¨Šæ¯ï¼Œè¨Šæ¯ä¸­æœƒåŒ…å« Master æœ‰å“ªäº› Slaveã€‚ç•¶èˆ‡ Master ç²å¾— Slave è¨Šæ¯å¾Œï¼Œå“¨å…µä¹Ÿæœƒå’Œ Slave å»ºç«‹é€£æ¥ã€‚&lt;/li>
&lt;li>å“¨å…µä¹Ÿæœƒå®šæœŸé€é &lt;code>Cmd&lt;/code> å‘ Masterã€Slave å’Œå…¶ä»–å“¨å…µç™¼é€ &lt;code>Ping&lt;/code> æŒ‡ä»¤ä¾†æª¢æŸ¥æ˜¯å¦å­˜åœ¨ï¼Œç¢ºèªç¯€é»ç‹€æ…‹ç­‰ã€‚&lt;/li>
&lt;li>&lt;code>Pub/Sub&lt;/code> è®“å“¨å…µå¯ä»¥é€éè¨‚é–± Master å’Œ Slave çš„ &lt;code>__Sentinel__:hello&lt;/code> é€™å€‹é »é“ä¾†å’Œå…¶ä»–å“¨å…µå®šæœŸçš„é€²è¡Œè³‡è¨Šäº¤æ›ã€‚&lt;/li>
&lt;/ul>
&lt;br>
&lt;h3>ä¸»è§€ä¸‹ç·š (SDOWN)&lt;span class="hx:absolute hx:-mt-20" id="ä¸»è§€ä¸‹ç·š-sdown">&lt;/span>
&lt;a href="#%e4%b8%bb%e8%a7%80%e4%b8%8b%e7%b7%9a-sdown" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>ä¸»è§€ä¸‹ç·šæ˜¯æŒ‡å–®å€‹å“¨å…µèªç‚º Master å·²ç¶“åœæ­¢æœå‹™äº†ï¼Œæœ‰å¯èƒ½æ˜¯ç¶²è·¯ä¸é€šæˆ–æ˜¯æ¥æ”¶ä¸åˆ°è¨‚é–±ç­‰ï¼Œè€Œå“¨å…µçš„åˆ¤æ–·æ˜¯ä¾æ“šå‚³é€ Ping æŒ‡ä»¤ä¹‹å¾Œä¸€å®šæ™‚é–“å…§æ˜¯å¦æ”¶åˆ°å›è¦†æˆ–æ˜¯éŒ¯èª¤è¨Šæ¯ï¼Œå¦‚æœæœ‰å“¨å…µå°±æœƒä¸»è§€èªç‚ºé€™å€‹ Master å·²ç¶“ä¸‹ç·šåœæ­¢æœå‹™äº†ã€‚&lt;/p>
&lt;br>
&lt;h3>å®¢è§€ä¸‹ç·š (ODOWN)&lt;span class="hx:absolute hx:-mt-20" id="å®¢è§€ä¸‹ç·š-odown">&lt;/span>
&lt;a href="#%e5%ae%a2%e8%a7%80%e4%b8%8b%e7%b7%9a-odown" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>å®¢è§€ä¸‹ç·šæ˜¯æŒ‡ç”±å¤šå€‹å“¨å…µå°åŒä¸€å€‹ Master å„è‡ªé€²è¡Œä¸»è§€ä¸‹ç·šçš„åˆ¤æ–·å¾Œï¼Œå†ç¶œåˆæ‰€æœ‰å“¨å…µçš„åˆ¤æ–·ã€‚è‹¥æ˜¯èªç‚ºä¸»è§€ä¸‹ç·šçš„å“¨å…µåˆ°é”æˆ‘å€‘æ‰€é…ç½®çš„æ•¸é‡å¾Œï¼Œå³ç‚ºå®¢è§€ä¸‹ç·šã€‚&lt;/p>
&lt;br>
&lt;h3>æ•…éšœè½‰ç§» (Failover)&lt;span class="hx:absolute hx:-mt-20" id="æ•…éšœè½‰ç§»-failover">&lt;/span>
&lt;a href="#%e6%95%85%e9%9a%9c%e8%bd%89%e7%a7%bb-failover" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>ç•¶ Master å·²ç¶“è¢«æ¨™è¨˜ç‚ºå®¢è§€ä¸‹ç·šæ™‚ï¼Œèµ·åˆç™¼ç¾ Master ä¸‹ç·šçš„å“¨å…µæœƒç™¼èµ·ä¸€å€‹é¸èˆ‰ (æ¡ç”¨çš„æ˜¯ Raft æ¼”ç®—æ³•)ï¼Œä¸¦è¦æ±‚å…¶ä»–å“¨å…µé¸ä»–åšç‚ºé ˜é ­å“¨å…µï¼Œé ˜é ­å“¨å…µæœƒè² è²¬é€²è¡Œæ•…éšœçš„æ¢å¾©ã€‚ç•¶é¸çš„æ¨™æº–æ˜¯è¦æœ‰è¶…éä¸€åŠçš„å“¨å…µåŒæ„ï¼Œæ‰€ä»¥å“¨å…µçš„æ•¸é‡å»ºè­°è¨­å®šæˆå¥‡æ•¸å€‹ã€‚&lt;/p>
&lt;p>æ­¤æ™‚è‹¥æœ‰å¤šå€‹å“¨å…µåŒæ™‚åƒé¸é ˜é ­å“¨å…µï¼Œå‰‡æœ‰å¯èƒ½æœƒç™¼ç”Ÿä¸€è¼ªå¾Œæ²’æœ‰ç”¢ç”Ÿå‹é¸è€…ï¼Œå‰‡æ‰€æœ‰çš„å“¨å…µæœƒå†ç­‰éš¨æ©Ÿä¸€å€‹æ™‚é–“å†æ¬¡ç™¼èµ·åƒé¸çš„è«‹æ±‚ï¼Œé€²è¡Œä¸‹ä¸€è¼ªçš„é¸èˆ‰ï¼Œä¸€ç›´åˆ°é¸å‡ºé ˜é ­ç‚ºæ­¢ã€‚æ‰€ä»¥è‹¥å“¨å…µæ•¸é‡ç‚ºå¶æ•¸å°±å¾ˆæœ‰å¯èƒ½ä¸€ç›´ç„¡æ³•é¸å‡ºé ˜é ­å“¨å…µã€‚&lt;/p>
&lt;br>
&lt;p>é¸å‡ºé ˜é ­å“¨å…µå¾Œï¼Œé ˜é ­å“¨å…µæœƒé–‹å§‹å¾ä¸‹ç·šçš„ Master æ‰€å±¬ Slave ä¸­è·³é¸å‡ºä¸€å€‹ä¾†è®Šæˆæ–°çš„ Masterï¼ŒæŒ‘é¸çš„ä¾æ“šå¦‚ä¸‹ï¼š&lt;/p>
&lt;ol>
&lt;li>æ‰€æœ‰åœ¨ç·šçš„ Slave æ“æœ‰æœ€é«˜å„ªå…ˆæ¬Šçš„ï¼Œå„ªå…ˆæ¬Šå¯ä»¥é€é slave-priority ä¾†åšè¨­å®šã€‚&lt;/li>
&lt;li>å¦‚æœæœ‰å¤šå€‹åŒç‚ºæœ€é«˜å„ªå…ˆæ¬Šçš„ Slaveï¼Œå‰‡æœƒé¸æ“‡è¤‡è£½æœ€å®Œæ•´çš„ã€‚&lt;/li>
&lt;li>è‹¥é‚„æ˜¯æœ‰å¤šå€‹ Slave çš†ç¬¦åˆä¸Šè¿°æ¢ä»¶ï¼Œå‰‡é¸æ“‡ id æœ€å°çš„ã€‚&lt;/li>
&lt;/ol>
&lt;br>
&lt;p>æ¥è‘—é ˜é ­å“¨å…µæœƒå°‡èˆŠçš„ Master æ›´æ–°æˆæ–°çš„ Master çš„ Slave ï¼Œè®“å…¶æ¢å¾©æœå‹™å¾Œä»¥ Slave çš„èº«ä»½ç¹¼çºŒé‹ä½œã€‚&lt;/p>
&lt;br>
&lt;h2>ç”¨ Docker å¯¦ä½œ Redis å“¨å…µæ¨¡å¼&lt;span class="hx:absolute hx:-mt-20" id="ç”¨-docker-å¯¦ä½œ-redis-å“¨å…µæ¨¡å¼">&lt;/span>
&lt;a href="#%e7%94%a8-docker-%e5%af%a6%e4%bd%9c-redis-%e5%93%a8%e5%85%b5%e6%a8%a1%e5%bc%8f" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>é‚£æ¥ä¸‹ä¾†æœƒä½¿ç”¨ Docker ä¾†å¯¦ä½œ Redis çš„å“¨å…µæ¨¡å¼ï¼Œ&lt;a href="https://github.com/880831ian/docker-compose-redis-sentinel"target="_blank" rel="noopener">ç¯„ä¾‹ç¨‹å¼é€£çµ é»æˆ‘&lt;svg class="hx:inline hx:rtl:rotate-270 hx:align-baseline" height="1em" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
&lt;path d="m9.1716 7.7574h7.0711m0 0v7.0711m0-7.0711-8.4853 8.4853" stroke-linecap="round" stroke-linejoin="round"/>
&lt;/svg>&lt;/a> ğŸ˜˜&lt;/p>
&lt;p>ç‰ˆæœ¬è³‡è¨Š&lt;/p>
&lt;ul>
&lt;li>macOSï¼š11.6&lt;/li>
&lt;li>Dockerï¼šDocker version 20.10.12, build e91ed57&lt;/li>
&lt;li>Nginxï¼š1.20&lt;/li>
&lt;li>PHPï¼š7.4-fpm&lt;/li>
&lt;li>Redisï¼šlatest&lt;/li>
&lt;/ul>
&lt;br>
&lt;h3>æª”æ¡ˆçµæ§‹&lt;span class="hx:absolute hx:-mt-20" id="æª”æ¡ˆçµæ§‹">&lt;/span>
&lt;a href="#%e6%aa%94%e6%a1%88%e7%b5%90%e6%a7%8b" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;pre>&lt;code>.
â”œâ”€â”€ Docker-compose.yaml
â”œâ”€â”€ docker-volume
â”‚Â Â  â”œâ”€â”€ log
â”‚Â Â  â”‚Â Â  â””â”€â”€ nginx
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ access.log
â”‚Â Â  â”‚Â Â  â””â”€â”€ error.log
â”‚Â Â  â”œâ”€â”€ nginx
â”‚Â Â  â”‚Â Â  â””â”€â”€ nginx.conf
â”‚Â Â  â”œâ”€â”€ php
â”‚Â Â  â”‚Â Â  â””â”€â”€ index.php
â”‚Â Â  â”œâ”€â”€ redis-master
â”‚Â Â  â”œâ”€â”€ redis-slave1
â”‚Â Â  â””â”€â”€ redis-slave2
â”œâ”€â”€ redis.sh
â”œâ”€â”€ php
â”‚Â Â  â””â”€â”€ Dockerfile
â””â”€â”€ sentinel
â”œâ”€â”€ Docker-compose.yaml
â”œâ”€â”€ sentinel1.conf
â”œâ”€â”€ sentinel2.conf
â””â”€â”€ sentinel3.conf&lt;/code>&lt;/pre>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;p>é€™æ˜¯ä¸»è¦çš„çµæ§‹ï¼Œç°¡å–®èªªæ˜ä¸€ä¸‹ï¼š&lt;/p>
&lt;ul>
&lt;li>Docker-compose.yamlï¼šæœƒæ”¾ç½®è¦ç”¢ç”Ÿçš„ Nginxã€PHPã€redis-masterã€redis-slave1ã€redis-slave2 å®¹å™¨è¨­å®šæª”ã€‚&lt;/li>
&lt;li>docker-volumeï¼šæ˜¯æˆ‘å€‘è¦æ›è¼‰é€²å»åˆ°å®¹å™¨å…§çš„æª”æ¡ˆï¼ŒåŒ…å«åƒæ˜¯ nginx.conf æˆ–æ˜¯ log/nginx ä»¥åŠ redis è¨˜æ†¶é«”å„²å­˜å…§å®¹ã€‚&lt;/li>
&lt;li>redis.shï¼šæ˜¯æˆ‘å¦å¤–å¤šå¯«çš„è…³æœ¬ï¼Œå¯ä»¥åœ¨æœ€å¾Œæ–¹é¢æˆ‘å€‘æ¸¬è©¦ Redis sentinel æ˜¯å¦æˆåŠŸã€‚&lt;/li>
&lt;li>php/Dokcerfileï¼šå› ç‚ºåœ¨ php è¦ä½¿ç”¨ redis éœ€è¦å¤šå®‰è£ä¸€äº›è¨­å®šï¼Œæ‰€ä»¥ç”¨ Dockerfile å¦å¤–å¯« PHP çš„æ˜ åƒæª”ã€‚&lt;/li>
&lt;li>sentinel/Docker-compose.yamlï¼šæœƒæ”¾ç½®è¦ç”¢ç”Ÿçš„ sentinel1ã€sentinel2ã€sentinel3 çš„å®¹å™¨è¨­å®šæª”ã€‚&lt;/li>
&lt;li>sentinel(1ã€2ã€3).confï¼šå“¨å…µçš„è¨­å®šæª”ã€‚&lt;/li>
&lt;/ul>
&lt;br>
&lt;p>é‚£æˆ‘å€‘å°±ä¾ç…§å®‰è£çš„è¨­å®šé–‹å§‹èªªæ˜ï¼š&lt;/p>
&lt;h3>Docker-compose.yaml&lt;span class="hx:absolute hx:-mt-20" id="docker-composeyaml">&lt;/span>
&lt;a href="#docker-composeyaml" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yml" data-lang="yml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">version&lt;/span>: &lt;span style="color:#e6db74">&amp;#39;3.8&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">services&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">nginx&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">image&lt;/span>: &lt;span style="color:#ae81ff">nginx:1.20&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">container_name&lt;/span>: &lt;span style="color:#ae81ff">nginx&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ports&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#e6db74">&amp;#34;8888:80&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">./docker-volume/nginx/:/etc/nginx/conf.d/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">./docker-volume/log/nginx/:/var/log/nginx/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">php&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">build&lt;/span>: &lt;span style="color:#ae81ff">./php&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">container_name&lt;/span>: &lt;span style="color:#ae81ff">php&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">expose&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">9000&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">./docker-volume/php/:/var/www/html&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">redis-master&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">image&lt;/span>: &lt;span style="color:#ae81ff">redis&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">container_name&lt;/span>: &lt;span style="color:#ae81ff">redis-master&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">./docker-volume/redis-master/:/data&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ports&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">6379&lt;/span>:&lt;span style="color:#ae81ff">6379&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">command&lt;/span>: &lt;span style="color:#ae81ff">redis-server --appendonly yes&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">redis-slave1&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">image&lt;/span>: &lt;span style="color:#ae81ff">redis&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">container_name&lt;/span>: &lt;span style="color:#ae81ff">redis-slave1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">./docker-volume/redis-slave1/:/data&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ports&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">6380&lt;/span>:&lt;span style="color:#ae81ff">6379&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">command&lt;/span>: &lt;span style="color:#ae81ff">redis-server --slaveof redis-master 6379 --appendonly yes&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">depends_on&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">redis-master&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">redis-slave2&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">image&lt;/span>: &lt;span style="color:#ae81ff">redis&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">container_name&lt;/span>: &lt;span style="color:#ae81ff">redis-slave2&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">./docker-volume/redis-slave2/:/data&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ports&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">6381&lt;/span>:&lt;span style="color:#ae81ff">6379&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">command&lt;/span>: &lt;span style="color:#ae81ff">redis-server --slaveof redis-master 6379 --appendonly yes&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">depends_on&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">redis-master&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">redis-slave1&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>è©³ç´°çš„ Docker è¨­å®šèªªæ˜ï¼Œå¯ä»¥åƒè€ƒ &lt;a href="../../docker/docker">Docker ä»‹ç´¹&lt;/a> å…§æœ‰è©³ç´°è¨­å®šèªªæ˜ã€‚æ¯”è¼ƒç‰¹åˆ¥çš„åœ°æ–¹æ˜¯ï¼š&lt;/p>
&lt;p>redis-(masterã€slave1ã€slave2)&lt;/p>
&lt;ul>
&lt;li>volumesï¼šå°‡ redis çš„è³‡æ–™æ›è¼‰åˆ° docker-volume/redis-(masterã€slave1ã€slave2)ã€‚&lt;/li>
&lt;li>commandï¼šä½¿ç”¨ redis-server å•Ÿå‹•ï¼Œä¸¦ä¸”å°‡è©²æœå‹™å™¨è½‰è®ŠæˆæŒ‡å®šæœå‹™å™¨çš„å¾å±¬æœå‹™å™¨ (slave server)ã€‚(å¦‚æœæƒ³è¦ä¿å­˜ redis çš„è³‡æ–™ï¼Œè¦è¨˜å¾—åœ¨ å¾Œé¢åŠ ä¸Š &amp;ndash;appendonly yes)&lt;/li>
&lt;/ul>
&lt;br>
&lt;h3>docker-volume/nginx/nginx.conf&lt;span class="hx:absolute hx:-mt-20" id="docker-volumenginxnginxconf">&lt;/span>
&lt;a href="#docker-volumenginxnginxconf" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;pre>&lt;code>server {
listen 80;
server_name default_server;
return 404;
}
server {
listen 80;
server_name test.com;
index index.php index.html;
error_log /var/log/nginx/error.log warn;
access_log /var/log/nginx/access.log;
root /var/www/html;
location / {
try_files $uri $uri/ /index.php?$query_string;
}
location ~ \.php$ {
fastcgi_pass php:9000;
fastcgi_index index.php;
include fastcgi_params;
fastcgi_param SCRIPT_FILENAME /var/www/html$fastcgi_script_name;
}
}&lt;/code>&lt;/pre>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>Nginx è¨­å®šæª”æ¡ˆã€‚&lt;/p>
&lt;br>
&lt;h3>php/Dockerfile&lt;span class="hx:absolute hx:-mt-20" id="phpdockerfile">&lt;/span>
&lt;a href="#phpdockerfile" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-Dockerfile" data-lang="Dockerfile">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">FROM&lt;/span>&lt;span style="color:#e6db74"> php:7.4-fpm&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">&lt;/span>&lt;span style="color:#66d9ef">RUN&lt;/span> pecl install -o -f redis &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>&lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> rm -rf /tmp/pear &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>&lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> echo &lt;span style="color:#e6db74">&amp;#34;extension=redis.so&amp;#34;&lt;/span> &amp;gt; /usr/local/etc/php/conf.d/redis.ini &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>&lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> echo &lt;span style="color:#e6db74">&amp;#34;session.save_handler = redis&amp;#34;&lt;/span> &amp;gt;&amp;gt; /usr/local/etc/php/conf.d/redis.ini &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>&lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> echo &lt;span style="color:#e6db74">&amp;#34;session.save_path = tcp://redis:6379&amp;#34;&lt;/span> &amp;gt;&amp;gt; /usr/local/etc/php/conf.d/redis.ini&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>å› ç‚º PHP è¦ä½¿ç”¨ Redisï¼Œæœƒéœ€è¦å®‰è£ä¸€äº›å¥—ä»¶ï¼Œæ‰€ä»¥æˆ‘å€‘å°‡ PHP åˆ†é–‹ä¾†ï¼Œä½¿ç”¨ Dockerfile ä¾†è¨­å®šæ˜ åƒæª”ã€‚&lt;/p>
&lt;br>
&lt;h3>sentinel/sentine.conf&lt;span class="hx:absolute hx:-mt-20" id="sentinelsentineconf">&lt;/span>
&lt;a href="#sentinelsentineconf" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>å› ç‚º sentine å…§å®¹éƒ½åŸºæœ¬ä¸Šç›¸åŒï¼Œæ‰€ä»¥èˆ‰ä¸€å€‹ä¾†èªªæ˜ï¼š&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;pre>&lt;code>port 26379
#è¨­å®šè¦ç›£æ§çš„ Masterï¼Œæœ€å¾Œçš„ 2 ä»£è¡¨åˆ¤å®šå®¢è§€ä¸‹ç·šæ‰€éœ€çš„å“¨å…µæ•¸
sentinel monitor mymaster 192.168.176.4 6379 2
#å“¨å…µ Ping ä¸åˆ° Master è¶…éæ­¤æ¯«ç§’æ•¸æœƒèªå®šä¸»è§€ä¸‹ç·š
sentinel down-after-milliseconds mymaster 5000
#failover è¶…éæ¬¡æ¯«ç§’æ•¸å³ä»£è¡¨ failover å¤±æ•—
sentinel failover-timeout mymaster 180000&lt;/code>&lt;/pre>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>è¦è¨­å®šæŒ‡å®šçš„ Port sentine1 æ˜¯ 26379ã€sentine2 æ˜¯ 26380ã€sentine3 æ˜¯ 26381ã€‚æ¥ä¸‹ä¾†è¦è¨­å®šè¦ç›£æ§çš„ Masterï¼Œæœ€å¾Œçš„æ•¸å­—ä»£è¡¨æˆ‘å€‘å‰é¢æœ‰æåˆ°å®¢è§€ä¸‹ç·šéœ€è¦é”åˆ°çš„å“¨å…µæ•¸ã€‚ä»¥åŠä¸»è§€ä¸‹ç·šçš„æ™‚é–“è·Ÿ failover è¶…éçš„æ™‚é–“ã€‚&lt;/p>
&lt;br>
&lt;h3>sentinel/Docker-compose.yaml&lt;span class="hx:absolute hx:-mt-20" id="sentineldocker-composeyaml">&lt;/span>
&lt;a href="#sentineldocker-composeyaml" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yml" data-lang="yml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">version&lt;/span>: &lt;span style="color:#e6db74">&amp;#39;3.8&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">services&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">sentinel1&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">image&lt;/span>: &lt;span style="color:#ae81ff">redis&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">container_name&lt;/span>: &lt;span style="color:#ae81ff">redis-sentinel-1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ports&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">26379&lt;/span>:&lt;span style="color:#ae81ff">26379&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">command&lt;/span>: &lt;span style="color:#ae81ff">redis-sentinel /usr/local/etc/redis/sentinel.conf&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">./sentinel1.conf:/usr/local/etc/redis/sentinel.conf&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">sentinel2&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">image&lt;/span>: &lt;span style="color:#ae81ff">redis&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">container_name&lt;/span>: &lt;span style="color:#ae81ff">redis-sentinel-2&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ports&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">26380&lt;/span>:&lt;span style="color:#ae81ff">26379&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">command&lt;/span>: &lt;span style="color:#ae81ff">redis-sentinel /usr/local/etc/redis/sentinel.conf&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">./sentinel2.conf:/usr/local/etc/redis/sentinel.conf&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">sentinel3&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">image&lt;/span>: &lt;span style="color:#ae81ff">redis&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">container_name&lt;/span>: &lt;span style="color:#ae81ff">redis-sentinel-3&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ports&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">26381&lt;/span>:&lt;span style="color:#ae81ff">26379&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">command&lt;/span>: &lt;span style="color:#ae81ff">redis-sentinel /usr/local/etc/redis/sentinel.conf&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">./sentinel3.conf:/usr/local/etc/redis/sentinel.conf&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">networks&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">default&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">external&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">redis_default&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;h3>docker-volume/php/index.php&lt;span class="hx:absolute hx:-mt-20" id="docker-volumephpindexphp">&lt;/span>
&lt;a href="#docker-volumephpindexphp" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-php" data-lang="php">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;lt;?&lt;/span>&lt;span style="color:#a6e22e">php&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$redis &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">new&lt;/span> &lt;span style="color:#a6e22e">Redis&lt;/span>();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$sentinel &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">array&lt;/span>(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">array&lt;/span>(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;host&amp;#39;&lt;/span> &lt;span style="color:#f92672">=&amp;gt;&lt;/span> &lt;span style="color:#e6db74">&amp;#39;192.168.176.4&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;port&amp;#39;&lt;/span> &lt;span style="color:#f92672">=&amp;gt;&lt;/span> &lt;span style="color:#ae81ff">6379&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;role&amp;#39;&lt;/span> &lt;span style="color:#f92672">=&amp;gt;&lt;/span> &lt;span style="color:#e6db74">&amp;#39;master&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">array&lt;/span>(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;host&amp;#39;&lt;/span> &lt;span style="color:#f92672">=&amp;gt;&lt;/span> &lt;span style="color:#e6db74">&amp;#39;192.168.176.5&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;port&amp;#39;&lt;/span> &lt;span style="color:#f92672">=&amp;gt;&lt;/span> &lt;span style="color:#ae81ff">6379&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;role&amp;#39;&lt;/span> &lt;span style="color:#f92672">=&amp;gt;&lt;/span> &lt;span style="color:#e6db74">&amp;#39;slave1&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">array&lt;/span>(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;host&amp;#39;&lt;/span> &lt;span style="color:#f92672">=&amp;gt;&lt;/span> &lt;span style="color:#e6db74">&amp;#39;192.168.176.6&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;port&amp;#39;&lt;/span> &lt;span style="color:#f92672">=&amp;gt;&lt;/span> &lt;span style="color:#ae81ff">6379&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;role&amp;#39;&lt;/span> &lt;span style="color:#f92672">=&amp;gt;&lt;/span> &lt;span style="color:#e6db74">&amp;#39;slave2&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">foreach&lt;/span> ($sentinel &lt;span style="color:#66d9ef">as&lt;/span> $value) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">try&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> $redis&lt;span style="color:#f92672">-&amp;gt;&lt;/span>&lt;span style="color:#a6e22e">connect&lt;/span>($value[&lt;span style="color:#e6db74">&amp;#39;host&amp;#39;&lt;/span>], $value[&lt;span style="color:#e6db74">&amp;#39;port&amp;#39;&lt;/span>]);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> $redis&lt;span style="color:#f92672">-&amp;gt;&lt;/span>&lt;span style="color:#a6e22e">set&lt;/span>(&lt;span style="color:#e6db74">&amp;#39;foo&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;bar&amp;#39;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">echo&lt;/span> &lt;span style="color:#e6db74">&amp;#34;é€£ç·šæˆåŠŸ &amp;#34;&lt;/span> &lt;span style="color:#f92672">.&lt;/span> $value[&lt;span style="color:#e6db74">&amp;#39;host&amp;#39;&lt;/span>] &lt;span style="color:#f92672">.&lt;/span> &lt;span style="color:#e6db74">&amp;#34;&amp;lt;br&amp;gt;ç›®å‰ masterï¼š&amp;#34;&lt;/span> &lt;span style="color:#f92672">.&lt;/span> $value[&lt;span style="color:#e6db74">&amp;#39;role&amp;#39;&lt;/span>] &lt;span style="color:#f92672">.&lt;/span> &lt;span style="color:#e6db74">&amp;#34;&amp;lt;br&amp;gt;&amp;#34;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> } &lt;span style="color:#66d9ef">catch&lt;/span> (&lt;span style="color:#a6e22e">\Exception&lt;/span> $e) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">continue&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>ç‚ºäº†è¦è®“ PHP å¯ä»¥çŸ¥é“ç›®å‰çš„ Master æ˜¯å“ªä¸€å€‹æœå‹™å™¨ï¼Œæ‰€ä»¥å¯«äº†ä¸€å€‹ try&amp;hellip;catch ä¾†åšåˆ¤æ–·ï¼Œä¸¦ä¸”æŠŠ3å€‹æœå‹™å…§å®¹éƒ½æ”¾åˆ°é™£åˆ—ä¸­ï¼Œå¾ŒçºŒå†æ¸¬è©¦ä¸­æœƒå†èªªæ˜ã€‚&lt;/p>
&lt;br>
&lt;h3>redis.sh&lt;span class="hx:absolute hx:-mt-20" id="redissh">&lt;/span>
&lt;a href="#redissh" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>green&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;\033[1;32m&amp;#34;&lt;/span>;white&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;\033[1;0m&amp;#34;&lt;/span>;red&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;\033[1;31m&amp;#34;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo &lt;span style="color:#e6db74">&amp;#34;master IPAddress:&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>master_ip&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>docker inspect redis-master | grep &lt;span style="color:#e6db74">&amp;#34;IP&amp;#34;&lt;/span> | egrep -o &lt;span style="color:#e6db74">&amp;#34;[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}&amp;#34;&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo $master_ip;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo &lt;span style="color:#e6db74">&amp;#34;------------------------------&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo &lt;span style="color:#e6db74">&amp;#34;slave1 IPAddress:&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>slave1_ip&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>docker inspect redis-slave1 | grep &lt;span style="color:#e6db74">&amp;#34;IP&amp;#34;&lt;/span> | egrep -o &lt;span style="color:#e6db74">&amp;#34;[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}&amp;#34;&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo $slave1_ip;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo &lt;span style="color:#e6db74">&amp;#34;------------------------------&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo &lt;span style="color:#e6db74">&amp;#34;slave2 IPAddress:&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>slave2_ip&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>docker inspect redis-slave2 | grep &lt;span style="color:#e6db74">&amp;#34;IP&amp;#34;&lt;/span> | egrep -o &lt;span style="color:#e6db74">&amp;#34;[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}&amp;#34;&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo $slave2_ip;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo &lt;span style="color:#e6db74">&amp;#34;------------------------------&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo &lt;span style="color:#e6db74">&amp;#34;master:&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>docker exec -it redis-master redis-cli info Replication | grep role
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo &lt;span style="color:#e6db74">&amp;#34;slave1:&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>docker exec -it redis-slave1 redis-cli info Replication | grep role
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo &lt;span style="color:#e6db74">&amp;#34;slave2:&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>docker exec -it redis-slave2 redis-cli info Replication | grep role&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>é€™å€‹æ˜¯æˆ‘è‡ªå·±æ‰€å¯«çš„è…³æœ¬ï¼Œå†ç­‰ç­‰æ¸¬è©¦æ™‚ï¼Œå¯ä»¥è©³ç´°çŸ¥é“ç›®å‰æœå‹™çš„è§’è‰²è½‰ç§»ç‹€æ³ã€‚&lt;/p>
&lt;br>
&lt;h2>æ¸¬è©¦&lt;span class="hx:absolute hx:-mt-20" id="æ¸¬è©¦">&lt;/span>
&lt;a href="#%e6%b8%ac%e8%a9%a6" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>æˆ‘å€‘å…ˆç”¨ docker-compose up ä¾†å•Ÿå‹• Docker-compose.yaml ï¼Œæ¥è‘—ä¸‹ sh redis.sh æŒ‡ä»¤ä¾†æŸ¥çœ‹å„æœå‹™çš„ IP ä½ç½®ä»¥åŠç›®å‰è§’è‰²ï¼š&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/redis/redis-sentinel-docker-compose/docker-compose-up-1.webp"
alt="å•Ÿå‹• Docker-compose.yaml" width="650">&lt;figcaption>
&lt;p>å•Ÿå‹• Docker-compose.yaml&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/redis/redis-sentinel-docker-compose/redis-sh-1.webp"
alt="ä½¿ç”¨ redis.sh æª¢æŸ¥ç›®å‰ IP åŠè§’è‰²" width="650">&lt;figcaption>
&lt;p>ä½¿ç”¨ redis.sh æª¢æŸ¥ç›®å‰ IP åŠè§’è‰²&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;p>æ¥ä¸‹ä¾†å…ˆä¿®æ”¹ docker-volume/php/index.php&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-php" data-lang="php">&lt;span style="display:flex;">&lt;span>$sentinel &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">array&lt;/span>(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">array&lt;/span>(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;host&amp;#39;&lt;/span> &lt;span style="color:#f92672">=&amp;gt;&lt;/span> &lt;span style="color:#e6db74">&amp;#39;192.168.208.4&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;port&amp;#39;&lt;/span> &lt;span style="color:#f92672">=&amp;gt;&lt;/span> &lt;span style="color:#ae81ff">6379&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;role&amp;#39;&lt;/span> &lt;span style="color:#f92672">=&amp;gt;&lt;/span> &lt;span style="color:#e6db74">&amp;#39;master&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">array&lt;/span>(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;host&amp;#39;&lt;/span> &lt;span style="color:#f92672">=&amp;gt;&lt;/span> &lt;span style="color:#e6db74">&amp;#39;192.168.208.5&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;port&amp;#39;&lt;/span> &lt;span style="color:#f92672">=&amp;gt;&lt;/span> &lt;span style="color:#ae81ff">6379&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;role&amp;#39;&lt;/span> &lt;span style="color:#f92672">=&amp;gt;&lt;/span> &lt;span style="color:#e6db74">&amp;#39;slave1&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">array&lt;/span>(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;host&amp;#39;&lt;/span> &lt;span style="color:#f92672">=&amp;gt;&lt;/span> &lt;span style="color:#e6db74">&amp;#39;192.168.208.6&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;port&amp;#39;&lt;/span> &lt;span style="color:#f92672">=&amp;gt;&lt;/span> &lt;span style="color:#ae81ff">6379&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;role&amp;#39;&lt;/span> &lt;span style="color:#f92672">=&amp;gt;&lt;/span> &lt;span style="color:#e6db74">&amp;#39;slave2&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>);&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>å°‡å„è‡ªçš„ IP å¸¶å…¥æ¸¬è©¦çš„ç¶²ç«™ä¸­ã€‚&lt;/p>
&lt;br>
&lt;p>å¯ä»¥ç€è¦½ &lt;code>test.com:8888&lt;/code> æ˜¯å¦æœ‰æ­£å¸¸æŠ“åˆ° redis çš„ master&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/redis/redis-sentinel-docker-compose/php-1.webp"
alt="test.com:8888 æ¸¬è©¦ç¶²ç«™" width="650">&lt;figcaption>
&lt;p>test.com:8888 æ¸¬è©¦ç¶²ç«™&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;p>å†ä¾†ä¿®æ”¹ sentinel å…§çš„ sentinel(1ã€2ã€3).conf æª”æ¡ˆ&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;pre>&lt;code>port 26379
#è¨­å®šè¦ç›£æ§çš„ Masterï¼Œæœ€å¾Œçš„ 2 ä»£è¡¨åˆ¤å®šå®¢è§€ä¸‹ç·šæ‰€éœ€çš„å“¨å…µæ•¸
sentinel monitor mymaster 192.168.208.4 6379 2
#å“¨å…µ Ping ä¸åˆ° Master è¶…éæ­¤æ¯«ç§’æ•¸æœƒèªå®šä¸»è§€ä¸‹ç·š
sentinel down-after-milliseconds mymaster 5000
#failover è¶…éæ¬¡æ¯«ç§’æ•¸å³ä»£è¡¨ failover å¤±æ•—
sentinel failover-timeout mymaster 180000&lt;/code>&lt;/pre>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>å°‡è¦ç›£æ§çš„ Master IP å¸¶å…¥ sentinel monitor mymasterã€‚&lt;/p>
&lt;br>
&lt;p>å†å•Ÿå‹• sentinel/Docker-compose.yaml&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/redis/redis-sentinel-docker-compose/docker-compose-up-2.webp"
alt="å•Ÿå‹• Docker-compose.yaml" width="700">&lt;figcaption>
&lt;p>å•Ÿå‹• Docker-compose.yaml&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;p>æ¥ä¸‹ä¾†æˆ‘å€‘ä¾†æ¨¡æ“¬å‡è¨­ Master æœå‹™ä¸­æ–·å¾Œï¼Œsentinel æœƒç™¼ç”Ÿä»€éº¼äº‹æƒ…ï¼š&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>docker stop redis-master&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;p>ä¸‹å®ŒæŒ‡ä»¤å¾Œï¼Œå†ä½¿ç”¨ &lt;code>sh redis.sh&lt;/code> ä¾†çœ‹çœ‹ç›®å‰çš„ role ç‹€æ…‹ï¼š&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/redis/redis-sentinel-docker-compose/redis-sh-2.webp"
alt="ä½¿ç”¨ redis.sh æª¢æŸ¥ç›®å‰ IP åŠè§’è‰²" width="700">&lt;figcaption>
&lt;p>ä½¿ç”¨ redis.sh æª¢æŸ¥ç›®å‰ IP åŠè§’è‰²&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;p>ç™¼ç¾å·²ç¶“æŠ“ä¸åˆ° master IP ä»¥åŠä»–çš„è§’è‰²ã€‚&lt;/p>
&lt;br>
&lt;p>ç­‰å¾…ä¸€ä¸‹å­å¾Œï¼Œé‡æ–°ä¸‹ &lt;code>sh redis.sh&lt;/code> ä¾†çœ‹ç›®å‰çš„ role ç‹€æ…‹ï¼š&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/redis/redis-sentinel-docker-compose/redis-sh-3.webp"
alt="ä½¿ç”¨ redis.sh æª¢æŸ¥ç›®å‰ IP åŠè§’è‰²" width="700">&lt;figcaption>
&lt;p>ä½¿ç”¨ redis.sh æª¢æŸ¥ç›®å‰ IP åŠè§’è‰²&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;p>å°±æœƒç™¼ç¾å·²ç¶“å°‡ master è½‰ç§»åˆ°åŸ slave1ã€‚&lt;/p>
&lt;br>
&lt;p>é‚£æˆ‘å€‘ä¾†çœ‹ä¸€ä¸‹ sentinel åœ¨èƒŒå¾Œåšäº†å“ªäº›äº‹æƒ…ï¼š&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/redis/redis-sentinel-docker-compose/sentinal-1.webp"
alt="åˆ¤æ–·æ˜¯å¦ä¸»è§€ä¸‹ç·šåŠå®¢è§€ä¸‹ç·šï¼Œä¸¦ç™¼èµ·æŠ•ç¥¨" width="1200">&lt;figcaption>
&lt;p>åˆ¤æ–·æ˜¯å¦ä¸»è§€ä¸‹ç·šåŠå®¢è§€ä¸‹ç·šï¼Œä¸¦ç™¼èµ·æŠ•ç¥¨&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;p>å¯ä»¥çœ‹åˆ°ä¸‰å€‹å“¨å…µéƒ½èªç‚º master ç‚º ä¸»è§€ä¸‹ç·š (sdown)ï¼Œé€™æ™‚ sentinel-2 å°±èªå®šç‚º å®¢è§€ä¸‹ç·š (odown)ï¼Œä¸¦ç™¼èµ·æŠ•ç¥¨è¦æ±‚æˆç‚ºé ˜é ­å“¨å…µã€‚&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/redis/redis-sentinel-docker-compose/sentinal-2.webp"
alt="é€²è¡Œé€ç¥¨ï¼Œç¢ºèªèª°ç•¶é¸" width="1200">&lt;figcaption>
&lt;p>é€²è¡Œé€ç¥¨ï¼Œç¢ºèªèª°ç•¶é¸&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;p>æˆ‘å€‘å¯ä»¥çœ‹åˆ° Sentinel2 å’Œ Sentinel3 éƒ½æŠ•çµ¦ Sentinel2ï¼Œæ‰€ä»¥æœ€å¾Œ Sentinel2 ç•¶é¸ã€‚&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/redis/redis-sentinel-docker-compose/sentinal-3.webp"
alt="é ˜é ­å“¨å…µé¸å®šæ–° master" width="1200">&lt;figcaption>
&lt;p>é ˜é ­å“¨å…µé¸å®šæ–° master&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;p>æ¥è‘— sentinel2 é¸å‡º redis-slave1 (192.168.208.5:6379) ä½œç‚º Master ï¼Œä¸¦ä¸”ä½¿ç”¨ &lt;code>failover-state-send-slaveof-noone&lt;/code> ä¾†å°‡ redis-slave1 è§£é™¤ Slave ç‹€æ…‹è®Šæˆç¨ç«‹çš„ masterï¼Œéš¨å¾Œå°‡ redis-slave1 å‡æˆ masterã€‚&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/redis/redis-sentinel-docker-compose/sentinal-4.webp"
alt="è¨­å®š master ä¸¦ä¿®æ”¹åŸ master è®Šæˆ slave" width="1200">&lt;figcaption>
&lt;p>è¨­å®š master ä¸¦ä¿®æ”¹åŸ master è®Šæˆ slave&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;p>è¨­å®šå®Œæ–°çš„ Master å¾Œï¼ŒSentinel2 è®“åŸæœ¬çš„ Master è½‰ç‚º Slaveï¼Œä¸¦ä¸”è®“ redis-slave2(192.168.208.6:6379) æŒ‡å‘æ–°çš„ Masterã€‚æœ€å¾Œ Sentinel1 å’Œ Sentinel3 é–‹å§‹å¾ Sentinel2 å–å¾—è¨­å®šç„¶å¾Œæ›´æ–°è‡ªå·±çš„è¨­å®šï¼Œè‡³æ­¤æ•´å€‹æ•…éšœè½‰ç§»å°±å®Œæˆäº†ã€‚&lt;/p>
&lt;br>
&lt;p>æœ€å¾Œæˆ‘å€‘ä¾†çœ‹ä¸€ä¸‹æˆ‘å€‘ç”¨ PHP é€£ç·šçš„æ¸¬è©¦ï¼š&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/redis/redis-sentinel-docker-compose/php-2.webp"
alt="é€£ç·š master" width="700">&lt;figcaption>
&lt;p>é€£ç·š master&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;p>å°±æœƒç™¼ç¾ï¼Œå·²ç¶“ slave1 è®Šæˆç¾åœ¨çš„ masterã€‚&lt;/p>
&lt;br>
&lt;p>é‚£æˆ‘å€‘æœ€å¾ŒæŠŠåŸæœ¬çš„ master æ¢å¾©ï¼Œçœ‹çœ‹æœƒç™¼ç”Ÿä»€éº¼äº‹æƒ…ï¼š&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/redis/redis-sentinel-docker-compose/php-3.webp"
alt="é€£ç·š master" width="700">&lt;figcaption>
&lt;p>é€£ç·š master&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;p>æœƒç™¼ç¾å› ç‚ºè©²å•Ÿå‹• masterï¼Œæ‰€ä»¥ä»–é‚„èªç‚ºä»–æ˜¯ masterï¼Œä½†éä¸€ä¸‹ä¸‹ï¼Œåœ¨æŸ¥çœ‹å°±æ­£å¸¸é¡¯ç¤º slave1 ç‚º masterï¼ŒèˆŠçš„ master å°±è®Šæˆ slaveã€‚&lt;/p>
&lt;br>
&lt;ul>
&lt;li>Redis å¸¸è¦‹éŒ¯èª¤å•é¡Œ&lt;/li>
&lt;/ul>
&lt;p>åœ¨å­¸ç¿’çš„æ™‚å€™ï¼Œæœ‰ç™¼ç¾å•Ÿå‹• sentinel çš„æ™‚å€™ï¼Œæœƒè·³å‡º &lt;code>WARNING: Sentinel was not able to save the new configuration on disk!!!: Permission denied&lt;/code> éŒ¯èª¤è¨Šæ¯ï¼Œå¾Œä¾†å†å»ç¿» redis github çš„ issus æ‰ç™¼ç¾ä½œè€…ä¹Ÿæœ‰ç™¼ç¾é€™å€‹å•é¡Œï¼Œä¸”å·²ç¶“ä¿®å¾©äº†ï¼Œä¸»è¦æ˜¯æ¬Šé™çš„å•é¡Œï¼Œä»¥åŠè¦æ›è¼‰ç›®éŒ„è€Œé conf æª”æ¡ˆã€‚&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/redis/redis-sentinel-docker-compose/bug.webp"
alt="redis WARNING éŒ¯èª¤è¨Šæ¯ github issus " width="700">&lt;figcaption>
&lt;p>redis WARNING éŒ¯èª¤è¨Šæ¯ &lt;a href="https://github.com/redis/redis/issues/8172"target="_blank" rel="noopener">github issus&lt;svg class="hx:inline hx:rtl:rotate-270 hx:align-baseline" height="1em" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
&lt;path d="m9.1716 7.7574h7.0711m0 0v7.0711m0-7.0711-8.4853 8.4853" stroke-linecap="round" stroke-linejoin="round"/>
&lt;/svg>&lt;/a>&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;h2>åƒè€ƒè³‡æ–™&lt;span class="hx:absolute hx:-mt-20" id="åƒè€ƒè³‡æ–™">&lt;/span>
&lt;a href="#%e5%8f%83%e8%80%83%e8%b3%87%e6%96%99" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>Redis (å…­) - ä¸»å¾è¤‡è£½ã€å“¨å…µèˆ‡å¢é›†æ¨¡å¼ï¼š&lt;a href="https://blog.tienyulin.com/redis-master-slave-replication-sentinel-cluster/"target="_blank" rel="noopener">https://blog.tienyulin.com/redis-master-slave-replication-sentinel-cluster/&lt;svg class="hx:inline hx:rtl:rotate-270 hx:align-baseline" height="1em" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
&lt;path d="m9.1716 7.7574h7.0711m0 0v7.0711m0-7.0711-8.4853 8.4853" stroke-linecap="round" stroke-linejoin="round"/>
&lt;/svg>&lt;/a>&lt;/p></description></item><item><title>Redis ä»‹ç´¹</title><link>https://pin-yi.me/blog/redis/redis-introduce/</link><pubDate>Tue, 08 Mar 2022 00:00:00 +0000</pubDate><guid>https://pin-yi.me/blog/redis/redis-introduce/</guid><description>
&lt;h2>ä»€éº¼æ˜¯ Redis ?&lt;span class="hx:absolute hx:-mt-20" id="ä»€éº¼æ˜¯-redis-">&lt;/span>
&lt;a href="#%e4%bb%80%e9%ba%bc%e6%98%af-redis-" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>Redis å…¨åæ˜¯ Remote Dictionary Server ï¼Œæ˜¯å¿«é€Ÿçš„é–‹æºè¨˜æ†¶é«”éµå€¼è³‡æ–™åº« (keys-value database)ã€‚&lt;/p>
&lt;p>ç”±æ–¼ Redis çš„å›æ‡‰æ™‚é–“æ¥µçŸ­ï¼Œä½æ–¼ä¸€æ¯«ç§’ï¼Œå¯ä»¥è®“éŠæˆ²ã€é‡‘èæœå‹™ã€é†«ç™‚ä¿å¥ç­‰å³æ™‚æ‡‰ç”¨æœå‹™æ¯ç§’è™•ç†å¹¾ç™¾è¬å€‹è«‹æ±‚ã€‚&lt;/p>
&lt;br>
&lt;h3>Redis çš„å„ªå‹¢&lt;span class="hx:absolute hx:-mt-20" id="redis-çš„å„ªå‹¢">&lt;/span>
&lt;a href="#redis-%e7%9a%84%e5%84%aa%e5%8b%a2" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;h4>æ•ˆèƒ½&lt;span class="hx:absolute hx:-mt-20" id="æ•ˆèƒ½">&lt;/span>
&lt;a href="#%e6%95%88%e8%83%bd" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h4>&lt;p>æ‰€æœ‰çš„ Redis è³‡æ–™éƒ½æ˜¯å­˜æ”¾åœ¨è¨˜æ†¶é«”ä¸­ï¼Œé€²è€Œå¯¦ç¾ä½å»¶é²å’Œé«˜å‚³è¼¸é‡çš„è³‡æ–™å­˜å–ã€‚&lt;/p>
&lt;br>
&lt;h4>å½ˆæ€§çš„è³‡æ–™çµæ§‹&lt;span class="hx:absolute hx:-mt-20" id="å½ˆæ€§çš„è³‡æ–™çµæ§‹">&lt;/span>
&lt;a href="#%e5%bd%88%e6%80%a7%e7%9a%84%e8%b3%87%e6%96%99%e7%b5%90%e6%a7%8b" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h4>&lt;p>ä¸€èˆ¬çš„éµå€¼è³‡æ–™åº«æä¾›çš„è³‡æ–™çµæ§‹æœ‰é™ï¼Œè€Œ Redis æä¾›å¤šæ¨£åŒ–çš„è³‡æ–™çµæ§‹ä¾†æ»¿è¶³æœå‹™çš„éœ€æ±‚ï¼ŒåŒ…å«å­—ä¸²(Strings)ã€å“ˆå¸Œ(Hashes)ã€åˆ—è¡¨(Lists)ã€é›†åˆ(Sets)ã€æœ‰åºé›†åˆ(Zset)ã€‚(å¾ŒçºŒæœƒæœ‰è©³ç´°ä»‹ç´¹)&lt;/p>
&lt;br>
&lt;h4>ç°¡å–®æ˜“ç”¨&lt;span class="hx:absolute hx:-mt-20" id="ç°¡å–®æ˜“ç”¨">&lt;/span>
&lt;a href="#%e7%b0%a1%e5%96%ae%e6%98%93%e7%94%a8" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h4>&lt;p>Redis å¯ä»¥ç”¨æ›´å°‘ã€æ›´ç²¾ç°¡çš„æŒ‡ä»¤ä¾†å–ä»£å‚³çµ±è¤‡é›œçš„ç¨‹å¼ç¢¼ï¼Œå¯ä»¥å­˜å–æ‡‰ç”¨ç¨‹å¼çš„è³‡æ–™ã€‚ä¸¦æ”¯æ´ Javaã€Pythonã€PHPã€C/C++ã€C#ã€JavaScriptã€Node.jsã€Rubyã€Rã€GOã€‚&lt;/p>
&lt;br>
&lt;h4>è¤‡å¯«å’ŒæŒä¹…æ€§&lt;span class="hx:absolute hx:-mt-20" id="è¤‡å¯«å’ŒæŒä¹…æ€§">&lt;/span>
&lt;a href="#%e8%a4%87%e5%af%ab%e5%92%8c%e6%8c%81%e4%b9%85%e6%80%a7" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h4>&lt;p>Redis æ¡ä¸»è¦-è¤‡æœ¬æ¶æ§‹ï¼Œæ”¯æ´éåŒæ­¥è¤‡å¯«ï¼Œå¯ä»¥å°‡è³‡æ–™è¤‡å¯«åˆ°å¤šå€‹è¤‡æœ¬ä¼ºæœå™¨ã€‚ä¸ä½†å¯ä»¥æå‡è®€å–æ•ˆèƒ½(å› ç‚ºè«‹æ±‚å¯åˆ†å‰²åˆ°å¤šéƒ¨ä¼ºæœå™¨)ï¼Œé‚„å¯ä»¥å†ä¸»æœå‹™å™¨ç™¼ç”Ÿæ•…éšœæ™‚å¿«é€Ÿæ¢å¾©ã€‚è‡³æ–¼æŒä¹…æ€§ï¼ŒRedis æ”¯æ´æ™‚é–“é»å‚™ä»½ï¼Œæœƒå°‡è³‡æ–™è¤‡è£½åˆ°ç£ç¢Ÿä¸­ã€‚&lt;/p>
&lt;br>
&lt;h2>å¯¦éš›æ“ä½œ&lt;span class="hx:absolute hx:-mt-20" id="å¯¦éš›æ“ä½œ">&lt;/span>
&lt;a href="#%e5%af%a6%e9%9a%9b%e6%93%8d%e4%bd%9c" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;h3>å®‰è£ Redis&lt;span class="hx:absolute hx:-mt-20" id="å®‰è£-redis">&lt;/span>
&lt;a href="#%e5%ae%89%e8%a3%9d-redis" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>ä½¿ç”¨ Homebrew ä¾†å®‰è£ Redis (Mac OSï¼š11.6)&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>$ brew install redis&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;p>å®‰è£å¥½ç”¨ -v æª¢æŸ¥ç‰ˆæœ¬&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>$ redis-server -v
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Redis server v&lt;span style="color:#f92672">=&lt;/span>6.2.6 sha&lt;span style="color:#f92672">=&lt;/span>00000000:0 malloc&lt;span style="color:#f92672">=&lt;/span>libc bits&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">64&lt;/span> build&lt;span style="color:#f92672">=&lt;/span>c6f3693d1aced7d9
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ redis-cli -v
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>redis-cli 6.2.6&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;p>ä¸€å€‹æ˜¯ Serverã€å¦ä¸€å€‹æ˜¯ Cliï¼Œæ‰€ä»¥åœ¨ç¨å¾Œæ¸¬è©¦æ™‚ï¼Œéœ€è¦é–‹å•Ÿå…©å€‹ Terminal ä¾†åŸ·è¡Œæ­ï¼&lt;/p>
&lt;br>
&lt;h3>åŸ·è¡Œ Redis&lt;span class="hx:absolute hx:-mt-20" id="åŸ·è¡Œ-redis">&lt;/span>
&lt;a href="#%e5%9f%b7%e8%a1%8c-redis" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;h4>Server&lt;span class="hx:absolute hx:-mt-20" id="server">&lt;/span>
&lt;a href="#server" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h4>&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>$ redis-server
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>39403:C &lt;span style="color:#ae81ff">08&lt;/span> Mar &lt;span style="color:#ae81ff">2022&lt;/span> 11:13:17.500 &lt;span style="color:#75715e"># oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>39403:C &lt;span style="color:#ae81ff">08&lt;/span> Mar &lt;span style="color:#ae81ff">2022&lt;/span> 11:13:17.500 &lt;span style="color:#75715e"># Redis version=6.2.6, bits=64, commit=00000000, modified=0, pid=39403, just started&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>39403:C &lt;span style="color:#ae81ff">08&lt;/span> Mar &lt;span style="color:#ae81ff">2022&lt;/span> 11:13:17.500
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>39403:M &lt;span style="color:#ae81ff">08&lt;/span> Mar &lt;span style="color:#ae81ff">2022&lt;/span> 11:13:17.501 * Increased maximum number of open files to &lt;span style="color:#ae81ff">10032&lt;/span> &lt;span style="color:#f92672">(&lt;/span>it was originally set to 256&lt;span style="color:#f92672">)&lt;/span>.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>39403:M &lt;span style="color:#ae81ff">08&lt;/span> Mar &lt;span style="color:#ae81ff">2022&lt;/span> 11:13:17.501 * monotonic clock: POSIX clock_gettime
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> _._
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> _.-&lt;span style="color:#e6db74">``&lt;/span>__ &lt;span style="color:#e6db74">&amp;#39;&amp;#39;&lt;/span>-._
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> _.-&lt;span style="color:#e6db74">``&lt;/span> &lt;span style="color:#e6db74">`&lt;/span>. &lt;span style="color:#e6db74">`&lt;/span>_. &lt;span style="color:#e6db74">&amp;#39;&amp;#39;&lt;/span>-._ Redis 6.2.6 &lt;span style="color:#f92672">(&lt;/span>00000000/0&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#ae81ff">64&lt;/span> bit
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> .-&lt;span style="color:#e6db74">``&lt;/span> .-&lt;span style="color:#e6db74">```&lt;/span>. &lt;span style="color:#e6db74">```&lt;/span>&lt;span style="color:#ae81ff">\/&lt;/span> _.,_ &lt;span style="color:#e6db74">&amp;#39;&amp;#39;&lt;/span>-._
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">(&lt;/span> &lt;span style="color:#e6db74">&amp;#39; , .-` | `, ) Running in standalone mode
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> |`-._`-...-` __...-.``-._|&amp;#39;&lt;/span>&lt;span style="color:#e6db74">`&lt;/span> _.-&lt;span style="color:#e6db74">&amp;#39;| Port: 6379
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> | `-._ `._ / _.-&amp;#39;&lt;/span> | PID: &lt;span style="color:#ae81ff">39403&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">`&lt;/span>-._ &lt;span style="color:#e6db74">`&lt;/span>-._ &lt;span style="color:#e6db74">`&lt;/span>-./ _.-&lt;span style="color:#e6db74">&amp;#39; _.-&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> |&lt;span style="color:#e6db74">`&lt;/span>-._&lt;span style="color:#e6db74">`&lt;/span>-._ &lt;span style="color:#e6db74">`&lt;/span>-.__.-&lt;span style="color:#e6db74">&amp;#39; _.-&amp;#39;&lt;/span>_.-&lt;span style="color:#e6db74">&amp;#39;|
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> | `-._`-._ _.-&amp;#39;&lt;/span>_.-&lt;span style="color:#e6db74">&amp;#39; | https://redis.io
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> `-._ `-._`-.__.-&amp;#39;&lt;/span>_.-&lt;span style="color:#e6db74">&amp;#39; _.-&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> |&lt;span style="color:#e6db74">`&lt;/span>-._&lt;span style="color:#e6db74">`&lt;/span>-._ &lt;span style="color:#e6db74">`&lt;/span>-.__.-&lt;span style="color:#e6db74">&amp;#39; _.-&amp;#39;&lt;/span>_.-&lt;span style="color:#e6db74">&amp;#39;|
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> | `-._`-._ _.-&amp;#39;&lt;/span>_.-&lt;span style="color:#e6db74">&amp;#39; |
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> `-._ `-._`-.__.-&amp;#39;&lt;/span>_.-&lt;span style="color:#e6db74">&amp;#39; _.-&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">`&lt;/span>-._ &lt;span style="color:#e6db74">`&lt;/span>-.__.-&lt;span style="color:#e6db74">&amp;#39; _.-&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">`&lt;/span>-._ _.-&lt;span style="color:#e6db74">&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> `-.__.-&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>39403:M &lt;span style="color:#ae81ff">08&lt;/span> Mar &lt;span style="color:#ae81ff">2022&lt;/span> 11:13:17.503 &lt;span style="color:#75715e"># Server initialized&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>39403:M &lt;span style="color:#ae81ff">08&lt;/span> Mar &lt;span style="color:#ae81ff">2022&lt;/span> 11:13:17.503 * Ready to accept connections&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>å¦‚æœå‡ºç¾ä¸Šé¢ç¬¦è™Ÿï¼Œå°±ä»£è¡¨ Server å·²ç¶“å•Ÿå‹•ï¼Œæ¥ä¸‹ä¾†å†é–‹å¦ä¸€å€‹ Terminal ä¾†åŸ·è¡Œ Cliã€‚&lt;/p>
&lt;br>
&lt;h4>Cli&lt;span class="hx:absolute hx:-mt-20" id="cli">&lt;/span>
&lt;a href="#cli" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h4>&lt;p>é–‹å•Ÿå¾Œï¼Œåœ¨ä¸‹ä¸€å€‹ &lt;code>ping&lt;/code> æŒ‡ä»¤ï¼Œè©²æŒ‡ä»¤ç”¨æ–¼æª¢æ¸¬ redis æœå‹™æ˜¯å¦å•Ÿå‹•ï¼Œæ­£å¸¸æœƒé¡¯ç¤º &lt;code>pong&lt;/code>ã€‚&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>$ redis-cli
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; ping
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>PONG&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;p>æ¥ä¸‹ä¾†ï¼Œæˆ‘å€‘éƒ½æœƒåœ¨ Cli è¦–çª—åšæ¸¬è©¦ï¼Œæœƒè©³ç´°ä»‹ç´¹æ¯ä¸€å€‹è³‡æ–™å‹æ…‹ä»¥åŠå…¶é©åˆæƒ…å¢ƒã€‚&lt;/p>
&lt;p>å¾ŒçºŒæœƒä½¿ç”¨ Cli ç•«é¢ä¾†åšç¤ºç¯„ï¼Œä½†ä¹Ÿæœ‰ä¸éŒ¯çš„åœ–å½¢åŒ–å·¥å…·å¯ä»¥ç”¨æ–¼ redis ä¸Š &lt;a href="https://github.com/qishibo/AnotherRedisDesktopManager"target="_blank" rel="noopener">AnotherRedisDesktopManager&lt;svg class="hx:inline hx:rtl:rotate-270 hx:align-baseline" height="1em" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
&lt;path d="m9.1716 7.7574h7.0711m0 0v7.0711m0-7.0711-8.4853 8.4853" stroke-linecap="round" stroke-linejoin="round"/>
&lt;/svg>&lt;/a> å¤§å®¶å¯ä»¥å»è©¦ç”¨çœ‹çœ‹~&lt;/p>
&lt;br>
&lt;h3>è³‡æ–™å‹æ…‹&lt;span class="hx:absolute hx:-mt-20" id="è³‡æ–™å‹æ…‹">&lt;/span>
&lt;a href="#%e8%b3%87%e6%96%99%e5%9e%8b%e6%85%8b" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;h4>å­—ä¸² (Strings)&lt;span class="hx:absolute hx:-mt-20" id="å­—ä¸²-strings">&lt;/span>
&lt;a href="#%e5%ad%97%e4%b8%b2-strings" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h4>&lt;h5>setã€get&lt;span class="hx:absolute hx:-mt-20" id="setget">&lt;/span>
&lt;a href="#setget" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h5>&lt;p>é€™æ˜¯æœ€åŸºæœ¬çš„å‹æ…‹ï¼Œå¯ä»¥å­˜æ”¾ binary, string, integer, floatè³‡æ–™ï¼Œä¸€å€‹ Strings çš„æ¬„ä½ï¼Œæœ€é«˜å¯å„²å­˜ 512 Megabytesï¼Œé€™è£¡æœƒç”¨åˆ°çš„æŒ‡ä»¤æ˜¯ &lt;code>set&lt;/code>ã€&lt;code>get&lt;/code> ï¼Œåˆ†åˆ¥ç”¨ä¾†å„²å­˜ä»¥åŠè®€å–å­—ä¸²ï¼Œæˆ‘å€‘ä¾†çœ‹ä¸€ä¸‹ç¯„ä¾‹å§ã€‚&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; set string hello-world
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>OK
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; get string
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">&amp;#34;hello-world&amp;#34;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>æˆ‘å€‘å…ˆç”¨ &lt;code>set&lt;/code> å°‡ hello-world å­—ä¸²å­˜åˆ° string é€™å€‹ keyï¼Œå†ç”¨ &lt;code>get&lt;/code> é¡¯ç¤º string è£¡é¢çš„ valueã€‚&lt;/p>
&lt;br>
&lt;h5>incrã€decr&lt;span class="hx:absolute hx:-mt-20" id="incrdecr">&lt;/span>
&lt;a href="#incrdecr" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h5>&lt;p>Redis é‚„æœ‰ä¸€äº›æ–¹ä¾¿çš„æŒ‡ä»¤ï¼Œå¦‚æœå­˜å…¥çš„ value æ˜¯ integer å‹æ…‹ï¼Œå°±å¯ä»¥ä½¿ç”¨ &lt;code>incr&lt;/code> ã€&lt;code>decr&lt;/code> ï¼Œä¾†ç´¯åŠ èˆ‡ç´¯æ¸›ã€‚åˆ†åˆ¥ä»£è¡¨ç´¯åŠ ï¼Œåƒæ˜¯æˆ‘å€‘çš„ ++ ï¼Œä»¥åŠç´¯æ¸›ï¼Œåƒæ˜¯æˆ‘å€‘çš„ - -ã€‚&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; set num &lt;span style="color:#ae81ff">10&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>OK
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; incr num
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">(&lt;/span>integer&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#ae81ff">11&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; incr num
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">(&lt;/span>integer&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#ae81ff">12&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; decr num
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">(&lt;/span>integer&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#ae81ff">11&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; decr num
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">(&lt;/span>integer&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#ae81ff">10&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;h5>append&lt;span class="hx:absolute hx:-mt-20" id="append">&lt;/span>
&lt;a href="#append" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h5>&lt;p>å¦‚æœ key å·²ç¶“å­˜åœ¨ä¸¦ä¸”å®ƒæ˜¯å­—ä¸²ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code>append&lt;/code> æŒ‡ä»¤ï¼Œæœƒå¾å­—ä¸²æœ€å¾Œé¢é™„åŠ é€²å»ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œå‰‡æœƒç›´æ¥å»ºç«‹ä¸€å€‹ï¼Œä¸¦æŠŠå€¼å­˜é€²å»ã€‚&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; exists str
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">(&lt;/span>integer&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; append str &lt;span style="color:#e6db74">&amp;#34;Hello&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">(&lt;/span>integer&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#ae81ff">5&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; append str &lt;span style="color:#e6db74">&amp;#34; World~&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">(&lt;/span>integer&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#ae81ff">12&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; get str
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">&amp;#34;Hello World~&amp;#34;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;h5>getrange&lt;span class="hx:absolute hx:-mt-20" id="getrange">&lt;/span>
&lt;a href="#getrange" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h5>&lt;p>å¯ä»¥è¼¸å…¥å­—ä¸²çš„é–‹å§‹ä½å…ƒèˆ‡çµæŸä½å…ƒï¼Œæœƒä¾ç…§ä½ è¼¸å…¥çš„å»é¡¯ç¤ºå­—ä¸²ã€‚æˆ‘æŠŠå®ƒç†è§£æˆæ˜¯é™£åˆ—çš„ key èˆ‡ value çš„é—œä¿‚ã€‚&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; set a &lt;span style="color:#e6db74">&amp;#34;This is a string&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>OK
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; getrange a &lt;span style="color:#ae81ff">0&lt;/span> &lt;span style="color:#ae81ff">3&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">&amp;#34;This&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; getrange a -3 -1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">&amp;#34;ing&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; getrange a &lt;span style="color:#ae81ff">0&lt;/span> -1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">&amp;#34;This is a string&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; getrange a &lt;span style="color:#ae81ff">10&lt;/span> &lt;span style="color:#ae81ff">100&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">&amp;#34;string&amp;#34;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;h5>mset&lt;span class="hx:absolute hx:-mt-20" id="mset">&lt;/span>
&lt;a href="#mset" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h5>&lt;p>æˆ‘å€‘ä¹Ÿå¯ä»¥è¨­å®šçš„æ™‚å€™ï¼ŒæŠŠè¦è¨­å®šçš„å€¼éƒ½ä¸€èµ·è¨­å®šï¼Œåªéœ€è¦ä½¿ç”¨ &lt;code>mset&lt;/code> å°±å¯ä»¥é”æˆã€‚&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; mset &lt;span style="color:#ae81ff">1&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span> &lt;span style="color:#ae81ff">2&lt;/span> &lt;span style="color:#ae81ff">2&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>OK
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; get &lt;span style="color:#ae81ff">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">&amp;#34;1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; get &lt;span style="color:#ae81ff">2&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">&amp;#34;2&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; get &lt;span style="color:#ae81ff">3&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">(&lt;/span>nil&lt;span style="color:#f92672">)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>å¦‚æœç”¨ &lt;code>get&lt;/code> é¡¯ç¤ºè³‡æ–™ï¼Œè‹¥æ²’æœ‰å°æ‡‰çš„ key ï¼Œæœƒé¡¯ç¤º (nil)ã€‚&lt;/p>
&lt;br>
&lt;h5>å­—ä¸²å‹æ…‹é©åˆå ´æ™¯&lt;span class="hx:absolute hx:-mt-20" id="å­—ä¸²å‹æ…‹é©åˆå ´æ™¯">&lt;/span>
&lt;a href="#%e5%ad%97%e4%b8%b2%e5%9e%8b%e6%85%8b%e9%81%a9%e5%90%88%e5%a0%b4%e6%99%af" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h5>&lt;p>&lt;strong>å­—ä¸²(strings) å‹æ…‹é©åˆç”¨æ–¼åœ–ç‰‡å¿«å– ï¼ˆä½¿ç”¨binaryï¼‰ã€ç´¯è¨ˆæ¬¡æ•¸ã€è§€çœ‹ç´¯è¨ˆæ¬¡æ•¸&lt;/strong>&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/redis/redis-introduce/string.webp"
alt="String é©ç”¨å ´æ™¯åœ–" width="550">&lt;figcaption>
&lt;p>String é©ç”¨å ´æ™¯åœ–&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;h4>å“ˆå¸Œ (Hashes)&lt;span class="hx:absolute hx:-mt-20" id="å“ˆå¸Œ-hashes">&lt;/span>
&lt;a href="#%e5%93%88%e5%b8%8c-hashes" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h4>&lt;p>å¯ä»¥æŠŠä»–æƒ³åƒæˆäºŒç¶­é™£åˆ—ï¼Œæ‡‰è©²æœƒæ¯”è¼ƒå¥½ç†è§£ï¼Œæˆ‘ç¶²è·¯ä¸Šæ‰¾äº†ä¸€å¼µåœ–ï¼Œæ‡‰è©²æœƒæ¯”è¼ƒæ¸…æ¥šï¼&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/redis/redis-introduce/hash.webp"
alt="Hashes ç¤ºæ„åœ– (Redis åŸºæœ¬è³‡æ–™å½¢æ…‹ )" width="500">&lt;figcaption>
&lt;p>Hashes ç¤ºæ„åœ– (&lt;a href="https://blog.judysocute.com/2020/10/04/redis-%E5%9F%BA%E6%9C%AC%E8%B3%87%E6%96%99%E5%BD%A2%E6%85%8B/"target="_blank" rel="noopener">Redis åŸºæœ¬è³‡æ–™å½¢æ…‹&lt;svg class="hx:inline hx:rtl:rotate-270 hx:align-baseline" height="1em" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
&lt;path d="m9.1716 7.7574h7.0711m0 0v7.0711m0-7.0711-8.4853 8.4853" stroke-linecap="round" stroke-linejoin="round"/>
&lt;/svg>&lt;/a>)&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;p>Hashes æ˜¯ç”¨ä¾†å­˜æ”¾ä¸€çµ„ç›¸åŒæ€§è³ªçš„è³‡æ–™ï¼Œé€™äº›è³‡æ–™ Hashes æˆ–æ˜¯ç‰©ä»¶çš„æŸä¸€å±¬æ€§ï¼Œèˆ‡ String è¼ƒç‚ºä¸åŒçš„æ˜¯ä»–å¯ä»¥å–å›å–®ä¸€å€‹æ¬„ä½è³‡æ–™ï¼Œä½† String å¿…é ˆå–å›æ‰€æœ‰è³‡æ–™ï¼Œå–®ä¸€å€‹ Key å¯ä»¥å­˜æ”¾2^32 - 1çš„è³‡æ–™æ¬„ä½ï¼Œ&lt;/p>
&lt;p>ä»–çš„è³‡æ–™å‹æ…‹æœ‰åƒæ˜¯ï¼Œä¸€å€‹ user001 è£¡é¢æ˜¯ä¸€å€‹ Hashesï¼ŒHashes è£¡é¢åˆæœƒå­˜æ”¾ nameã€phoneã€gender ï¼Œæˆ‘å€‘ä¾†å¯¦éš›æ“ä½œçœ‹çœ‹ã€‚&lt;/p>
&lt;br>
&lt;h5>hsetã€hget&lt;span class="hx:absolute hx:-mt-20" id="hsethget">&lt;/span>
&lt;a href="#hsethget" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h5>&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; hset student name ian phone &lt;span style="color:#ae81ff">0980123456&lt;/span> gender M
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">(&lt;/span>integer&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#ae81ff">3&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; hget student name
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">&amp;#34;ian&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; hget student phone
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">&amp;#34;0980123456&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; hget student gender
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">&amp;#34;M&amp;#34;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>Hashes çš„è©±è¦ä½¿ç”¨ &lt;code>hset&lt;/code>ã€&lt;code>hget&lt;/code> ä¾†å° Hashes åšå„²å­˜ä»¥åŠè®€å–ã€‚&lt;/p>
&lt;br>
&lt;h5>hgetall&lt;span class="hx:absolute hx:-mt-20" id="hgetall">&lt;/span>
&lt;a href="#hgetall" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h5>&lt;p>æƒ³è¦ä¸€æ¬¡é¡¯ç¤º Hashes è£¡é¢çš„ key è·Ÿ value ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code>hgetall&lt;/code> ä¾†é¡¯ç¤ºå…¨éƒ¨è³‡æ–™ã€‚&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; hset student name ian phone &lt;span style="color:#ae81ff">0980123456&lt;/span> gender M
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">(&lt;/span>integer&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#ae81ff">3&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; hgetall student
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>1&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;name&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>2&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;ian&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>3&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;phone&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>4&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;0980123456&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>5&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;gender&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>6&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;M&amp;#34;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;h5>hkeys&lt;span class="hx:absolute hx:-mt-20" id="hkeys">&lt;/span>
&lt;a href="#hkeys" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h5>&lt;p>æƒ³è¦å–®ç¨é¡¯ç¤º Hashes è£¡é¢çš„ key ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code>hkeys&lt;/code> ä¾†é¡¯ç¤ºã€‚&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; hset student name ian phone &lt;span style="color:#ae81ff">0980123456&lt;/span> gender M
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">(&lt;/span>integer&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#ae81ff">3&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; hkeys student
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>1&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;name&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>2&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;phone&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>3&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;gender&amp;#34;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;h5>hvals&lt;span class="hx:absolute hx:-mt-20" id="hvals">&lt;/span>
&lt;a href="#hvals" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h5>&lt;p>æƒ³è¦å–®ç¨é¡¯ç¤º Hashes è£¡é¢çš„ value ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code>hvals&lt;/code> ä¾†é¡¯ç¤ºã€‚&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; hset student name ian phone &lt;span style="color:#ae81ff">0980123456&lt;/span> gender M
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">(&lt;/span>integer&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#ae81ff">3&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; hvals student
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>1&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;ian&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>2&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;0980123456&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>3&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;M&amp;#34;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;h5>hlen&lt;span class="hx:absolute hx:-mt-20" id="hlen">&lt;/span>
&lt;a href="#hlen" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h5>&lt;p>æƒ³è¦é¡¯ç¤º Hashes è£¡é¢çš„ key é•·åº¦ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code>hlen &lt;/code> ä¾†é¡¯ç¤ºã€‚&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; hgetall student
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>1&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;name&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>2&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;ian&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>3&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;gender&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>4&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;M&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; hlen student
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">(&lt;/span>integer&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#ae81ff">2&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;h5>hincrby&lt;span class="hx:absolute hx:-mt-20" id="hincrby">&lt;/span>
&lt;a href="#hincrby" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h5>&lt;p>æƒ³è¦å¢åŠ  Hashes è£¡é¢çš„ value æ•´æ•¸ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code>hincrby &lt;/code> ä¾†æ–°å¢ã€‚&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; hset test a &lt;span style="color:#ae81ff">10&lt;/span> b &lt;span style="color:#ae81ff">20&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">(&lt;/span>integer&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#ae81ff">2&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; hincrby test a &lt;span style="color:#ae81ff">2&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">(&lt;/span>integer&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#ae81ff">12&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;h5>hdel&lt;span class="hx:absolute hx:-mt-20" id="hdel">&lt;/span>
&lt;a href="#hdel" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h5>&lt;p>æƒ³è¦åˆªé™¤ Hashes è£¡é¢çš„ keyï¼Œå¯ä»¥ä½¿ç”¨ &lt;code>hdel &lt;/code> ä¾†åˆªé™¤ã€‚&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; hset student name ian phone &lt;span style="color:#ae81ff">0980123456&lt;/span> gender M
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">(&lt;/span>integer&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#ae81ff">3&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; hdel student phone
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">(&lt;/span>integer&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; hgetall student
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>1&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;name&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>2&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;ian&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>3&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;gender&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>4&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;M&amp;#34;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;h5>å“ˆå¸Œå‹æ…‹é©åˆå ´æ™¯&lt;span class="hx:absolute hx:-mt-20" id="å“ˆå¸Œå‹æ…‹é©åˆå ´æ™¯">&lt;/span>
&lt;a href="#%e5%93%88%e5%b8%8c%e5%9e%8b%e6%85%8b%e9%81%a9%e5%90%88%e5%a0%b4%e6%99%af" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h5>&lt;p>&lt;strong>å“ˆå¸Œ(Hashes) å‹æ…‹é©åˆç”¨æ–¼æ¯æ¬¡åªéœ€è¦å–ç”¨ä¸€éƒ¨åˆ†çš„è³‡æ–™&lt;/strong>&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/redis/redis-introduce/hash-template.webp"
alt="Hashes é©ç”¨å ´æ™¯åœ–" width="550">&lt;figcaption>
&lt;p>Hashes é©ç”¨å ´æ™¯åœ–&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;h4>åˆ—è¡¨ (Lists)&lt;span class="hx:absolute hx:-mt-20" id="åˆ—è¡¨-lists">&lt;/span>
&lt;a href="#%e5%88%97%e8%a1%a8-lists" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h4>&lt;h5>lpushã€lrange&lt;span class="hx:absolute hx:-mt-20" id="lpushlrange">&lt;/span>
&lt;a href="#lpushlrange" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h5>&lt;p>Lists è³‡æ–™å‹æ…‹å¯ä»¥æƒ³åƒæˆç¨‹å¼èªè¨€ä¸­çš„Arrayç‰©ä»¶ã€‚Lists å–®ä¸€å€‹Keyå¯ä»¥å­˜æ”¾2^32 - 1ï¼Œé€™é‚Šæœƒä½¿ç”¨åˆ° &lt;code>lpush&lt;/code>ã€&lt;code>lrange&lt;/code> ä¾†å° &lt;code>Lists&lt;/code> åšå„²å­˜ä»¥åŠè®€å–ã€‚&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; lpush list2 a a b b c d e
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">(&lt;/span>integer&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#ae81ff">7&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; lrange list2 &lt;span style="color:#ae81ff">0&lt;/span> &lt;span style="color:#ae81ff">10&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>1&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;e&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>2&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;d&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>3&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;c&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>4&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;b&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>5&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;b&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>6&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;a&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>7&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;a&amp;#34;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;h5>rpush&lt;span class="hx:absolute hx:-mt-20" id="rpush">&lt;/span>
&lt;a href="#rpush" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h5>&lt;p>é™¤äº†å¾éšŠä¼é ­æ”¾å…¥è³‡æ–™ï¼Œä¹Ÿå¯ä»¥ç”¨ &lt;code>rpush&lt;/code> å¾éšŠä¼å°¾æ”¾å…¥è³‡æ–™ï¼Œå¦‚æœä½¿ç”¨ &lt;code>lrange&lt;/code> ä¾†é¡¯ç¤ºæ–¹å‘ä¹Ÿæœƒç›¸åæ­ã€‚&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; rpush list3 a a b b c d e
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">(&lt;/span>integer&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#ae81ff">7&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; lrange list3 &lt;span style="color:#ae81ff">0&lt;/span> &lt;span style="color:#ae81ff">10&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>1&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;a&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>2&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;a&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>3&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;b&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>4&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;b&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>5&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;c&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>6&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;d&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>7&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;e&amp;#34;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;h5>lpopã€rpop&lt;span class="hx:absolute hx:-mt-20" id="lpoprpop">&lt;/span>
&lt;a href="#lpoprpop" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h5>&lt;p>ä¹Ÿå¯ä»¥ä½¿ç”¨ &lt;code>lpop&lt;/code>ã€&lt;code>rpop&lt;/code> åˆ†åˆ¥å¾éšŠä¼é ­æˆ–å°¾å½ˆå‡ºä¸€ç­†è³‡æ–™ã€‚&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; rpush list3 a a b b c d e
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">(&lt;/span>integer&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#ae81ff">7&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; lpop list3
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">&amp;#34;a&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; rpop list3
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">&amp;#34;e&amp;#34;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;h5>lset&lt;span class="hx:absolute hx:-mt-20" id="lset">&lt;/span>
&lt;a href="#lset" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h5>&lt;p>å¯ä»¥ä½¿ç”¨ &lt;code>lset&lt;/code> ä¾†è¨­å®šæŒ‡å®šä½ç½®çš„è³‡æ–™ã€‚&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; lrange list3 &lt;span style="color:#ae81ff">0&lt;/span> &lt;span style="color:#ae81ff">2&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>1&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;a&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>2&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;b&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>3&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;c&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; lset list3 &lt;span style="color:#ae81ff">1&lt;/span> w
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>OK
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; lrange list3 &lt;span style="color:#ae81ff">0&lt;/span> &lt;span style="color:#ae81ff">2&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>1&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;a&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>2&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;w&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>3&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;c&amp;#34;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;h5>åˆ—è¡¨å‹æ…‹é©åˆå ´æ™¯&lt;span class="hx:absolute hx:-mt-20" id="åˆ—è¡¨å‹æ…‹é©åˆå ´æ™¯">&lt;/span>
&lt;a href="#%e5%88%97%e8%a1%a8%e5%9e%8b%e6%85%8b%e9%81%a9%e5%90%88%e5%a0%b4%e6%99%af" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h5>&lt;p>&lt;strong>åˆ—è¡¨(Lists) å‹æ…‹é©åˆç”¨æ–¼æ–‡ç« åˆ—è¡¨æˆ–è€…è³‡æ–™åˆ†é å±•ç¤ºçš„æ‡‰ç”¨&lt;/strong>&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/redis/redis-introduce/list.webp"
alt="Lists é©ç”¨å ´æ™¯åœ–" width="600">&lt;figcaption>
&lt;p>Lists é©ç”¨å ´æ™¯åœ–&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;h4>é›†åˆ (Sets)&lt;span class="hx:absolute hx:-mt-20" id="é›†åˆ-sets">&lt;/span>
&lt;a href="#%e9%9b%86%e5%90%88-sets" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h4>&lt;p>å…¶å¯¦è·Ÿ Lists ä¸€æ¨£ï¼Œå°±æ˜¯è³‡æ–™çš„é›†åˆï¼Œåªæ˜¯ &lt;code>Sets&lt;/code> å¤šäº†ä¸€å±¤é™åˆ¶ï¼Œå°±æ˜¯é›†åˆä¸­çš„å€¼ä¸èƒ½é‡è¤‡ï¼Œé€™é‚Šæœƒä½¿ç”¨åˆ° &lt;code>sadd&lt;/code>ã€&lt;code>smembers&lt;/code> ä¾†å° &lt;code>Sets&lt;/code> åšå„²å­˜ä»¥åŠè®€å–ã€‚&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; sadd set1 a b c d a a b b
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">(&lt;/span>integer&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#ae81ff">4&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; smembers set1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>1&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;c&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>2&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;a&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>3&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;b&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>4&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;d&amp;#34;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>å¯ä»¥çœ‹åˆ°ä»–å¯¦éš›å¯«å…¥çš„åªæœ‰ 4 ç­†è³‡æ–™ã€‚&lt;/p>
&lt;br>
&lt;h5>spop&lt;span class="hx:absolute hx:-mt-20" id="spop">&lt;/span>
&lt;a href="#spop" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h5>&lt;p>å¾ &lt;code>set&lt;/code> é›†åˆä¸­éš¨æ©Ÿè·³å‡ºä¸€å®šæ•¸é‡çš„è³‡æ–™ã€‚&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; sadd set1 a a b b c d
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">(&lt;/span>integer&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#ae81ff">4&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; spop set1 &lt;span style="color:#ae81ff">2&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>1&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;c&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>2&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;d&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; spop set1 &lt;span style="color:#ae81ff">2&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>1&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;a&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>2&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;b&amp;#34;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;h5>sismember&lt;span class="hx:absolute hx:-mt-20" id="sismember">&lt;/span>
&lt;a href="#sismember" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h5>&lt;p>å¯ä»¥ä½¿ç”¨ &lt;code>sismember&lt;/code> ä¾†æª¢æŸ¥è¼¸å…¥å€¼æ˜¯å¦ç‚º &lt;code>Set&lt;/code> é›†åˆçš„æˆå“¡ã€‚&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; sadd set a b b c d
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">(&lt;/span>integer&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#ae81ff">4&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; sismember set d
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">(&lt;/span>integer&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; sismember set f
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">(&lt;/span>integer&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;h5>srem&lt;span class="hx:absolute hx:-mt-20" id="srem">&lt;/span>
&lt;a href="#srem" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h5>&lt;p>å¯ä»¥ä½¿ç”¨ &lt;code>srem&lt;/code> ä¾†åˆªé™¤ &lt;code>Set&lt;/code> é›†åˆä¸­çš„æˆå“¡ã€‚&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; sadd set a b b c d
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">(&lt;/span>integer&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#ae81ff">4&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; srem set a d
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">(&lt;/span>integer&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#ae81ff">2&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; smembers set
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>1&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;b&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>2&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;c&amp;#34;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;h5>sdiff&lt;span class="hx:absolute hx:-mt-20" id="sdiff">&lt;/span>
&lt;a href="#sdiff" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h5>&lt;p>æœƒé¡¯ç¤ºç¬¬ä¸€å€‹é›†åˆèˆ‡å…¶ä»–é›†åˆä¸åŒçš„å€¼ã€‚&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; sadd set1 a b c d
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">(&lt;/span>integer&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#ae81ff">4&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; sadd set2 a b
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">(&lt;/span>integer&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#ae81ff">2&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; sadd set3 b
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">(&lt;/span>integer&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; sdiff set1 set2 set3
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>1&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;c&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>2&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;d&amp;#34;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;h5>é›†åˆå‹æ…‹é©åˆå ´æ™¯&lt;span class="hx:absolute hx:-mt-20" id="é›†åˆå‹æ…‹é©åˆå ´æ™¯">&lt;/span>
&lt;a href="#%e9%9b%86%e5%90%88%e5%9e%8b%e6%85%8b%e9%81%a9%e5%90%88%e5%a0%b4%e6%99%af" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h5>&lt;p>&lt;strong>é›†åˆ(Sets) å‹æ…‹é©åˆç”¨æ–¼æ–‡ç« ä¸­çš„Tagæ¨™ç±¤ã€æˆ–æ˜¯è¦æ’é™¤ç›¸åŒè³‡æ–™&lt;/strong>&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/redis/redis-introduce/set.webp"
alt="Sets é©ç”¨å ´æ™¯åœ–" width="700">&lt;figcaption>
&lt;p>Sets é©ç”¨å ´æ™¯åœ–&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;h4>æœ‰åºé›†åˆ (Zset)&lt;span class="hx:absolute hx:-mt-20" id="æœ‰åºé›†åˆ-zset">&lt;/span>
&lt;a href="#%e6%9c%89%e5%ba%8f%e9%9b%86%e5%90%88-zset" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h4>&lt;p>æ•…åæ€ç¾©ï¼Œæœ‰åºé›†åˆå°±æ˜¯æœ‰æ’åºçš„é›†åˆï¼ŒSorted Sets çµæ§‹æœƒ &lt;strong>å¤šä¸€å€‹æ•¸å­—å€¼å»ç‚ºæ’åºçš„æ¬Šé‡&lt;/strong> ä¾†æ±ºå®šå…ˆå¾Œé †åºï¼Œé€™é‚Šæœƒä½¿ç”¨åˆ° &lt;code>zadd&lt;/code> ã€ &lt;code> zrangebyscore&lt;/code> ä¾†å° &lt;code>Zset&lt;/code> åšå„²å­˜ä»¥åŠè®€å–ã€‚&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; zadd sortset &lt;span style="color:#ae81ff">10&lt;/span> &lt;span style="color:#e6db74">&amp;#39;10&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">(&lt;/span>integer&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; zadd sortset &lt;span style="color:#ae81ff">6&lt;/span> &lt;span style="color:#e6db74">&amp;#39;6&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">(&lt;/span>integer&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; zadd sortset &lt;span style="color:#ae81ff">2&lt;/span> &lt;span style="color:#e6db74">&amp;#39;2&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">(&lt;/span>integer&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; zadd sortset &lt;span style="color:#ae81ff">99&lt;/span> &lt;span style="color:#e6db74">&amp;#39;99&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">(&lt;/span>integer&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; zrangebyscore sortset &lt;span style="color:#ae81ff">0&lt;/span> &lt;span style="color:#ae81ff">100&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>1&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;2&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>2&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;6&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>3&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;10&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>4&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;99&amp;#34;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>å°±å¯ä»¥çœ‹å‡ºåœ¨é¡¯ç¤ºçš„æ™‚å€™ä¸¦ä¸æ˜¯ä¾ç…§å¯«å…¥é †åºï¼Œè€Œæ˜¯ä¾ç…§æˆ‘å€‘æ‰€è¨­å®šçš„æ¬Šé‡å»æ’åºçš„ã€‚&lt;/p>
&lt;br>
&lt;h5>withscores&lt;span class="hx:absolute hx:-mt-20" id="withscores">&lt;/span>
&lt;a href="#withscores" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h5>&lt;p>å¦‚æœæƒ³è¦é¡¯ç¤º value èˆ‡ score ï¼Œå¯ä»¥ä½¿ç”¨ withscores ä¾†é¡¯ç¤ºã€‚&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; zadd money &lt;span style="color:#ae81ff">2000&lt;/span> tom
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">(&lt;/span>integer&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; zadd money &lt;span style="color:#ae81ff">3500&lt;/span> peter
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">(&lt;/span>integer&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; zadd money &lt;span style="color:#ae81ff">5000&lt;/span> jack
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">(&lt;/span>integer&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; zrange money &lt;span style="color:#ae81ff">0&lt;/span> -1 withscores
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>1&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;tom&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>2&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;2000&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>3&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;peter&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>4&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;3500&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>5&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;jack&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>6&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;5000&amp;#34;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;h5>zremrangebyscore&lt;span class="hx:absolute hx:-mt-20" id="zremrangebyscore">&lt;/span>
&lt;a href="#zremrangebyscore" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h5>&lt;p>ç§»é™¤æœ‰åºé›†åˆä¸­ï¼ŒæŒ‡å®šåˆ†æ•¸å…§å€é–“çš„æ‰€æœ‰æˆå“¡ã€‚&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; zadd money &lt;span style="color:#ae81ff">2000&lt;/span> tom
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">(&lt;/span>integer&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; zadd money &lt;span style="color:#ae81ff">3500&lt;/span> peter
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">(&lt;/span>integer&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; zadd money &lt;span style="color:#ae81ff">5000&lt;/span> jack
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">(&lt;/span>integer&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; zremrangebyscore money &lt;span style="color:#ae81ff">1500&lt;/span> &lt;span style="color:#ae81ff">3500&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">(&lt;/span>integer&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#ae81ff">2&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; zrange money &lt;span style="color:#ae81ff">0&lt;/span> -1 withscores
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>1&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;jack&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>2&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;5000&amp;#34;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;h5>zcard&lt;span class="hx:absolute hx:-mt-20" id="zcard">&lt;/span>
&lt;a href="#zcard" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h5>&lt;p>å¯ä»¥ä½¿ç”¨ zcard ä¾†è¨ˆç®—é›†åˆä¸­å…ƒç´ çš„æ•¸é‡ã€‚&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; zadd sort &lt;span style="color:#ae81ff">10&lt;/span> &lt;span style="color:#ae81ff">10&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">(&lt;/span>integer&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; zadd sort &lt;span style="color:#ae81ff">3&lt;/span> &lt;span style="color:#ae81ff">3&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">(&lt;/span>integer&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; zadd sort &lt;span style="color:#ae81ff">66&lt;/span> &lt;span style="color:#ae81ff">66&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">(&lt;/span>integer&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; zadd sort &lt;span style="color:#ae81ff">33&lt;/span> &lt;span style="color:#ae81ff">33&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">(&lt;/span>integer&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; zcard sort
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">(&lt;/span>integer&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#ae81ff">4&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;h5>æœ‰åºé›†åˆå‹æ…‹é©åˆå ´æ™¯&lt;span class="hx:absolute hx:-mt-20" id="æœ‰åºé›†åˆå‹æ…‹é©åˆå ´æ™¯">&lt;/span>
&lt;a href="#%e6%9c%89%e5%ba%8f%e9%9b%86%e5%90%88%e5%9e%8b%e6%85%8b%e9%81%a9%e5%90%88%e5%a0%b4%e6%99%af" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h5>&lt;p>&lt;strong>æœ‰åºé›†åˆ(Zset) å‹æ…‹é©åˆç”¨æ–¼éœ€è¦æœ‰åºæ’åˆ—çš„è³‡æ–™&lt;/strong>&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/redis/redis-introduce/zset.webp"
alt="Zset é©ç”¨å ´æ™¯åœ–" width="550">&lt;figcaption>
&lt;p>Zset é©ç”¨å ´æ™¯åœ–&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;h3>ç™¼å¸ƒè¨‚é–± (PUB/SUB)&lt;span class="hx:absolute hx:-mt-20" id="ç™¼å¸ƒè¨‚é–±-pubsub">&lt;/span>
&lt;a href="#%e7%99%bc%e5%b8%83%e8%a8%82%e9%96%b1-pubsub" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>Redis ç™¼å¸ƒè¨‚é–± (pub/sub) æ˜¯ä¸€ç¨®æ¶ˆæ¯é€šä¿¡æ¨¡å¼ï¼Œç™¼é€è€… (pub) ç™¼é€æ¶ˆæ¯ï¼Œè¨‚é–±è€… (sub) æ¥æ”¶æ¶ˆæ¯ã€‚&lt;/p>
&lt;p>Redis å®¢æˆ¶ç«¯å¯ä»¥ä½¿ç”¨ &lt;code>subscribe&lt;/code> ä¾†è¨‚é–±ä»»æ„æ•¸é‡çš„é »é“ã€‚&lt;/p>
&lt;p>ä¸‹é¢é€™å¼µåœ–æ˜¯é »é“1ï¼Œä»¥åŠè¨‚é–±é€™å€‹é »é“çš„ä¸‰å€‹ç”¨æˆ¶ç«¯åˆ†åˆ¥æ˜¯å®¢æˆ¶ç«¯2ã€å®¢æˆ¶ç«¯7ã€å®¢æˆ¶ç«¯5&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/redis/redis-introduce/channel.webp"
alt="Subscribe ç¤ºæ„åœ–" width="550">&lt;figcaption>
&lt;p>Subscribe ç¤ºæ„åœ–&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;p>ç•¶æˆ‘å€‘æœ‰æ–°æ¶ˆæ¯é€šé &lt;code>publish&lt;/code> æŒ‡ä»¤ç™¼é€çµ¦é »é“1 ï¼Œé€™å€‹æ¶ˆæ¯å°±æœƒè¢«ç™¼é€çµ¦æœ‰è¨‚é–±é »é“1çš„ä¸‰å€‹å®¢æˆ¶ç«¯ã€‚&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/redis/redis-introduce/message.webp"
alt="Publish ç¤ºæ„åœ–" width="550">&lt;figcaption>
&lt;p>Publish ç¤ºæ„åœ–&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;p>æˆ‘å€‘ä¾†æ¨¡æ“¬ä¸€ä¸‹å§ ! å…ˆé–‹å…©å€‹ Terminal ä¾†åŸ·è¡Œ &lt;code>redis-cli&lt;/code> ä¸€å€‹ç•¶ä½œç™¼é€(pub)ï¼Œå¦ä¸€å€‹ç•¶ä½œæ¥æ”¶(sub)ã€‚&lt;/p>
&lt;p>æˆ‘å€‘å…ˆç”¨ç¬¬ä¸€å€‹ Terminal è¨‚é–±ä¸€å€‹é »é“ channel_1&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; subscribe channel_1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Reading messages... &lt;span style="color:#f92672">(&lt;/span>press Ctrl-C to quit&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>1&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;subscribe&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>2&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;channel_1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>3&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">(&lt;/span>integer&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;p>é–‹å•Ÿå¦ä¸€å€‹ Terminal ç™¼é€è¨Šæ¯åˆ° channel_1&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; publish channel_1 &lt;span style="color:#e6db74">&amp;#34;Hello World~&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">(&lt;/span>integer&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; publish channel_1 &lt;span style="color:#e6db74">&amp;#34;ian~&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">(&lt;/span>integer&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; publish channel_1 &lt;span style="color:#e6db74">&amp;#34;test~&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">(&lt;/span>integer&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
é€™æ™‚å€™å†åˆ‡æ›å›ä¾†ç¬¬ä¸€å€‹ Terminal ï¼Œå°±å¯ä»¥çœ‹åˆ°ä»–æ¥æ”¶åˆ°æˆ‘å€‘å‚³é€çš„è¨Šæ¯
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>127.0.0.1:6379&amp;gt; subscribe channel_1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Reading messages... &lt;span style="color:#f92672">(&lt;/span>press Ctrl-C to quit&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>1&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;subscribe&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>2&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;channel_1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>3&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">(&lt;/span>integer&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>1&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;message&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>2&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;channel_1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>3&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;Hello World~&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>1&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;message&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>2&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;channel_1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>3&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;ian~&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>1&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;message&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>2&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;channel_1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>3&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#e6db74">&amp;#34;test~&amp;#34;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;h2>åƒè€ƒè³‡æ–™&lt;span class="hx:absolute hx:-mt-20" id="åƒè€ƒè³‡æ–™">&lt;/span>
&lt;a href="#%e5%8f%83%e8%80%83%e8%b3%87%e6%96%99" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>Redis å®˜ç¶²ï¼š&lt;a href="https://redis.io"target="_blank" rel="noopener">https://redis.io&lt;svg class="hx:inline hx:rtl:rotate-270 hx:align-baseline" height="1em" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
&lt;path d="m9.1716 7.7574h7.0711m0 0v7.0711m0-7.0711-8.4853 8.4853" stroke-linecap="round" stroke-linejoin="round"/>
&lt;/svg>&lt;/a>&lt;/p>
&lt;p>Redisï¼š&lt;a href="https://aws.amazon.com/tw/redis/"target="_blank" rel="noopener">https://aws.amazon.com/tw/redis/&lt;svg class="hx:inline hx:rtl:rotate-270 hx:align-baseline" height="1em" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
&lt;path d="m9.1716 7.7574h7.0711m0 0v7.0711m0-7.0711-8.4853 8.4853" stroke-linecap="round" stroke-linejoin="round"/>
&lt;/svg>&lt;/a>&lt;/p>
&lt;p>Redis åŸºæœ¬è³‡æ–™å½¢æ…‹ï¼š&lt;a href="https://blog.judysocute.com/2020/10/04/redis-%E5%9F%BA%E6%9C%AC%E8%B3%87%E6%96%99%E5%BD%A2%E6%85%8B/"target="_blank" rel="noopener">https://blog.judysocute.com/2020/10/04/redis-%E5%9F%BA%E6%9C%AC%E8%B3%87%E6%96%99%E5%BD%A2%E6%85%8B/&lt;svg class="hx:inline hx:rtl:rotate-270 hx:align-baseline" height="1em" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
&lt;path d="m9.1716 7.7574h7.0711m0 0v7.0711m0-7.0711-8.4853 8.4853" stroke-linecap="round" stroke-linejoin="round"/>
&lt;/svg>&lt;/a>&lt;/p>
&lt;p>Redis ç™¼å¸ƒè¨‚é–±ï¼š&lt;a href="https://www.runoob.com/redis/redis-pub-sub.html"target="_blank" rel="noopener">https://www.runoob.com/redis/redis-pub-sub.html&lt;svg class="hx:inline hx:rtl:rotate-270 hx:align-baseline" height="1em" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
&lt;path d="m9.1716 7.7574h7.0711m0 0v7.0711m0-7.0711-8.4853 8.4853" stroke-linecap="round" stroke-linejoin="round"/>
&lt;/svg>&lt;/a>&lt;/p></description></item></channel></rss>