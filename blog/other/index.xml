<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>PIN-YI â€“ å…¶ä»–(é‚„æƒ³ä¸åˆ°åˆ†é¡)</title><link>https://pin-yi.me/blog/other/</link><description>Recent content in å…¶ä»–(é‚„æƒ³ä¸åˆ°åˆ†é¡) on PIN-YI</description><generator>Hugo -- gohugo.io</generator><language>zh-tw</language><atom:link href="https://pin-yi.me/blog/other/index.xml" rel="self" type="application/rss+xml"/><item><title>Bookstack é–‹æºçŸ¥è­˜åº«ç­†è¨˜å¹³å°å®‰è£ (K8s + docker)</title><link>https://pin-yi.me/blog/other/bookstack/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pin-yi.me/blog/other/bookstack/</guid><description>
&lt;p>æœ€è¿‘å‰›å¥½æœ‰å…¬å¸åŒäº‹é›¢è·ï¼Œæƒ³è¦æŠŠäº¤æ¥çš„è³‡æ–™çµ¦æ•´ç†æ•´ç†ï¼Œé›–ç„¶éƒ¨é–€ä¹‹å‰æœ‰æ¶è¨­å°ˆç”¨çš„ wiki çµ¦ RD ä½¿ç”¨ï¼Œä½†è¦ºå¾—ä»‹é¢æ²’æœ‰åˆ°å¾ˆå¥½ç”¨ï¼Œæ–¼æ˜¯å°±åœ¨ç¶²è·¯ä¸Šå°‹æ‰¾ï¼Œå¯ä»¥å¤šäººç·¨è¼¯çš„ç­†è¨˜ç³»çµ±ï¼Œä¸€é–‹å§‹æœ‰æƒ³éç”¨ CodiMD (HackMD)ï¼Œä½†è€ƒé‡åˆ°éœ€è¦å¤šå±¤çš„æ¶æ§‹ä¾†å€åˆ†æ–‡ä»¶ï¼Œæœ€å¾Œé¸æ“‡ &lt;a href="https://www.bookstackapp.com/" target="_blank" rel="noopener">Bookstack&lt;/a> é€™å€‹é–‹æºçŸ¥è­˜åº«ç­†å¹³å°ä¾†ä½œç‚ºçµ„å…§çš„ç­†è¨˜ç³»çµ±ï¼Œä»¥ä¸‹æœƒç°¡å–®èªªä¸€ä¸‹ Bookstack çš„ç‰¹è‰²ä»¥åŠä½¿ç”¨ K8s è·Ÿ docker çš„å®‰è£æ•™å­¸ã€‚&lt;/p>
&lt;br>
&lt;h2>Bookstack ä»‹ç´¹&lt;span class="absolute -mt-20" id="bookstack-ä»‹ç´¹">&lt;/span>
&lt;a href="#bookstack-%e4%bb%8b%e7%b4%b9" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>ä»‹ç´¹éƒ¨åˆ†ä¸»è¦åƒè€ƒ &lt;a href="https://docs.ossii.com.tw/books/bookstack/page/bookstack" target="_blank" rel="noopener">Bookstack ç°¡ä»‹&lt;/a>ï¼Œä»¥ä¸‹åˆ—å‡ºæœƒé¸æ“‡å®ƒçš„ä¸‰å€‹ç‰¹è‰²ï¼š&lt;/p>
&lt;h3>ç°¡æ½”çš„æ›¸æœ¬åˆ—è¡¨æ¨¡å¼&lt;span class="absolute -mt-20" id="ç°¡æ½”çš„æ›¸æœ¬åˆ—è¡¨æ¨¡å¼">&lt;/span>
&lt;a href="#%e7%b0%a1%e6%bd%94%e7%9a%84%e6%9b%b8%e6%9c%ac%e5%88%97%e8%a1%a8%e6%a8%a1%e5%bc%8f" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;figure>&lt;img src="https://pin-yi.me/other/bookstack/1.png"
alt="æ›¸æ¶åˆ†é¡" width="850">&lt;figcaption>
&lt;p>æ›¸æ¶åˆ†é¡&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/other/bookstack/2.png"
alt="æ›¸æœ¬åˆ†é¡" width="850">&lt;figcaption>
&lt;p>æ›¸æœ¬åˆ†é¡&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/other/bookstack/3.png"
alt="é é¢ç« ç¯€åˆ†é¡" width="850">&lt;figcaption>
&lt;p>é é¢ç« ç¯€åˆ†é¡&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;p>æœ€ä¸»è¦æ˜¯å› ç‚ºæœ‰ä»¥ä¸Šå¹¾å€‹ä¸åŒçš„åˆ†å±¤æ¶æ§‹ï¼Œåœ¨è³‡æ–™æ•´ç†ä¸Šæœƒæ›´æ–¹ä¾¿ã€æ›´å¥½å½™æ•´ï¼Œå¯ä»¥è‡ªè¨‚æ›¸æ¶ä»¥åŠæ›¸æœ¬ã€é é¢æˆ–æ˜¯ç« ç¯€çš„å°é¢ä»¥åŠå…§å®¹ã€‚&lt;/p>
&lt;br>
&lt;h3>å¼·å¤§çš„æœå°‹åŠŸèƒ½&lt;span class="absolute -mt-20" id="å¼·å¤§çš„æœå°‹åŠŸèƒ½">&lt;/span>
&lt;a href="#%e5%bc%b7%e5%a4%a7%e7%9a%84%e6%90%9c%e5%b0%8b%e5%8a%9f%e8%83%bd" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/other/bookstack/4.png"
alt="æœå°‹åŠŸèƒ½" width="850">&lt;figcaption>
&lt;p>æœå°‹åŠŸèƒ½&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;p>ç•¶æˆ‘å€‘çš„ç­†è¨˜å…§å®¹è¶Šä¾†è¶Šå¤šï¼Œé›–ç„¶æœ‰ä¸Šé¢æåˆ°çš„åˆ†é¡æ¨¡å¼ï¼Œæƒ³è¦æ‰¾åˆ°å…§å®¹é‚„æ˜¯éœ€è¦èŠ±ä¸€æ®µæ™‚é–“ï¼Œä½† Bookstack æœ‰å¼·å¤§çš„æœå°‹åŠŸèƒ½ï¼Œå¯ä»¥é‡å°æ›¸æ¶ã€æ›¸æœ¬ã€ç« ç¯€æˆ–æ˜¯æ›¸é¢å€‹åˆ¥æœå°‹ï¼Œå¯ä»¥åˆ©ç”¨æ™‚é–“ã€æ¨™ç±¤ã€æ¨™é¡Œæˆ–æ˜¯å…§å®¹ä¾†å¿«é€Ÿæ‰¾åˆ°æƒ³è¦çš„å…§å®¹ã€‚&lt;/p>
&lt;br>
&lt;h3>ç•«åœ–åŠŸèƒ½&lt;span class="absolute -mt-20" id="ç•«åœ–åŠŸèƒ½">&lt;/span>
&lt;a href="#%e7%95%ab%e5%9c%96%e5%8a%9f%e8%83%bd" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>åœ¨è¨è«–ç³»çµ±æˆ–æ˜¯ç¨‹å¼çš„æ¶æ§‹ï¼Œæœ€å¥½çš„æ–¹å¼å°±æ˜¯ç”¨ç•«åœ–çš„ä¾†è¡¨ç¤ºã€‚åœ¨ä»¥å¾€éƒ½æ˜¯ä½¿ç”¨ &lt;a href="https://app.diagrams.net/" target="_blank" rel="noopener">Draw.io&lt;/a> ä¾†ç•«åœ–ï¼Œç•¶ç•«å®Œåœ–å¾Œéœ€è¦åŒ¯å‡ºç•«å¥½çš„åœ–ä»¥å¤–ï¼Œå¦‚æœæ€•ç•«åœ–çš„åŸæª”æ¶ˆå¤±ï¼Œé‚„éœ€è¦å†å¦å¤–ä¸‹è¼‰åŸæª”ä¾†ä¿ç•™ï¼Œå¾ˆä¸æ–¹ä¾¿ï¼Œåˆæ€•å¿˜è¨˜ä¸‹è¼‰ï¼Œè€Œ Bookstack å…§å»ºå¯ç›´æ¥ç·¨è¼¯çš„åŠŸèƒ½ï¼Œç•¶ç•«å®Œåœ–å¾Œæœ‰å•é¡Œï¼Œå¯ä»¥ç›´æ¥é»æ“Šåœ–ç‰‡ä¾†ç·¨è¼¯ï¼Œè€Œé€™äº›åŠŸèƒ½é‚„æœƒæ­é…å…§å»ºçš„ç‰ˆæ§ï¼Œè‹¥æœ‰å•é¡Œé‚„å¯ä»¥é‚„åŸåˆ°æ­£ç¢ºçš„åœ–ç‰‡ç‰ˆæœ¬ã€‚&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/other/bookstack/5.gif"
alt="ç•«åœ–åŠŸèƒ½" width="1000">&lt;figcaption>
&lt;p>ç•«åœ–åŠŸèƒ½&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;h2>å®‰è£èªªæ˜&lt;span class="absolute -mt-20" id="å®‰è£èªªæ˜">&lt;/span>
&lt;a href="#%e5%ae%89%e8%a3%9d%e8%aa%aa%e6%98%8e" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>é‚£ç°¡å–®èªªæ˜ç‚ºä»€éº¼æœƒé¸æ“‡ Bookstack æˆ‘å€‘å°±ä¾†å®‰è£å®ƒï¼Œé€™é‚Šæœ‰ä½¿ç”¨ K8s + docker ä¾†æ¸¬è©¦å®‰è£ï¼Œé‚£æˆ‘å€‘å°±ä¸€èµ·ä¾†çœ‹ç¨‹å¼ç¢¼å§ï¼Œ&lt;a href="https://github.com/880831ian/bookstack" target="_blank" rel="noopener">ç¨‹å¼ç¢¼æ”¾åœ¨é€™&lt;/a> ğŸ‘ˆï¼š&lt;/p>
&lt;h3>K8s&lt;span class="absolute -mt-20" id="k8s">&lt;/span>
&lt;a href="#k8s" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;div class="code-block relative mt-6 first:mt-0 group/code">&lt;div class="filename">namespace.yaml&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">apiVersion&lt;/span>: &lt;span style="color:#ae81ff">v1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">kind&lt;/span>: &lt;span style="color:#ae81ff">Namespace&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">metadata&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">bookstack&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="opacity-0 transition group-hover/code:opacity-100 flex gap-1 absolute m-[11px] right-0 top-8">
&lt;button
class="code-copy-btn group/copybtn transition-all active:opacity-50 bg-primary-700/5 border border-black/5 text-gray-600 hover:text-gray-900 rounded-md p-1.5 dark:bg-primary-300/10 dark:border-white/10 dark:text-gray-400 dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="group-[.copied]/copybtn:hidden copy-icon pointer-events-none h-4 w-4">&lt;/div>
&lt;div class="hidden group-[.copied]/copybtn:block success-icon pointer-events-none h-4 w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;p>æˆ‘ç¿’æ…£æœƒå°‡ä¸åŒçš„æœå‹™åˆ‡ namespace ä¾†éƒ¨ç½²ï¼Œå¤§å®¶å¯ä»¥ä¾ç…§ç¿’æ…£ä¾†ä½¿ç”¨ï¼Œä¸‹æ–¹çš„ yaml éƒ½æ˜¯å»ºåœ¨æ­¤ namespace ä¸Šã€‚&lt;/p>
&lt;br>
&lt;div class="code-block relative mt-6 first:mt-0 group/code">&lt;div class="filename">deployment.yaml&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">apiVersion&lt;/span>: &lt;span style="color:#ae81ff">apps/v1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">kind&lt;/span>: &lt;span style="color:#ae81ff">Deployment&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">metadata&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">bookstack&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">namespace&lt;/span>: &lt;span style="color:#ae81ff">bookstack&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">labels&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">app&lt;/span>: &lt;span style="color:#ae81ff">bookstack&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">spec&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">replicas&lt;/span>: &lt;span style="color:#ae81ff">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">selector&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">matchLabels&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">app&lt;/span>: &lt;span style="color:#ae81ff">bookstack&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">template&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">metadata&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">labels&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">app&lt;/span>: &lt;span style="color:#ae81ff">bookstack&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">spec&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">containers&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">bookstack&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">image&lt;/span>: &lt;span style="color:#ae81ff">linuxserver/bookstack&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ports&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">http&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">containerPort&lt;/span>: &lt;span style="color:#ae81ff">80&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">env&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">DB_DATABASE&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">value&lt;/span>: &lt;span style="color:#ae81ff">bookstack&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">DB_HOST&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">value&lt;/span>: &lt;span style="color:#ae81ff">&amp;lt;&amp;lt;æ›´æ›æ­¤è™•&amp;gt;&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">DB_PORT&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">value&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;3306&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">DB_PASSWORD&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">value&lt;/span>: &lt;span style="color:#ae81ff">&amp;lt;&amp;lt;æ›´æ›æ­¤è™•&amp;gt;&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">DB_USERNAME&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">value&lt;/span>: &lt;span style="color:#ae81ff">&amp;lt;&amp;lt;æ›´æ›æ­¤è™•&amp;gt;&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">MAIL_USERNAME&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">value&lt;/span>: &lt;span style="color:#ae81ff">example@test.com&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">MAIL_PASSWORD&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">value&lt;/span>: &lt;span style="color:#ae81ff">mailpass&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">MAIL_HOST&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">value&lt;/span>: &lt;span style="color:#ae81ff">smtp.server.com&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">MAIL_PORT&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">value&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;465&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">MAIL_ENCRYPTION&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">value&lt;/span>: &lt;span style="color:#ae81ff">SSL&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">MAIL_DRIVER&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">value&lt;/span>: &lt;span style="color:#ae81ff">smtp&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">MAIL_FROM&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">value&lt;/span>: &lt;span style="color:#66d9ef">no&lt;/span>-&lt;span style="color:#ae81ff">reply@test.com&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">APP_URL&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">value&lt;/span>: &lt;span style="color:#ae81ff">https://&amp;lt;&amp;lt;æ›´æ›æ­¤è™•&amp;gt;&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">APP_LANG&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">value&lt;/span>: &lt;span style="color:#ae81ff">zh_TW&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">APP_TIMEZONE&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">value&lt;/span>: &lt;span style="color:#ae81ff">Asia/Taipei&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">resources&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">limits&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">cpu&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;0.5&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">memory&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;512Mi&amp;#34;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="opacity-0 transition group-hover/code:opacity-100 flex gap-1 absolute m-[11px] right-0 top-8">
&lt;button
class="code-copy-btn group/copybtn transition-all active:opacity-50 bg-primary-700/5 border border-black/5 text-gray-600 hover:text-gray-900 rounded-md p-1.5 dark:bg-primary-300/10 dark:border-white/10 dark:text-gray-400 dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="group-[.copied]/copybtn:hidden copy-icon pointer-events-none h-4 w-4">&lt;/div>
&lt;div class="hidden group-[.copied]/copybtn:block success-icon pointer-events-none h-4 w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;p>å¿…è¦æ›´æ›çš„åƒæ•¸æœ‰æ¨™ç¤º &lt;strong>&amp;laquo;æ›´æ›æ­¤è™•&amp;raquo;&lt;/strong>ï¼Œå…¶é¤˜å¯ä»¥ä¾ç…§å„çµ„ç¹”ä¾†è‡ªè¡Œé…ç½®ï¼ŒBookstack æœƒå°‡å…§å®¹å­˜åœ¨ dbï¼Œåœ–ç‰‡ç­‰å­˜åœ¨ pod ä¸­ï¼Œéœ€è¦æ°¸ä¹…ä¿å­˜è«‹ä½¿ç”¨ pvc + pv æˆ–æ˜¯å¦å¤–æ› nasã€‚&lt;/p>
&lt;br>
&lt;div class="code-block relative mt-6 first:mt-0 group/code">&lt;div class="filename">svc.yaml&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">apiVersion&lt;/span>: &lt;span style="color:#ae81ff">v1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">kind&lt;/span>: &lt;span style="color:#ae81ff">Service&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">metadata&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">bookstack&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">namespace&lt;/span>: &lt;span style="color:#ae81ff">bookstack&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">spec&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">type&lt;/span>: &lt;span style="color:#ae81ff">NodePort&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">selector&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">app&lt;/span>: &lt;span style="color:#ae81ff">bookstack&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ports&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">http&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">protocol&lt;/span>: &lt;span style="color:#ae81ff">TCP&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">port&lt;/span>: &lt;span style="color:#ae81ff">80&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">targetPort&lt;/span>: &lt;span style="color:#ae81ff">80&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="opacity-0 transition group-hover/code:opacity-100 flex gap-1 absolute m-[11px] right-0 top-8">
&lt;button
class="code-copy-btn group/copybtn transition-all active:opacity-50 bg-primary-700/5 border border-black/5 text-gray-600 hover:text-gray-900 rounded-md p-1.5 dark:bg-primary-300/10 dark:border-white/10 dark:text-gray-400 dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="group-[.copied]/copybtn:hidden copy-icon pointer-events-none h-4 w-4">&lt;/div>
&lt;div class="hidden group-[.copied]/copybtn:block success-icon pointer-events-none h-4 w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;div class="code-block relative mt-6 first:mt-0 group/code">&lt;div class="filename">ingress.yaml&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">apiVersion&lt;/span>: &lt;span style="color:#ae81ff">networking.k8s.io/v1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">kind&lt;/span>: &lt;span style="color:#ae81ff">Ingress&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">metadata&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">bookstack-ingress&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">namespace&lt;/span>: &lt;span style="color:#ae81ff">bookstack&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">annotations&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">kubernetes.io/ingress.class&lt;/span>: &lt;span style="color:#ae81ff">nginx&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">service.beta.kubernetes.io/do-loadbalancer-enable-proxy-protocol&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;true&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">spec&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">rules&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">host&lt;/span>: &lt;span style="color:#ae81ff">&amp;lt;&amp;lt;æ›´æ›æ­¤è™•&amp;gt;&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">http&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">paths&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">path&lt;/span>: &lt;span style="color:#ae81ff">/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">pathType&lt;/span>: &lt;span style="color:#ae81ff">Prefix&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">backend&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">service&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">bookstack&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">port&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">number&lt;/span>: &lt;span style="color:#ae81ff">80&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="opacity-0 transition group-hover/code:opacity-100 flex gap-1 absolute m-[11px] right-0 top-8">
&lt;button
class="code-copy-btn group/copybtn transition-all active:opacity-50 bg-primary-700/5 border border-black/5 text-gray-600 hover:text-gray-900 rounded-md p-1.5 dark:bg-primary-300/10 dark:border-white/10 dark:text-gray-400 dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="group-[.copied]/copybtn:hidden copy-icon pointer-events-none h-4 w-4">&lt;/div>
&lt;div class="hidden group-[.copied]/copybtn:block success-icon pointer-events-none h-4 w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;p>æœ€å¾Œé€é ingress çš„ domain å»è¨ªå• svc &amp;gt; pod ä¸Šï¼Œå°±å®Œæˆéƒ¨ç½²æ‹‰ï½ç¬¬ä¸€æ¬¡ç™»å…¥è¦ä½¿ç”¨é è¨­å¸³è™ŸåŠå¯†ç¢¼ &lt;a href="mailto:admin@admin.com" >admin@admin.com&lt;/a>/password&lt;/p>
&lt;br>
&lt;h3>docker&lt;span class="absolute -mt-20" id="docker">&lt;/span>
&lt;a href="#docker" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;div class="code-block relative mt-6 first:mt-0 group/code">&lt;div class="filename">docker-compose.yaml&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">version&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;3.8&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">services&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">bookstack&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">image&lt;/span>: &lt;span style="color:#ae81ff">lscr.io/linuxserver/bookstack&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">container_name&lt;/span>: &lt;span style="color:#ae81ff">bookstack&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">environment&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">PUID=&amp;lt;&amp;lt;æ›´æ›æ­¤è™•&amp;gt;&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">PGID=&amp;lt;&amp;lt;æ›´æ›æ­¤è™•&amp;gt;&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">DB_HOST=bookstack_db&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">DB_PORT=3306&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">DB_USER=bookstack&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">DB_PASS=bookstack&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">DB_DATABASE=bookstackapp&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">APP_LANG=zh_TW&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">APP_TIMEZONE=Asia/Taipei&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">APP_URL=&amp;lt;&amp;lt;æ›´æ›æ­¤è™•&amp;gt;&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">GOOGLE_APP_ID=&amp;lt;&amp;lt;æ›´æ›æ­¤è™•&amp;gt;&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">GOOGLE_APP_SECRET=&amp;lt;&amp;lt;æ›´æ›æ­¤è™•&amp;gt;&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">/bookstack/config:/config&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ports&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">80&lt;/span>:&lt;span style="color:#ae81ff">80&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">restart&lt;/span>: &lt;span style="color:#ae81ff">unless-stopped&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">depends_on&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">bookstack_db&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">bookstack_db&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">image&lt;/span>: &lt;span style="color:#ae81ff">lscr.io/linuxserver/mariadb&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">container_name&lt;/span>: &lt;span style="color:#ae81ff">bookstack_db&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">environment&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">PUID=&amp;lt;&amp;lt;æ›´æ›æ­¤è™•&amp;gt;&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">PGID=&amp;lt;&amp;lt;æ›´æ›æ­¤è™•&amp;gt;&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">MYSQL_ROOT_PASSWORD=bookstack&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">TZ=Asia/Taipei&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">MYSQL_DATABASE=bookstackapp&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">MYSQL_USER=bookstack&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">MYSQL_PASSWORD=bookstack&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">/bookstack/config:/config&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">restart&lt;/span>: &lt;span style="color:#ae81ff">unless-stopped&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="opacity-0 transition group-hover/code:opacity-100 flex gap-1 absolute m-[11px] right-0 top-8">
&lt;button
class="code-copy-btn group/copybtn transition-all active:opacity-50 bg-primary-700/5 border border-black/5 text-gray-600 hover:text-gray-900 rounded-md p-1.5 dark:bg-primary-300/10 dark:border-white/10 dark:text-gray-400 dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="group-[.copied]/copybtn:hidden copy-icon pointer-events-none h-4 w-4">&lt;/div>
&lt;div class="hidden group-[.copied]/copybtn:block success-icon pointer-events-none h-4 w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;p>docker çš„éƒ¨åˆ†å°±æ›´ç°¡å–®äº†ï¼Œä¸€æ¨£æ˜¯æŠŠ &lt;strong>&amp;laquo;æ›´æ›æ­¤è™•&amp;raquo;&lt;/strong> æ›æˆå°æ‡‰çš„å…§å®¹å³å¯ï¼Œenv çš„éƒ¨åˆ†å¯ä»¥åƒè€ƒå®˜æ–¹æ–‡ä»¶ï¼Œé€™é‚Šæ¯”è¼ƒç‰¹åˆ¥çš„æ˜¯æˆ‘å€‘æœ‰å¤šä½¿ç”¨ Google ä¾† Oauth ç™»å…¥ï¼ŒBookstack æ”¯æ´å¤šç¨®çš„ Oauth ç™»å…¥æ–¹å¼ï¼Œå¯ä»¥åƒè€ƒ &lt;a href="https://www.bookstackapp.com/docs/admin/third-party-auth/" target="_blank" rel="noopener">Third Party Authentication&lt;/a>ã€‚&lt;/p>
&lt;br>
&lt;p>æ¶è¨­å¥½ Bookstack å°±å¯ä»¥é–‹å§‹å¯«éƒ¨é–€æˆ–æ˜¯çµ„ç¹”å…§çš„ç­†è¨˜æ‹‰ï½ å¦‚æœæœ‰é–‹æ”¾å¤–ç¶²é€£ç·šï¼Œè¦è¨˜å¾—ä¿®æ”¹é è¨­çš„ç®¡ç†å“¡å¸³è™Ÿï¼Œä»¥åŠç”¨ç®¡ç†å“¡å¸³è™Ÿç™»å…¥ï¼Œåˆ°åŠŸèƒ½èˆ‡å®‰å…¨çš„å…¬é–‹å­˜å–çµ¦å–æ¶ˆï¼Œé€™æ¨£å°±å¿…é ˆè¦ç™»å…¥æ‰å¯ä»¥ç€è¦½ç­†è¨˜äº†ï¼é‚£å°±äº¤çµ¦å¤§å®¶è‡ªå·±å»ç©é€™å€‹å¥½ç”¨çš„ç­†è¨˜å·¥å…·å›‰ï½ï½ ğŸ˜&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/other/bookstack/6.png"
alt="åŠŸèƒ½èˆ‡å®‰å…¨è¨­å®š" width="850">&lt;figcaption>
&lt;p>åŠŸèƒ½èˆ‡å®‰å…¨è¨­å®š&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;h2>åƒè€ƒè³‡æ–™&lt;span class="absolute -mt-20" id="åƒè€ƒè³‡æ–™">&lt;/span>
&lt;a href="#%e5%8f%83%e8%80%83%e8%b3%87%e6%96%99" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>BookStack ç°¡ä»‹ï¼š&lt;a href="https://docs.ossii.com.tw/books/bookstack/page/bookstack" target="_blank" rel="noopener">https://docs.ossii.com.tw/books/bookstack/page/bookstack&lt;/a>&lt;/p>
&lt;p>BookStack Installationï¼š&lt;a href="https://www.bookstackapp.com/docs/admin/installation/" target="_blank" rel="noopener">https://www.bookstackapp.com/docs/admin/installation/&lt;/a>&lt;/p></description></item><item><title>å¦‚ä½•å•Ÿç”¨ GitLab çš„ Package Registry ä»¥åŠå°‡å„²å­˜ä½ç½®å¾ä¼ºæœå™¨æ”¹åˆ° GCS ä¸Š</title><link>https://pin-yi.me/blog/other/gitlab-package-registry-to-gcs/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pin-yi.me/blog/other/gitlab-package-registry-to-gcs/</guid><description>
&lt;p>ä»Šå¤©æ¥åˆ°ä¸€å€‹æ¡ˆå­ï¼ŒRD éƒ¨é–€ä¹‹å¾Œæƒ³è¦ä½¿ç”¨ GitLab çš„ Package Registry åŠŸèƒ½ä¾†ç™¼å¸ƒå¥—ä»¶ï¼Œä¸”ä¸æƒ³æŠŠå®ƒå­˜åœ¨ GitLab ä¼ºæœå™¨ä¸Šï¼Œå¸Œæœ›å¯ä»¥ç›´æ¥å­˜åˆ° GCP çš„ Google Cloud Storage ä¸Šï¼Œæ‰€ä»¥æ‰æœƒæœ‰äº†æ­¤ç¯‡ç­†è¨˜ä¾†è¨˜éŒ„ä¸€ä¸‹æ•´å€‹éç¨‹ã€‚&lt;/p>
&lt;br>
&lt;p>ç‰ˆæœ¬è³‡è¨Š&lt;/p>
&lt;ul>
&lt;li>GitLab 14.10 (æœ‰éƒ¨åˆ†è¨­å®šæœƒæ–¼æ–°ç‰ˆæœ¬æ£„ç”¨ï¼Œè«‹è¨˜å¾—ç¢ºèªå¥½è‡ªå·±çš„ç‰ˆæœ¬æ˜¯å¦æ”¯æ´)&lt;/li>
&lt;/ul>
&lt;p>å…ˆèªªä¸€ä¸‹ï¼Œæˆ‘å€‘çš„ GitLab æ˜¯ä½¿ç”¨ docker-compose ä¾†å»ºç½®ï¼Œæ‰€ä»¥å¾ŒçºŒçš„å¯¦ä½œå…§å®¹éƒ½æœƒä»¥ docker-compose çš„æ–¹å¼ä¾†ä»‹ç´¹ã€‚&lt;/p>
&lt;br>
&lt;h2>å•Ÿå‹• GitLab çš„ Package Registry&lt;span class="absolute -mt-20" id="å•Ÿå‹•-gitlab-çš„-package-registry">&lt;/span>
&lt;a href="#%e5%95%9f%e5%8b%95-gitlab-%e7%9a%84-package-registry" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>é¦–å…ˆï¼Œæˆ‘å€‘ç•¶ç„¶è¦å…ˆå•Ÿå‹•é€™é … Package Registry åŠŸèƒ½ï¼Œæ‰å¯ä»¥å†ä¹‹å¾Œä½¿ç”¨å®ƒï¼Œæˆ‘å€‘å…ˆçœ‹ä¸€ä¸‹ GitLab å•Ÿå‹•çš„ docker-compose.yml æª”æ¡ˆï¼š&lt;/p>
&lt;div class="code-block relative mt-6 first:mt-0 group/code">&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">version&lt;/span>: &lt;span style="color:#e6db74">&amp;#39;3&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">services&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">gitlab&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">image&lt;/span>: &lt;span style="color:#e6db74">&amp;#39;gitlab/gitlab-ee:14.10.5-ee.0&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">restart&lt;/span>: &lt;span style="color:#ae81ff">always&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">container_name&lt;/span>: &lt;span style="color:#ae81ff">gitlab&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">hostname&lt;/span>: &lt;span style="color:#ae81ff">gitlab-pid&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">logging&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">driver&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;json-file&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">options&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">max-size&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;100m&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">max-file&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;50&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">environment&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">GITLAB_OMNIBUS_CONFIG&lt;/span>: |&lt;span style="color:#e6db74">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> external_url &amp;#39;${GITLAB_DOMAIN}&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> letsencrypt[&amp;#39;enable&amp;#39;] = false
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> gitlab_rails[&amp;#39;initial_root_password&amp;#39;] = &amp;#39;${GITLAB_ROOT_PASSWORD}&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> gitlab_rails[&amp;#39;gitlab_shell_ssh_port&amp;#39;] = &amp;#39;${GITLAB_HOST_SSH_PORT}&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> gitlab_rails[&amp;#39;backup_keep_time&amp;#39;] = 79200
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> gitlab_rails[&amp;#39;omniauth_allow_single_sign_on&amp;#39;] = [&amp;#39;google_oauth2&amp;#39;]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> gitlab_rails[&amp;#39;omniauth_block_auto_created_users&amp;#39;] = false
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> gitlab_rails[&amp;#39;omniauth_sync_profile_from_provider&amp;#39;] = [&amp;#39;google_oauth2&amp;#39;]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> gitlab_rails[&amp;#39;omniauth_sync_profile_attributes&amp;#39;] = [&amp;#39;name&amp;#39;, &amp;#39;email&amp;#39;]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> gitlab_rails[&amp;#39;omniauth_providers&amp;#39;] = [
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> {&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ae81ff">ç•¥éï¼ï¼ï¼&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ports&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#e6db74">&amp;#39;${GITLAB_HOST_SSH_PORT}:22&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#e6db74">&amp;#39;${GITLAB_HOST_HTTP_PORT}:80&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#e6db74">&amp;#39;${GITLAB_HOST_HTTPS_PORT}:443&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#e6db74">&amp;#39;./config:/etc/gitlab&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#e6db74">&amp;#39;./logs:/var/log/gitlab&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#e6db74">&amp;#39;./data:/var/opt/gitlab&amp;#39;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="opacity-0 transition group-hover/code:opacity-100 flex gap-1 absolute m-[11px] right-0 top-0">
&lt;button
class="code-copy-btn group/copybtn transition-all active:opacity-50 bg-primary-700/5 border border-black/5 text-gray-600 hover:text-gray-900 rounded-md p-1.5 dark:bg-primary-300/10 dark:border-white/10 dark:text-gray-400 dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="group-[.copied]/copybtn:hidden copy-icon pointer-events-none h-4 w-4">&lt;/div>
&lt;div class="hidden group-[.copied]/copybtn:block success-icon pointer-events-none h-4 w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>æœ‰äº›è¨­å®šæœ‰ç•¥éæˆ–æ˜¯çœç•¥ä¸å¯«ï¼Œå¤§å®¶å°±ä¾ç…§è‡ªå·±çš„è¨­å®šä¾†çœ‹å°±å¥½ï½&lt;/p>
&lt;br>
&lt;h2>æ–°å¢ Package Registry è¨­å®š&lt;span class="absolute -mt-20" id="æ–°å¢-package-registry-è¨­å®š">&lt;/span>
&lt;a href="#%e6%96%b0%e5%a2%9e-package-registry-%e8%a8%ad%e5%ae%9a" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>æˆ‘å€‘åœ¨ä¸Šæ–¹çš„ &lt;code>gitlab_rails['omniauth_providers'] = [ ... ç•¥ ... ] &lt;/code> ä¹‹å¾ŒåŠ ä¸Šæ–°å¢ Package Registry è¨­å®šå…§å®¹ï¼š&lt;/p>
&lt;div class="code-block relative mt-6 first:mt-0 group/code">&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">gitlab_rails[&amp;#39;packages_enabled&amp;#39;] = true&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">gitlab_rails[&amp;#39;packages_object_store_enabled&amp;#39;] = true&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">gitlab_rails[&amp;#39;packages_object_store_remote_directory&amp;#39;] = &amp;#34;GCS åç¨±&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">gitlab_rails[&amp;#39;packages_object_store_direct_upload&amp;#39;] = true&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">gitlab_rails[&amp;#39;packages_object_store_background_upload&amp;#39;] = true&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">gitlab_rails[&amp;#39;packages_object_store_proxy_download&amp;#39;] = true&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">gitlab_rails[&amp;#39;packages_object_store_connection&amp;#39;] = {&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">&amp;#39;provider&amp;#39;&lt;/span> &lt;span style="color:#ae81ff">=&amp;gt; &amp;#39;Google&amp;#39;,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">&amp;#39;google_project&amp;#39;&lt;/span> &lt;span style="color:#ae81ff">=&amp;gt; &amp;#39;å°ˆæ¡ˆ ID&amp;#39;,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">&amp;#39;google_json_key_location&amp;#39;&lt;/span> &lt;span style="color:#ae81ff">=&amp;gt; &amp;#39;/etc/gitlab/google_key.json&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="opacity-0 transition group-hover/code:opacity-100 flex gap-1 absolute m-[11px] right-0 top-0">
&lt;button
class="code-copy-btn group/copybtn transition-all active:opacity-50 bg-primary-700/5 border border-black/5 text-gray-600 hover:text-gray-900 rounded-md p-1.5 dark:bg-primary-300/10 dark:border-white/10 dark:text-gray-400 dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="group-[.copied]/copybtn:hidden copy-icon pointer-events-none h-4 w-4">&lt;/div>
&lt;div class="hidden group-[.copied]/copybtn:block success-icon pointer-events-none h-4 w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;ul>
&lt;li>packages_enabledï¼šå•Ÿå‹• packages&lt;/li>
&lt;li>packages_object_store_enabledï¼šå•Ÿå‹• packages å°è±¡å­˜å„²&lt;/li>
&lt;li>packages_object_store_remote_directoryï¼šè¨­å®š packages å°è±¡å­˜å„²ä½ç½®ï¼Œé€™é‚Šè¦è¼¸å…¥ GCS çš„åç¨±&lt;/li>
&lt;li>packages_object_store_direct_uploadï¼šè¨­å®šæ˜¯å¦å¯ä»¥ç›´æ¥ä¸Šå‚³åˆ°å°è±¡å­˜å„²ä½ç½®&lt;/li>
&lt;li>packages_object_store_background_uploadï¼šè¨­å®šæ˜¯å¦ä»¥å¾Œå°æ–¹å¼ä¸Šå‚³åˆ°å°è±¡å­˜å„²ä½ç½®&lt;/li>
&lt;li>packages_object_store_proxy_downloadï¼šè¨­å®šæ˜¯å¦å¯ä»¥é€éä»£ç†ä¼ºæœå™¨é€²è¡Œå¥—ä»¶ä¸‹è¼‰&lt;/li>
&lt;li>packages_object_store_connectionï¼šè¨­å®šé€£æ¥åˆ°å°è±¡å­˜å„²ï¼Œç”±æ–¼æˆ‘å€‘è¦å­˜åˆ° GCS ä¸Šé¢ï¼Œéœ€è¦æœ‰é€™ä¸‰é … providerã€google_projectã€google_json_key_location æ‰å¯ä»¥å°‡ packages å­˜åˆ° GCS ä¸Šã€‚å¦‚æœæƒ³ç”¨å…¶ä»–çš„å„²å­˜ä½ç½®ï¼Œä¾‹å¦‚ Amazon S3ã€Azure Blob storage å¯ä»¥åƒè€ƒ &lt;a href="https://docs.gitlab.com/ee/administration/object_storage.html" target="_blank" rel="noopener">Object storage è©³ç´°è¨­å®š&lt;/a> ( å…¶ä¸­çš„ google_json_key_location æ˜¯è¦æ”¾å¯ä»¥è®€å¯« GCS çš„ SA SECRET æª”æ¡ˆ )&lt;/li>
&lt;/ul>
&lt;br>
&lt;h2>å…ˆæŸ¥çœ‹å°šæœªé‡å•Ÿçš„ GitLab Package&lt;span class="absolute -mt-20" id="å…ˆæŸ¥çœ‹å°šæœªé‡å•Ÿçš„-gitlab-package">&lt;/span>
&lt;a href="#%e5%85%88%e6%9f%a5%e7%9c%8b%e5%b0%9a%e6%9c%aa%e9%87%8d%e5%95%9f%e7%9a%84-gitlab-package" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>ç”±æ–¼å…¬å¸ GitLab é è¨­æœ‰å…ˆé–‹å•Ÿ packages_enabledï¼Œæ‰€ä»¥æˆ‘å°±æ‹¿åŒäº‹ç”¨ Helm å¯«çš„ CIï¼Œä¾†åšæ¸¬è©¦ã€‚ç•¶æ›´æ–° value.yaml å¾Œæœƒè‡ªå‹•æ‰“åŒ… Package æ”¾åˆ° Package Registry ä¸­ï¼Œæˆ‘å€‘ç›´æ¥é€²å…¥åˆ°é è¨­ Package Registry çš„å„²å­˜ä½ç½®ï¼Œæ˜¯åœ¨ &lt;code>/var/opt/gitlab/gitlab-rails/shared/packages/&lt;/code>ï¼Œç”¨æŒ‡ä»¤ç™¼ç¾æ‰“åŒ…çš„ Package çš„ç¢ºå­˜æ”¾æ–¼æ­¤ ï¼Œå¦‚ä¸‹ï¼š&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/other/gitlab-package-registry-to-gcs/1.png"
alt="æª¢æŸ¥æ˜¯å¦é‚„æœ‰ Package åœ¨é è¨­å„²å­˜ä½ç½® (å°šæœªé·ç§»)" width="800">&lt;figcaption>
&lt;p>æª¢æŸ¥æ˜¯å¦é‚„æœ‰ Package åœ¨é è¨­å„²å­˜ä½ç½® (å°šæœªé·ç§»)&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;h2>é‡å•Ÿè¨­å®šå¾Œå†æ¬¡æª¢æŸ¥ GitLab Package&lt;span class="absolute -mt-20" id="é‡å•Ÿè¨­å®šå¾Œå†æ¬¡æª¢æŸ¥-gitlab-package">&lt;/span>
&lt;a href="#%e9%87%8d%e5%95%9f%e8%a8%ad%e5%ae%9a%e5%be%8c%e5%86%8d%e6%ac%a1%e6%aa%a2%e6%9f%a5-gitlab-package" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>ç•¶æˆ‘å€‘é‡å•Ÿè¨­å®šå¾Œï¼Œä¹Ÿæœ‰å»ºç«‹å¥½å¯ä¾›æˆ‘å€‘æ¬Šé™ SA çš„ GCS å¾Œï¼Œæœƒç™¼ç¾åŸæœ¬å­˜åœ¨é è¨­ &lt;code>/var/opt/gitlab/gitlab-rails/shared/packages/&lt;/code> æ²’æœ‰è‡ªå‹•è·‘åˆ° GCS ä¸Šï¼Œæ˜¯å› ç‚ºæˆ‘å€‘é‚„éœ€è¦æ‰‹å‹•ä¸‹æŒ‡ä»¤å°‡ä»–é·ç§»éå»ï¼ŒæŒ‡ä»¤æ˜¯ &lt;code>gitlab-rake &amp;quot;gitlab:packages:migrate&amp;quot;&lt;/code>ï¼Œæœ€å¾Œç­‰ä»–è·‘å®Œæˆ‘å€‘åœ¨æª¢æŸ¥ä¸€ä¸‹é è¨­å„²å­˜ä½ç½®å°±ç™¼ç¾å·²ç¶“æ²’æœ‰ Package äº†&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/other/gitlab-package-registry-to-gcs/2.png"
alt="æª¢æŸ¥æ˜¯å¦é‚„æœ‰ Package åœ¨é è¨­å„²å­˜ä½ç½® (å·²é·ç§»)" width="800">&lt;figcaption>
&lt;p>æª¢æŸ¥æ˜¯å¦é‚„æœ‰ Package åœ¨é è¨­å„²å­˜ä½ç½® (å·²é·ç§»)&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;p>é–‹ GCS ç¶²ç«™ä¾†çœ‹æœƒç™¼ç¾åŸå…ˆåœ¨é è¨­å„²å­˜ä½ç½®çš„ Package éƒ½å¯ä»¥è·‘åˆ° GCS ä¸Šï¼š&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/other/gitlab-package-registry-to-gcs/3.png"
alt="æŸ¥çœ‹å·²é·ç§»åˆ° Google Cloud Storage çš„ Package" width="800">&lt;figcaption>
&lt;p>æŸ¥çœ‹å·²é·ç§»åˆ° Google Cloud Storage çš„ Package&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;h2>åƒè€ƒè³‡æ–™&lt;span class="absolute -mt-20" id="åƒè€ƒè³‡æ–™">&lt;/span>
&lt;a href="#%e5%8f%83%e8%80%83%e8%b3%87%e6%96%99" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>GitLab Package Registry administrationï¼š&lt;a href="https://docs.gitlab.com/14.10/ee/administration/packages/" target="_blank" rel="noopener">https://docs.gitlab.com/14.10/ee/administration/packages/&lt;/a>&lt;/p></description></item></channel></rss>