<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>PIN-YI â€“ Security</title><link>https://pin-yi.me/tags/security/</link><description>Recent content in Security on PIN-YI</description><generator>Hugo -- gohugo.io</generator><language>zh-tw</language><lastBuildDate>Mon, 17 Nov 2025 00:00:00 +0000</lastBuildDate><atom:link href="https://pin-yi.me/tags/security/index.xml" rel="self" type="application/rss+xml"/><item><title>çµ±ä¸€æ©Ÿå¯†ã€èº«ä»½èˆ‡åŠ å¯†çš„ç®¡ç†ç³»çµ± - HashiCorp Vault ä»‹ç´¹èˆ‡èªªæ˜</title><link>https://pin-yi.me/blog/security/vault-introduce/</link><pubDate>Mon, 17 Nov 2025 00:00:00 +0000</pubDate><guid>https://pin-yi.me/blog/security/vault-introduce/</guid><description>
&lt;p>æˆ‘å€‘åœ¨ç¾ä»£çš„é–‹ç™¼æˆ–æ˜¯é›²ç«¯ç®¡ç†ï¼Œæœƒæœ‰å¾ˆå¤šçš„ API é‡‘é‘°ã€Tokenã€å¯†ç¢¼ã€æ†‘è­‰ è®“æœå‹™æˆ–æ˜¯è³‡æºä¾†å»åšé©—è­‰èˆ‡æˆæ¬Šï¼Œä½†æœ‰ä»€éº¼å·¥å…·èƒ½å¤ æ›´å¥½çš„å­˜æ”¾é€™äº›é‡‘é‘°å‘¢ï¼Ÿå› æ­¤æœ‰äº†ä»Šå¤©æƒ³è¦å­¸ç¿’ç ”ç©¶çš„ä¸»é¡Œ - HashiCorp Vault&lt;/p>
&lt;br>
&lt;p>å­¸ç¿’ä¸€å€‹æ±è¥¿æœ€å¿«çš„æ–¹å¼ï¼Œå°±æˆ‘è€Œè¨€å°±æ˜¯å…ˆçœ‹å½±ç‰‡ ğŸ˜†
é€™é‚Šé™„ä¸Šæˆ‘ä¸€é–‹å§‹å­¸ç¿’çš„åƒè€ƒå½±ç‰‡ &lt;a href="https://www.youtube.com/watch?v=YU_rQz8emoE"target="_blank" rel="noopener">HashiCorp Vault on AWS &amp;amp; K8s - é›²ç«¯åœ°ç«¯é€šåƒçš„ç§é‘°ç®¡ç†å¹³å° ã€Webinarï¼š HashiCorp Vaultã€‘| æ­ç«‹å¨ç§‘æŠ€&lt;svg class="hx:inline hx:rtl:rotate-270 hx:align-baseline" height="1em" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
&lt;path d="m9.1716 7.7574h7.0711m0 0v7.0711m0-7.0711-8.4853 8.4853" stroke-linecap="round" stroke-linejoin="round"/>
&lt;/svg>&lt;/a>&lt;/p>
&lt;p>å¯ä»¥å…ˆé€éå½±ç‰‡äº†è§£ Vault çš„åŠŸç”¨ï¼Œä»–æ˜¯æ€éº¼å»åšé©—è­‰ï¼Œä»¥åŠä»–æ€éº¼å„²å­˜è³‡æ–™ï¼Œæˆ–æ˜¯å¾Œé¢éœ€è¦æ€éº¼ç›£æ§ä»¥åŠå‚™ä»½ç­‰åˆæ­¥çš„ä»‹ç´¹ï¼Œé‚£çœ‹å®Œå½±ç‰‡å¾Œï¼Œæˆ‘å€‘å°±å¯ä»¥ä¾†çœ‹å®˜æ–¹çš„ä»‹ç´¹&lt;/p>
&lt;br>
&lt;h2>ä»€éº¼æ˜¯ Vault&lt;span class="hx:absolute hx:-mt-20" id="ä»€éº¼æ˜¯-vault">&lt;/span>
&lt;a href="#%e4%bb%80%e9%ba%bc%e6%98%af-vault" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>Vault å®˜ç¶²ä»‹ç´¹ï¼šï¼ˆä»¥ä¸‹æ©Ÿç¿»ï¼‰&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Vault æ˜¯ä¸€å€‹åŸºæ–¼èº«åˆ†çš„é‡‘é‘°å’ŒåŠ å¯†ç®¡ç†ç³»çµ±ï¼Œå®ƒé›†ä¸­ç®¡ç†é‡‘é‘°ï¼Œè¼ªæ›èˆŠæ†‘è­‰ï¼ŒæŒ‰ç…§éœ€æ±‚ç”¢ç”Ÿæ†‘è­‰ï¼Œç¨½æ ¸å®¢æˆ¶ç«¯çš„äº¤äº’è¡Œç‚ºï¼Œä¸¦æ”¯æ´ç›£ç®¡åˆè¦æ€§ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å®ƒæä¾›åŠ å¯†æœå‹™ï¼Œä¸¦é€éèº«ä»½é©—è­‰å’Œæˆæ¬Šæ–¹æ³•é€²è¡Œæ§åˆ¶ï¼Œä»¥ç¢ºä¿å°æ©Ÿå¯†è³‡è¨Šçš„å®‰å…¨ã€å¯ç¨½æ ¸å’Œå—é™å­˜å–ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>é‡‘é‘°æ˜¯æŒ‡ä»»ä½•éœ€è¦åš´æ ¼æ§åˆ¶å­˜å–æ¬Šé™çš„è¨Šæ¯ï¼Œä¾‹å¦‚ä»¤ç‰Œã€API é‡‘é‘°ã€å¯†ç¢¼ã€åŠ å¯†é‡‘é‘°æˆ–æ†‘è­‰ã€‚ Vault æä¾›äº†ä¸€å€‹çµ±ä¸€çš„é‡‘é‘°ç®¡ç†ä»‹é¢ï¼ŒåŒæ™‚æä¾›åš´æ ¼çš„å­˜å–æ§åˆ¶ä¸¦è¨˜éŒ„è©³ç´°çš„ç¨½æ ¸æ—¥èªŒã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Vault æœƒåœ¨å‘å®¢æˆ¶ç«¯ï¼ˆä½¿ç”¨è€…ã€æ©Ÿå™¨ã€æ‡‰ç”¨ç¨‹å¼ï¼‰æä¾›å°é‡‘é‘°æˆ–å„²å­˜çš„æ•æ„Ÿè³‡æ–™çš„å­˜å–æ¬Šä¹‹å‰ï¼Œå°å…¶é€²è¡Œé©—è­‰å’Œæˆæ¬Šã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;div class="hx:overflow-x-auto hx:mt-6 hx:flex hx:rounded-lg hx:border hx:py-2 hx:ltr:pr-4 hx:rtl:pl-4 hx:contrast-more:border-current hx:contrast-more:dark:border-current hx:border-green-200 hx:bg-green-100 hx:text-green-900 hx:dark:border-green-200/30 hx:dark:bg-green-900/30 hx:dark:text-green-200">
&lt;div class="hx:ltr:pl-3 hx:ltr:pr-2 hx:rtl:pr-3 hx:rtl:pl-2">&lt;svg height=1.2em class="hx:inline-block hx:align-middle" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true">&lt;path stroke-linecap="round" stroke-linejoin="round" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>&lt;/svg>&lt;/div>
&lt;div class="hx:w-full hx:min-w-0 hx:leading-7">
&lt;div class="hx:mt-6 hx:leading-7 hx:first:mt-0">ç™½è©±æ–‡å°±æ˜¯ï¼šVault å¯ä»¥çµ±ä¸€é‡‘é‘°ç®¡ç†ä»¥åŠèº«ä»½é©—è­‰(åŒ…å«èˆ‡æ©Ÿå™¨ã€ä½¿ç”¨è€…ã€æ‡‰ç”¨ç¨‹å¼)ï¼Œè¨­è¨ˆä¸åŒçš„è·¯å¾‘ Policyï¼Œä¸¦ä¸”æœ‰ç¨½æ ¸ç´€éŒ„è·Ÿç›£æ§çš„ç®¡ç†ç³»çµ±&lt;/div>
&lt;/div>
&lt;/div>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/security/vault-introduce/how-vault-works.webp"
alt="Vault çš„æ¦‚è¿°ä»‹ç´¹åœ–" width="800">&lt;figcaption>
&lt;p>Vault çš„æ¦‚è¿°ä»‹ç´¹åœ–&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;h3>å·¥ä½œåŸç†&lt;span class="hx:absolute hx:-mt-20" id="å·¥ä½œåŸç†">&lt;/span>
&lt;a href="#%e5%b7%a5%e4%bd%9c%e5%8e%9f%e7%90%86" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>Vault çš„æ ¸å¿ƒå·¥ä½œæµç¨‹æœ‰å››å€‹éšæ®µï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Authenticate (èº«ä»½é©—è­‰)ï¼šå®¢æˆ¶ç«¯æä¾›è¨Šæ¯ï¼ŒVault æœƒä½¿ç”¨é€™äº›è³‡è¨Šä¾†ç¢ºèªå®¢æˆ¶ç«¯æ˜¯å¦èˆ‡å…¶è²ç¨±çš„èº«ä»½ä¸€è‡´ï¼Œé©—è­‰éå¾Œï¼Œç³»çµ±æœƒç”¢ç”Ÿä¸€å€‹ Token ä¸¦å°‡å…¶èˆ‡ Policy é—œè¯ (Policy å¾Œé¢æœƒæåˆ°)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Validation (é©—è­‰)ï¼šVault æœƒæ ¹æ“šç¬¬ä¸‰æ–¹å¯ä¿¡ä»»ä¾†æºé©—è­‰å®¢æˆ¶ç«¯ï¼Œä¾‹å¦‚ï¼šAWSã€GCPã€K8sã€Githubã€LDAP ç­‰&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Authorize (æˆæ¬Š)ï¼šVault æœƒå°‡å®¢æˆ¶ç«¯èˆ‡ Vault å®‰å…¨æ€§åŸå‰‡é€²è¡Œæ¯”å°ã€‚å®šç¾©å®¢æˆ¶ç«¯å¯ä»¥ä½¿ç”¨å“ªäº› Valut Token å­˜å–å“ªäº› API Endpointã€‚æä¾›ä¸€ç¨®è²æ˜å¼çš„æ–¹å¼ä¾†æˆäºˆæˆ–æ˜¯ç¦æ­¢å° Vault ç‰¹å®šè·¯å¾‘çš„æ“ä½œæ¬Šé™&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Access (å­˜å–æ¬Šé™)ï¼šVault é€éèˆ‡å®¢æˆ¶ç«¯èº«ä»½é—œè¯çš„ Policy é ’ç™¼ Token ä¸¦æˆäºˆå°é‡‘é‘°ã€æ©Ÿå¯†è³‡è¨Šå’ŒåŠ å¯†åŠŸèƒ½çš„å­˜å–æ¬Šé™&lt;/p>
&lt;/li>
&lt;/ul>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/security/vault-introduce/vault-workflow-diagram.webp"
alt="Vault çš„æ¦‚è¿°ä»‹ç´¹åœ–" width="600">&lt;figcaption>
&lt;p>Vault çš„æ¦‚è¿°ä»‹ç´¹åœ–&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;h3>å®‰è£ Valut&lt;span class="hx:absolute hx:-mt-20" id="å®‰è£-valut">&lt;/span>
&lt;a href="#%e5%ae%89%e8%a3%9d-valut" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>æˆ‘å€‘å¤§æ¦‚çŸ¥é“ Vault å®ƒçš„ç”¨é€”ï¼Œé‚£æ¥ä¸‹ä¾†ç•¶ç„¶å°±æ˜¯å®‰è£èµ·ä¾†ç©ç©çœ‹&lt;/p>
&lt;p>å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤å®‰è£ Vaultï¼š&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>brew tap hashicorp/tap
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>brew install hashicorp/tap/vault&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>å…¶ä»–ä½œæ¥­ç³»çµ±å¯ä»¥åƒè€ƒæ­¤ç¯‡æ–‡ä»¶ï¼š&lt;a href="https://developer.hashicorp.com/vault/install"target="_blank" rel="noopener">https://developer.hashicorp.com/vault/install&lt;svg class="hx:inline hx:rtl:rotate-270 hx:align-baseline" height="1em" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
&lt;path d="m9.1716 7.7574h7.0711m0 0v7.0711m0-7.0711-8.4853 8.4853" stroke-linecap="round" stroke-linejoin="round"/>
&lt;/svg>&lt;/a>&lt;/p>
&lt;br>
&lt;h2>ä½¿ç”¨ Dev é–‹ç™¼æ¨¡å¼ä¾†æ¸¬è©¦ Valut&lt;span class="hx:absolute hx:-mt-20" id="ä½¿ç”¨-dev-é–‹ç™¼æ¨¡å¼ä¾†æ¸¬è©¦-valut">&lt;/span>
&lt;a href="#%e4%bd%bf%e7%94%a8-dev-%e9%96%8b%e7%99%bc%e6%a8%a1%e5%bc%8f%e4%be%86%e6%b8%ac%e8%a9%a6-valut" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>ç”±æ–¼æˆ‘å€‘é‚„ä¸ç†Ÿæ‚‰ Vault å…ƒä»¶ï¼Œæ‰€ä»¥æˆ‘å€‘å…ˆç”¨ DEV æ¨¡å¼ä¾†æ¸¬è©¦ä»¥ä¸‹å…§å®¹ï¼š&lt;/p>
&lt;p>(é€™é‚Šæœƒä»¥ç¶­é‹è§’åº¦ä¾†èªªæ˜ï¼Œå¦‚æœé–‹ç™¼è€…è«‹æŸ¥é–±&lt;a href="https://developer.hashicorp.com/vault/docs/get-started/developer-qs"target="_blank" rel="noopener">é–‹ç™¼è€…å¿«é€Ÿå…¥é–€&lt;svg class="hx:inline hx:rtl:rotate-270 hx:align-baseline" height="1em" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
&lt;path d="m9.1716 7.7574h7.0711m0 0v7.0711m0-7.0711-8.4853 8.4853" stroke-linecap="round" stroke-linejoin="round"/>
&lt;/svg>&lt;/a>ï¼Œä¾†è®€å–ç›¸é—œ Vault secret)&lt;/p>
&lt;ul>
&lt;li>&lt;a href="#%e5%95%9f%e5%8b%95-dev-vault">å•Ÿå‹• DEV Vault&lt;/a>&lt;/li>
&lt;li>&lt;a href="#%e5%95%9f%e7%94%a8%e8%ba%ab%e4%bb%bd%e9%a9%97%e8%ad%89%e6%8f%92%e4%bb%b6">å•Ÿç”¨èº«ä»½é©—è­‰æ’ä»¶&lt;/a>&lt;/li>
&lt;li>&lt;a href="#%e5%95%9f%e7%94%a8%e9%8d%b5%e5%80%bc%e5%af%86%e9%91%b0%e6%8f%92%e4%bb%b6kv">å•Ÿç”¨éµ/å€¼å¯†é‘°æ’ä»¶(KV)&lt;/a>&lt;/li>
&lt;li>&lt;a href="#%e5%84%b2%e5%ad%98%e7%ac%ac%e4%b8%80%e5%80%8b%e6%a9%9f%e5%af%86">å„²å­˜ç¬¬ä¸€å€‹æ©Ÿå¯†&lt;/a>&lt;/li>
&lt;li>&lt;a href="#%e8%a8%ad%e8%a8%88%e4%bf%9d%e8%ad%b7%e6%a9%9f%e5%af%86%e8%b3%87%e8%a8%8a%e7%9a%84-policy">è¨­è¨ˆä¿è­·æ©Ÿå¯†è³‡è¨Šçš„ Policy&lt;/a>&lt;/li>
&lt;li>&lt;a href="#%e6%b8%ac%e8%a9%a6%e5%8f%8a%e9%a9%97%e8%ad%89-policy">æ¸¬è©¦åŠé©—è­‰ Policy&lt;/a>&lt;/li>
&lt;/ul>
&lt;br>
&lt;h3>å•Ÿå‹• DEV Vault&lt;span class="hx:absolute hx:-mt-20" id="å•Ÿå‹•-dev-vault">&lt;/span>
&lt;a href="#%e5%95%9f%e5%8b%95-dev-vault" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>å®‰è£å¥½ Vault å¾Œï¼Œæˆ‘å€‘å¯ä»¥åœ¨æœ¬æ©Ÿå•Ÿå‹• Vault ä¾†æ¸¬è©¦ (ç•¶ç„¶ Vault ä¹‹å¾Œæ­£å¼ç’°å¢ƒä¸æœƒåœ¨æœ¬æ©ŸåŸ·è¡Œï¼Œé€™å€‹æˆ‘å€‘ä¹‹å¾Œå†èªª)ï¼Œå•Ÿå‹•æŒ‡ä»¤å¯ä»¥åƒè€ƒï¼š&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>vault server -dev&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>æˆ–æ˜¯ä½ æƒ³è¦è‡ªå®šç¾© root token çš„ ID å°±å¯ä»¥å¤šå¸¶ &lt;code>-dev-root-token-id=&amp;quot;xxxx&amp;quot;&lt;/code>&lt;/p>
&lt;br>
&lt;p>å•Ÿå‹•å¾Œï¼Œå¯ä»¥ç™¼ç¾è·‘äº†ä¸€å †æ±è¥¿&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/security/vault-introduce/1.webp"
alt="å•Ÿå‹• Vault" width="700">&lt;figcaption>
&lt;p>å•Ÿå‹• Vault&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;p>æœ€å¾Œæœ‰ä¸€å€‹ WARNING æç¤ºï¼Œå‘Šè¨´æˆ‘å€‘ç¾åœ¨å•Ÿç”¨çš„æ˜¯é–‹ç™¼è€…æ¨¡å¼ï¼Œä¸”é€™å€‹æ¨¡å¼ä¸‹ Vault éƒ½é‹è¡Œåœ¨è¨˜æ†¶é«”ä¸­ï¼Œä¸¦ç”¨å–®ä¸€è§£å°é‡‘é‘°ä¸”è‡ªå‹•å¹«æˆ‘å€‘è§£å°ï¼ŒRoot Token æœƒåœ¨ CLI è‡ªå‹•å®Œæˆé©—è­‰&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/security/vault-introduce/2.webp"
alt="Vault DEV ç’°å¢ƒæç¤º" width="800">&lt;figcaption>
&lt;p>Vault DEV ç’°å¢ƒæç¤º&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;p>é‚£é€™é‚Šæœ‰æåˆ°è§£å°é‚„æœ‰è§£å°é‡‘é‘°ï¼Œæˆ‘å€‘å¾Œé¢æœƒæåˆ°ï¼Œæ‰€ä»¥é€™é‚Šå…ˆè·³éï¼Œå¤§å®¶å…ˆçŸ¥é“æœ‰é€™å€‹æ±è¥¿å°±å¯ä»¥äº†ï¼Œåœ¨ä¸Šé¢åœ–ç‰‡è£¡é¢ä¹Ÿæœ‰æ‰€è¬‚çš„è§£å°é‡‘é‘° &lt;code>L7+kfL/Of/MW846XMFL7riPX5oyoW1SwZVk9T++i8A0=&lt;/code>ï¼Œä»¥åŠ Root Token &lt;code>hvs.cCF4zQJ4bRwYEzouk621CFJr&lt;/code>&lt;/p>
&lt;br>
&lt;p>æˆ‘å€‘æ¥ä¸‹ä¾†è¦é€£ç·šåˆ°è©² Vault Serverï¼Œå…ˆå¦é–‹ä¸€å€‹æ–°çš„ Terminalï¼Œç„¶å¾Œä¸‹ &lt;code>export VAULT_ADDR='http://127.0.0.1:8200'&lt;/code> æŒ‡å®šå¥½ Vault Server Addressï¼Œå†ä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤ç™»å…¥ Valut&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>vault login hvs.cCF4zQJ4bRwYEzouk621CFJr&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>å¾Œé¢å°±ç›´æ¥å¸¶å…¥ Root Tokenï¼Œå¦‚æœä¸æƒ³è¦ export VAULT_ADDRï¼Œä¹Ÿå¯ä»¥åœ¨å¾Œé¢å¸¶å…¥ &lt;code>-address=&lt;/code> åƒæ•¸&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/security/vault-introduce/3.webp"
alt="ç™»å…¥æˆåŠŸ" width="650">&lt;figcaption>
&lt;p>ç™»å…¥æˆåŠŸ&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;p>å¯ä»¥ç™¼ç¾ç™»å…¥å¾Œï¼Œä»–æœƒå¹«æˆ‘å€‘å¯«å…¥ Token åˆ°æœ¬æ©Ÿçš„ &lt;code>$HOME/.vault-token&lt;/code>ï¼Œæ‰€ä»¥å¾ŒçºŒæ“ä½œæ‰ä¸éœ€è¦é‡è¤‡ç™»å…¥ï¼Œä¹Ÿé€™å€‹å»ºè­°åªåœ¨é–‹ç™¼ç’°å¢ƒä½¿ç”¨ï¼Œä¸ç„¶é‚„æ˜¯æœƒæœ‰è³‡å®‰ç–‘æ…®&lt;/p>
&lt;br>
&lt;p>å¦å¤– vault ä¹Ÿæœ‰ UI å¯ä»¥ä½¿ç”¨ï¼Œå¯ä»¥è¨ªå• &lt;code>http://127.0.0.1:8200/ui&lt;/code>ï¼Œé¸æ“‡ Token ä¸¦å¸¶å…¥å‰›å‰›çš„ Root Token å³å¯ç™»å…¥ï¼Œé‚£æˆ‘å€‘å¾ŒçºŒèªªæ˜åŸºæœ¬ä¸Šéƒ½æœƒä»¥ CLI æ–¹å¼ä¾†èªªæ˜ï¼Œå¤§å®¶å¯ä»¥æ­é… UI ä¾†è¼”åŠ©æŸ¥çœ‹è¨­å®šå…§å®¹&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/security/vault-introduce/4.webp"
alt="Vault UI ä»‹é¢" width="1000">&lt;figcaption>
&lt;p>Vault UI ä»‹é¢&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;br>
&lt;h3>å•Ÿç”¨èº«ä»½é©—è­‰æ’ä»¶&lt;span class="hx:absolute hx:-mt-20" id="å•Ÿç”¨èº«ä»½é©—è­‰æ’ä»¶">&lt;/span>
&lt;a href="#%e5%95%9f%e7%94%a8%e8%ba%ab%e4%bb%bd%e9%a9%97%e8%ad%89%e6%8f%92%e4%bb%b6" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>é‚£åœ¨ Vault è£¡é¢æ”¯æ´äº†å¾ˆå¤šç¨®çš„èº«ä»½é©—è­‰æ©Ÿåˆ¶ï¼Œå®ƒæ§åˆ¶ä½¿ç”¨è€… / å·¥ä½œæ©Ÿå™¨å° Vault çš„å­˜å–æ¬Šé™ï¼Œä¾‹å¦‚ AppRoleã€GCPã€AWSã€GitHub ç­‰ç­‰ï¼Œè©³ç´°å¯ä»¥çœ‹ï¼š&lt;a href="https://developer.hashicorp.com/vault/docs/auth"target="_blank" rel="noopener">Auth methods&lt;svg class="hx:inline hx:rtl:rotate-270 hx:align-baseline" height="1em" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
&lt;path d="m9.1716 7.7574h7.0711m0 0v7.0711m0-7.0711-8.4853 8.4853" stroke-linecap="round" stroke-linejoin="round"/>
&lt;/svg>&lt;/a>&lt;/p>
&lt;p>é‚£ä¸Šé¢æ¯ä¸€ç¨®æ–¹æ³•éƒ½éœ€è¦è¢«å•Ÿç”¨æ‰å¯ä»¥ä½¿ç”¨ï¼Œé‚£æˆ‘å€‘é€™é‚Šå…ˆä»¥æœ€ç°¡å–®çš„æ–¹å¼ä¾†é©—è­‰ï¼Œä¹Ÿå°±æ˜¯ username + password (userpass)ï¼Œå•Ÿå‹•æŒ‡ä»¤ï¼š&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>vault auth enable userpass&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/security/vault-introduce/5.webp"
alt="å•Ÿå‹• auth methods userpass" width="800">&lt;figcaption>
&lt;p>å•Ÿå‹• auth methods userpass&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;p>å•Ÿå‹•å®Œæˆå¾Œï¼Œæˆ‘å€‘é¦¬ä¸Šä¾†å»ºç«‹ä¸€å€‹åç‚º pin-yi çš„ Userï¼Œå¯†ç¢¼ç‚º &lt;code>123qwe&lt;/code>ï¼Œä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤å»ºç«‹ï¼š&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>vault write auth/userpass/users/pin-yi password&lt;span style="color:#f92672">=&lt;/span>123qwe&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;p>ä¹Ÿå¯ä»¥å»ºç«‹ä¸€å€‹çµ¦æ©Ÿå™¨æˆ–æ‡‰ç”¨ç¨‹å¼ç”¨æˆ¶ç«¯çš„ approle é©—è­‰æ–¹æ³•ï¼Œä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤å•Ÿå‹•åŠå»ºç«‹ï¼š&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>vault auth enable approle
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>vault write auth/approle/role/demo-app-role &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> secret_id_ttl&lt;span style="color:#f92672">=&lt;/span>10m &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> token_ttl&lt;span style="color:#f92672">=&lt;/span>20m &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> token_max_ttl&lt;span style="color:#f92672">=&lt;/span>30m&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;ul>
&lt;li>
&lt;p>secret_id_ttlï¼šå®šç¾© SecretID çš„å­˜æ´»æ™‚é–“ã€‚è¶…éæ™‚é–“å¾Œè©² SecretID ä½œå»¢ï¼Œä¸èƒ½å†ç”¨æ–¼æ›å– Tokenã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>token_ttlï¼šå®šç¾©ä»¥æ­¤ Role ç”Ÿæˆçš„ Token çš„åˆå§‹æœ‰æ•ˆæ™‚é–“ã€‚Token åœ¨åˆ°æœŸå‰è‹¥æœªçºŒç§Ÿå³å¤±æ•ˆã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>token_max_ttlï¼šå®šç¾© Token èƒ½è¢«çºŒç§Ÿçš„æœ€é•·ç¸½ç”Ÿå­˜æ™‚é–“ã€‚å³ä¾¿ä¸æ–·çºŒç§Ÿï¼Œåªè¦è¶…éæ­¤ä¸Šé™ï¼ŒToken å¿…å®šå¤±æ•ˆã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/security/vault-introduce/6.webp"
alt="å»ºç«‹ userpass user &amp;amp; å•Ÿå‹• approle åŠå»ºç«‹ demo-app-role" width="800">&lt;figcaption>
&lt;p>å»ºç«‹ userpass user &amp;amp; å•Ÿå‹• approle åŠå»ºç«‹ demo-app-role&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;h3>å•Ÿç”¨éµ/å€¼å¯†é‘°æ’ä»¶(KV)&lt;span class="hx:absolute hx:-mt-20" id="å•Ÿç”¨éµå€¼å¯†é‘°æ’ä»¶kv">&lt;/span>
&lt;a href="#%e5%95%9f%e7%94%a8%e9%8d%b5%e5%80%bc%e5%af%86%e9%91%b0%e6%8f%92%e4%bb%b6kv" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>åœ¨ Vault æ”¯æ´å¾ˆå¤š&lt;a href="https://developer.hashicorp.com/vault/docs/secrets"target="_blank" rel="noopener">å¯†é‘°å¼•æ“&lt;svg class="hx:inline hx:rtl:rotate-270 hx:align-baseline" height="1em" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
&lt;path d="m9.1716 7.7574h7.0711m0 0v7.0711m0-7.0711-8.4853 8.4853" stroke-linecap="round" stroke-linejoin="round"/>
&lt;/svg>&lt;/a>ï¼Œä¾‹å¦‚ï¼šKey Vaule (KV)ã€PKI (Certificates)ã€LDAPã€GCPã€AWSã€SSH ç­‰ï¼Œä¾ç…§éœ€æ±‚é¸ç”¨å°æ‡‰çš„å¼•æ“ä¾†ç®¡ç†æ©Ÿå¯†&lt;/p>
&lt;p>é‚£æˆ‘å€‘ç¾åœ¨ä½¿ç”¨ Key/Vaule (KV) ä¾†æ¸¬è©¦ï¼Œä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤å•Ÿå‹•è©²æ’ä»¶ï¼š&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>vault secrets enable -path demo -version &lt;span style="color:#ae81ff">2&lt;/span> kv&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;ul>
&lt;li>path å¯ä»¥æŒ‡å®šå„²å­˜çš„è·¯å¾‘(ç”¨ä¾†è¨­è¨ˆå€åˆ†)&lt;/li>
&lt;li>version åœ¨ KV æœ‰ç‰ˆæœ¬ 1 è·Ÿ 2&lt;/li>
&lt;/ul>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/security/vault-introduce/7.webp"
alt="UI é¡¯ç¤ºå»ºç«‹å¥½çš„ secrets ä½¿ç”¨ kv version 2 å¼•æ“" width="800">&lt;figcaption>
&lt;p>UI é¡¯ç¤ºå»ºç«‹å¥½çš„ secrets ä½¿ç”¨ kv version 2 å¼•æ“&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;h3>å„²å­˜ç¬¬ä¸€å€‹æ©Ÿå¯†&lt;span class="hx:absolute hx:-mt-20" id="å„²å­˜ç¬¬ä¸€å€‹æ©Ÿå¯†">&lt;/span>
&lt;a href="#%e5%84%b2%e5%ad%98%e7%ac%ac%e4%b8%80%e5%80%8b%e6%a9%9f%e5%af%86" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>æˆ‘å€‘å·²ç¶“æœ‰å„²å­˜æ©Ÿå¯†çš„åœ°æ–¹ï¼Œè·¯å¾‘æ˜¯ demoï¼Œé‚£æ¥ä¸‹ä¾†æˆ‘å€‘å°±ä¾†å„²å­˜æˆ‘å€‘ç¬¬ä¸€å€‹æ©Ÿå¯†å§ï¼Œä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤ï¼š&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>vault kv put &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -mount demo &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> kv/uuid &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> id&lt;span style="color:#f92672">=&lt;/span>1998c2d4-f0d8-465e-8a46-db6d3607e72e id&lt;span style="color:#f92672">=&lt;/span>34d1802b-5adb-459c-bb3a-2f094084a6d1&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>å„²å­˜å®Œå¾Œï¼Œæœƒé¡¯ç¤ºå®ƒå„²å­˜åœ¨å“ªä¸€å€‹è·¯å¾‘ï¼Œä»¥åŠç›¸é—œçš„è³‡è¨Šï¼Œçµæœä¸å°å¿ƒæ‰‹æ»‘ï¼Œå¤šå„²å­˜äº†å¹¾æ¬¡ï¼Œå‰›å¥½å¯ä»¥è§€å¯Ÿä¸€ä¸‹ä»–çš„ç‰ˆæœ¬æ§åˆ¶ ğŸ˜—&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/security/vault-introduce/8.webp"
alt="å¯ä»¥è§€å¯Ÿ Version æ•¸å­—ä¸åŒ" width="650">&lt;figcaption>
&lt;p>å¯ä»¥è§€å¯Ÿ Version æ•¸å­—ä¸åŒ&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/security/vault-introduce/9.webp"
alt="ä½¿ç”¨ UI åˆ°å°æ‡‰è·¯å¾‘æŸ¥çœ‹å„²å­˜çš„ Secret" width="800">&lt;figcaption>
&lt;p>ä½¿ç”¨ UI åˆ°å°æ‡‰è·¯å¾‘æŸ¥çœ‹å„²å­˜çš„ Secret&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;p>é™¤æ­¤æŒ‡å¤–ï¼Œæˆ‘å€‘å†é¡å¤–å¯«ä¸€å€‹ api-keys çš„æ©Ÿå¯†ï¼Œç­‰ç­‰æœƒä½¿ç”¨åˆ°&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>vault kv put &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -mount demo &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> kv/api-keys &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> api_key&lt;span style="color:#f92672">=&lt;/span>9f3b12c7d84a4e0aab6e2d914f52c19d&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;h3>è¨­è¨ˆä¿è­·æ©Ÿå¯†è³‡è¨Šçš„ Policy&lt;span class="hx:absolute hx:-mt-20" id="è¨­è¨ˆä¿è­·æ©Ÿå¯†è³‡è¨Šçš„-policy">&lt;/span>
&lt;a href="#%e8%a8%ad%e8%a8%88%e4%bf%9d%e8%ad%b7%e6%a9%9f%e5%af%86%e8%b3%87%e8%a8%8a%e7%9a%84-policy" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>æˆ‘å€‘å·²ç¶“å¿«å®Œæˆåˆæ­¥çš„æµç¨‹äº†ï¼Œæˆ‘å€‘æœ‰èƒ½å¤ ç™»å…¥ Vault çš„ Tokenï¼Œä¹Ÿç”¨ userpass å»ºç«‹äº† pin-yi ä»¥åŠ approle çš„ demo-app-roleï¼Œä¹Ÿæ–°å¢äº†å…©å€‹æ©Ÿå¯†ï¼Œé‚£æˆ‘å€‘ç¾åœ¨å°±å‰©ä¸‹è¦å¯« Policy ä¾†å®šç¾©ï¼šé€™å€‹è·¯å¾‘çš„æ¬Šé™æ˜¯ä»€éº¼ï¼Œæœ€å¾Œæ›åˆ°å°æ‡‰çš„ auth ä¸Šé¢&lt;/p>
&lt;p>é¦–å…ˆï¼Œæˆ‘å€‘å…ˆç”¨ä»¥ä¸‹æŒ‡ä»¤ä¾†å»ºç«‹ï¼Œå°äº†ï¼Œç›®å‰åªæ˜¯ç‚ºäº†æ›´æ–¹ä¾¿çš„æ¸¬è©¦è·Ÿå­¸ç¿’ï¼Œæ‰€ä»¥éƒ½ä½¿ç”¨ CLIï¼Œä½†åœ¨å¯¦éš›ä½¿ç”¨ï¼Œå¼·çƒˆæ¨è–¦ä½¿ç”¨ Terraform ç­‰ IaC å·¥å…·ä¾†æ•´ç†é€™äº›å…§å®¹ï¼Œä¸¦æ­é… git flow ä¾†å®Œæˆæ›´æ–° Vaule çš„è¨­å®šä»¥åŠæ“ä½œ&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>vault policy write kv-access-policy - &lt;span style="color:#e6db74">&amp;lt;&amp;lt; EOF
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">path &amp;#34;demo/data/kv/uuid&amp;#34; {
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> capabilities = [&amp;#34;read&amp;#34;, &amp;#34;create&amp;#34;, &amp;#34;update&amp;#34;, &amp;#34;delete&amp;#34;]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">}
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">EOF&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>ä¸¦å°‡è©² Policy è¨­å®šåˆ°é€é userpass çš„ pin-yi ä¸Šé¢&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>vault write auth/userpass/users/pin-yi &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> policies&lt;span style="color:#f92672">=&lt;/span>kv-access-policy&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/security/vault-introduce/10.webp"
alt="å»ºç«‹ Policy &amp;amp; è¨­å®š Policy åˆ° userpass çš„ pin-yi user" width="650">&lt;figcaption>
&lt;p>å»ºç«‹ Policy &amp;amp; è¨­å®š Policy åˆ° userpass çš„ pin-yi user&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;h3>æ¸¬è©¦åŠé©—è­‰ Policy&lt;span class="hx:absolute hx:-mt-20" id="æ¸¬è©¦åŠé©—è­‰-policy">&lt;/span>
&lt;a href="#%e6%b8%ac%e8%a9%a6%e5%8f%8a%e9%a9%97%e8%ad%89-policy" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>è€¶ï¼Œåˆ°äº†æœ€å¾Œçš„é©—è­‰ç’°ç¯€ï¼Œæˆ‘å€‘è¦ä¾†æ¸¬è©¦çœ‹çœ‹ï¼Œä¸Šé¢è¨­å®šä»¥åŠæ–°å¢çš„å…§å®¹æ˜¯å¦å¯ä»¥æ­£å¸¸é‹ä½œ&lt;/p>
&lt;ul>
&lt;li>æ¸¬è©¦ç”¨ userpass ç™»å…¥&lt;/li>
&lt;/ul>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;pre>&lt;code>vault login -method=userpass username=pin-yi&lt;/code>&lt;/pre>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/security/vault-introduce/11.webp"
alt="æ¸¬è©¦ç™»å…¥" width="900">&lt;figcaption>
&lt;p>æ¸¬è©¦ç™»å…¥&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘å·²ç¶“å¯ä»¥æ”¹ç”¨ userpass method ä¾†é€²è¡Œç™»å…¥ï¼Œç™»å…¥å®Œæˆå¾Œï¼Œä¹Ÿæœƒæ›´æ–° &lt;code>$HOME/.vault-token&lt;/code>ï¼Œä¹Ÿå¯ä»¥æ”¹ç”¨ä»£è¡¨ pin-yi çš„ Token ä¾†ç™»å…¥&lt;/p>
&lt;br>
&lt;p>æ¥ä¸‹ä¾†æˆ‘å€‘å°±å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤ä¾†æ¸¬è©¦ Policy&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>vault kv get -mount&lt;span style="color:#f92672">=&lt;/span>demo kv/uuid
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>vault kv get -mount&lt;span style="color:#f92672">=&lt;/span>demo kv/api-keys&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/security/vault-introduce/12.webp"
alt="æ¸¬è©¦ Policy" width="650">&lt;figcaption>
&lt;p>æ¸¬è©¦ Policy&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;p>å¯ä»¥ç™¼ç¾ï¼Œç”±æ–¼æˆ‘å€‘çš„ kv-access-policy å…è¨± read é€™å€‹ &lt;code>demo/data/kv/uuid&lt;/code> è·¯å¾‘ï¼Œæ‰€ä»¥å¯ä»¥æ­£å¸¸è¨ªå•ï¼Œä½† &lt;code>demo/kv/api-keys&lt;/code> æ²’æœ‰è¨­å®šï¼Œå°±æœƒå‡ºç¾ 403 æ²’æœ‰æ¬Šé™&lt;/p>
&lt;br>
&lt;p>æˆ‘å€‘é¡å¤–æ¸¬è©¦ä¸€ä¸‹ï¼Œå…ˆå»ºç«‹ä¸€å€‹æ–°çš„ Policy å…è¨± read &lt;code>demo/kv/api-keys&lt;/code> ä¸¦é™„åŠ åˆ° auth method approle ä¸Šé¢å†é€²è¡Œä¸€æ¬¡æ¸¬è©¦ï¼Œä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤ï¼š&lt;/p>
&lt;p>(è¨˜å¾—è¦å…ˆåˆ‡å›åŸæœ¬çš„ Root Token ç™»å…¥ï¼Œä¸ç„¶ç›®å‰çš„ pin-yi æ˜¯æ²’æœ‰æ¬Šé™çš„)&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>vault policy write kv-approle-access-policy - &lt;span style="color:#e6db74">&amp;lt;&amp;lt; EOF
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">path &amp;#34;demo/data/kv/api-keys&amp;#34; {
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> capabilities = [&amp;#34;read&amp;#34;]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">}
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">EOF&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>vault write auth/approle/role/demo-app-role &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> policies&lt;span style="color:#f92672">=&lt;/span>kv-approle-access-policy&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/security/vault-introduce/13.webp"
alt="å»ºç«‹å¥½æ–°çš„ Policy è·Ÿç¶åˆ° demo-app-role ä¸Š" width="650">&lt;figcaption>
&lt;p>å»ºç«‹å¥½æ–°çš„ Policy è·Ÿç¶åˆ° demo-app-role ä¸Š&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;p>æ¥ä¸‹ä¾†è¦åˆ‡æˆ Role ä¾†æŸ¥çœ‹ï¼Œä½†å› ç‚º Role æ²’è¾¦æ³•åƒ userpass é‚£æ¨£ï¼Œæœƒéœ€è¦å–å¾— role-id ä»¥åŠ secret-idï¼Œæœ€å¾Œç”¢ç”Ÿ Tokenï¼Œä»¥ä¸‹æŒ‡ä»¤ï¼š&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>vault read auth/approle/role/demo-app-role/role-id
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>vault write -f auth/approle/role/demo-app-role/secret-id
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>vault write auth/approle/login role_id&lt;span style="color:#f92672">=&lt;/span>c073455d-7b65-b55f-9adc-dc381feae85c secret_id&lt;span style="color:#f92672">=&lt;/span>d86ca004-5ac0-96a1-9e45-7d7bde5a6f96&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/security/vault-introduce/14.webp"
alt="approle å–å¾— Token" width="900">&lt;figcaption>
&lt;p>approle å–å¾— Token&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;p>æœ‰æ‹¿åˆ° Token äº†ï¼Œæˆ‘å€‘å°±å¯ä»¥åƒæ˜¯æœ€ä¸€é–‹å§‹ç”¨ Root Token ä¸€æ¨£ç™»å…¥ï¼Œä¸¦æ¸¬è©¦ä¸€ä¸‹å…©å€‹ kv è®€å–ç‹€æ…‹ï¼Œä»¥ä¸‹æŒ‡ä»¤ï¼š&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>vault login hvs.CAESIKJ8sMjV51f7vCGnB6ohYQenSJm5NLO9sAnIx3H8GDg0Gh4KHGh2cy5UUkhvWG42cVNRaUNyZWw1ZkhRZHJmQUE&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/security/vault-introduce/15.webp"
alt="æ¸¬è©¦ Policy" width="650">&lt;figcaption>
&lt;p>æ¸¬è©¦ Policy&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;p>å¯ä»¥ç™¼ç¾ï¼Œç¾åœ¨å°±å¯ä»¥æ­£å¸¸è®€å– kv/api-keysï¼Œä½†ä¹Ÿä¸èƒ½è®€å– kv/uuidï¼Œå› ç‚ºæ²’æœ‰è¨­å®šæ¬Šé™&lt;/p>
&lt;br>
&lt;p>å¥½å•¦åˆ°é€™é‚Šï¼Œæˆ‘å€‘çš„é–‹ç™¼ç’°å¢ƒæ¸¬è©¦æµç¨‹å°±å·®ä¸å¤šçµæŸå•¦ï¼Œé‚£é€™é‚Šè£œä¸€äº›å‰é¢æœ‰æŒ–çš„å‘ï¼šè§£å°é‚„æœ‰è§£å°é‡‘é‘°æ˜¯ä»€éº¼ï¼Ÿ&lt;/p>
&lt;h2>è§£å°é‚„æœ‰è§£å°é‡‘é‘°æ˜¯ä»€éº¼ï¼Ÿ&lt;span class="hx:absolute hx:-mt-20" id="è§£å°é‚„æœ‰è§£å°é‡‘é‘°æ˜¯ä»€éº¼">&lt;/span>
&lt;a href="#%e8%a7%a3%e5%b0%81%e9%82%84%e6%9c%89%e8%a7%a3%e5%b0%81%e9%87%91%e9%91%b0%e6%98%af%e4%bb%80%e9%ba%bc" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>æˆ‘å€‘å¯ä»¥å¾å®˜ç¶²æ–‡ä»¶ &lt;a href="https://developer.hashicorp.com/vault/docs/concepts/seal"target="_blank" rel="noopener">Seal/Unseal&lt;svg class="hx:inline hx:rtl:rotate-270 hx:align-baseline" height="1em" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
&lt;path d="m9.1716 7.7574h7.0711m0 0v7.0711m0-7.0711-8.4853 8.4853" stroke-linecap="round" stroke-linejoin="round"/>
&lt;/svg>&lt;/a> ä¸­å¾—çŸ¥ï¼š&lt;/p>
&lt;p>ç•¶æˆ‘å€‘åˆå§‹åŒ–å•Ÿå‹• Vault Server æ™‚ï¼Œé è¨­æœƒæ˜¯å¯†å°ç‹€æ…‹ï¼Œé€™å€‹ç‹€æ…‹ä¸‹ Vault èƒ½å¤ å­˜å–å¯¦é«”å„²å­˜ (Storage Backend) ï¼Œä½†ç„¡æ³•è§£å¯†å…¶ä¸­çš„ä»»ä½•è³‡æ–™&lt;/p>
&lt;p>ä¸”è§£å°æ˜¯å–å¾—è§£å¯†é‡‘é‘°çš„æ‰€éœ€æ˜æ–‡ Root é‡‘é‘°å…§å®¹ã€‚å†è§£å°ä¹‹å‰ï¼ŒVault å”¯ä¸€å¯ä»¥åŸ·è¡Œçš„æ“ä½œå°±æ˜¯è§£å° or æª¢æŸ¥ Server ç‹€æ…‹&lt;/p>
&lt;div class="hx:overflow-x-auto hx:mt-6 hx:flex hx:rounded-lg hx:border hx:py-2 hx:ltr:pr-4 hx:rtl:pl-4 hx:contrast-more:border-current hx:contrast-more:dark:border-current hx:border-blue-200 hx:bg-blue-100 hx:text-blue-900 hx:dark:border-blue-200/30 hx:dark:bg-blue-900/30 hx:dark:text-blue-200">
&lt;div class="hx:ltr:pl-3 hx:ltr:pr-2 hx:rtl:pr-3 hx:rtl:pl-2">&lt;svg height=1.2em class="hx:inline-block hx:align-middle" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true">&lt;path stroke-linecap="round" stroke-linejoin="round" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>&lt;/svg>&lt;/div>
&lt;div class="hx:w-full hx:min-w-0 hx:leading-7">
&lt;div class="hx:mt-6 hx:leading-7 hx:first:mt-0">é‚£é€™é‚Šå…ˆç°¡å–®å°æä¸€ä¸‹ Storage Backend æ˜¯ä»€éº¼ï¼Œå¾Œé¢æœƒå†èªªæ˜ï¼Œåœ¨ Vaule å•Ÿå‹•æ™‚ï¼Œå¯ä»¥é¸æ“‡è³‡æ–™çš„å­˜æ”¾ä½ç½®ï¼Œé‚£é€™å€‹ Storage Backend æœ‰å¾ˆå¤šå¯ä»¥é¸æ“‡ï¼Œ è³‡æ–™æœƒé€éåŠ å¯†å„²å­˜åˆ°è£¡é¢&lt;/div>
&lt;/div>
&lt;/div>
&lt;p>ç•¶ Vault è§£å°å¾Œï¼Œæœƒå°‡åŠ å¯†å¯†é‘°å­˜åˆ°è¨˜æ†¶é«”ï¼Œå› æ­¤å¯ä»¥æ­£å¸¸å»åŠ è§£å¯†ï¼Œè€Œ Storage Backend æ°¸é éƒ½æ˜¯å„²å­˜å¯†æ–‡ï¼Œå› æ­¤ä¹‹å¾Œè¦å‚™ä»½ï¼Œå…¶å¯¦åªè¦å‚™ä»½è©² Storage Backendï¼Œä»¥åŠå°‡è§£å¯†é‡‘é‘°å¸¶å…¥å°±å¯ä»¥è§£å¯†äº†ï¼Œå°±ç®— Storage Backend è¢«é§­å®¢æ‹¿åˆ°ï¼Œå¦‚æœæ²’æœ‰è§£å¯†é‡‘é‘°ï¼Œä¹Ÿç„¡æ³•çœ‹åˆ°è£¡é¢çš„å…§å®¹&lt;/p>
&lt;p>é€™é‚Šä¹Ÿä¾†æä¸€ä¸‹ Vault ä»–çš„åŠ å¯†æ¼”ç®—æ³•ï¼Œé è¨­æ˜¯ä½¿ç”¨ Shamir sealsï¼Œä»–æœƒç”¢ç”Ÿå¤šçµ„å¯†é‘°ï¼Œåœ¨è§£å¯†æ™‚ï¼Œéœ€è¦è¼¸å…¥å°æ‡‰é–€æª»çš„å¯†é‘°æ‰å¯ä»¥è§£å¯†ï¼Œä¾‹å¦‚å®ƒç”¢ç”Ÿ 5 æŠŠï¼Œæœƒéœ€è¦è¼¸å…¥ 3 æŠŠæ‰å¯ä»¥æ­£å¸¸è§£å¯†ï¼Œå› æ­¤éœ€è¦å°‡é€™å¹¾æŠŠå¯†é‘°åˆ†é–‹å­˜æ”¾&lt;/p>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/security/vault-introduce/16.webp"
alt="æ¸¬è©¦ Policy" width="650">&lt;figcaption>
&lt;p>æ¸¬è©¦ Policy&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;p>é‚£æˆ‘å€‘ä¸Šé¢æ¸¬è©¦æ˜¯ç”¨ DEV é–‹ç™¼ç’°å¢ƒï¼Œæ•…åªæœ‰ç”¢ç”Ÿä¸€çµ„å¯†é‘°ï¼Œä¸”å·²ç¶“è‡ªå‹•è§£å¯†ï¼Œæ­£å¼ç’°å¢ƒåœ¨æœå‹™å»ºç«‹åˆå§‹åŒ–æ™‚ï¼Œå°±éœ€è¦å…ˆè¼¸å…¥å°æ‡‰çš„å¯†é‘°ï¼Œè‹¥æœ‰é‡å•Ÿç­‰ä¹Ÿæœƒå› ç‚ºå­˜åœ¨è¨˜æ†¶é«”çš„åŠ å¯†å¯†é‘°ä¸è¦‹ï¼Œè€Œéœ€è¦é‡æ–°è¼¸å…¥&lt;/p>
&lt;br>
&lt;p>æœ€å¾Œï¼Œæˆ‘å€‘æ‹¿å‰›å‰›çš„ DEV ç’°å¢ƒä¾†æ¸¬è©¦çœ‹çœ‹å¯†å°è·Ÿè§£å°å§ (è¨˜å¾—è¦å†åˆ‡å›å» Root Token)&lt;/p>
&lt;p>ä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤ï¼Œå¯ä»¥åŠ åŸæœ¬è§£å°çš„è®Šæˆå¯†å°ï¼Œä¸¦æŸ¥çœ‹ Server ç‹€æ…‹&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>vault operator seal
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>vault status
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>vault secrets list&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/security/vault-introduce/17.webp"
alt="æ¸¬è©¦å¯†å°ï¼Œè§€å¯Ÿ Server ç‹€æ…‹" width="500">&lt;figcaption>
&lt;p>æ¸¬è©¦å¯†å°ï¼Œè§€å¯Ÿ Server ç‹€æ…‹&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;p>å¯ä»¥çœ‹åˆ°å¯†å°åï¼ŒServer ç‹€æ…‹çš„ Sealed æœƒå¾ false è®Šæˆ trueï¼Œä¸”ç„¡æ³•é€²è¡Œå…¶ä»–çš„æ“ä½œäº†&lt;/p>
&lt;br>
&lt;p>æˆ‘å€‘ä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤ï¼Œå¸¶å…¥è§£å°å¯†é‘°ä¾†è§£å°çœ‹çœ‹(DEV åªæœ‰ä¸€æŠŠ)ï¼Œä¸¦æ¸¬è©¦æ˜¯å¦èƒ½å¤  list secret&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>vault operator unseal L7+kfL/Of/MW846XMFL7riPX5oyoW1SwZVk9T++i8A0&lt;span style="color:#f92672">=&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>vault secrets list&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;br>
&lt;figure>&lt;img src="https://pin-yi.me/security/vault-introduce/18.webp"
alt="è§£å°ä¸¦æª¢æŸ¥åŠŸèƒ½" width="800">&lt;figcaption>
&lt;p>è§£å°ä¸¦æª¢æŸ¥åŠŸèƒ½&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;br>
&lt;p>å¯ä»¥ç™¼ç¾å°±æ­£å¸¸å›‰ï½&lt;/p>
&lt;br>
&lt;h2>Storage Backend&lt;span class="hx:absolute hx:-mt-20" id="storage-backend">&lt;/span>
&lt;a href="#storage-backend" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>Vault å¯ä»¥é¸æ“‡ä¸åŒçš„ Storage Backendï¼Œç”¨ä¾†æ”¾ç½®åŠ å¯†å¾Œçš„å…§å®¹&lt;/p>
&lt;p>å¦‚æœéœ€è¦ HA è¨˜å¾— Storage Backend ä¹Ÿéœ€è¦ç¢ºèªæ˜¯å¦æ”¯æ´&lt;/p>
&lt;p>è©³ç´°çš„èªªæ˜å¯ä»¥åƒè€ƒ&lt;a href="https://developer.hashicorp.com/vault/docs/configuration/storage"target="_blank" rel="noopener">å®˜æ–¹æ–‡ä»¶&lt;svg class="hx:inline hx:rtl:rotate-270 hx:align-baseline" height="1em" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
&lt;path d="m9.1716 7.7574h7.0711m0 0v7.0711m0-7.0711-8.4853 8.4853" stroke-linecap="round" stroke-linejoin="round"/>
&lt;/svg>&lt;/a> or ä¹‹å¾Œæœ‰æ™‚é–“å†ä¾†æ›´æ–°å…§å®¹ xD&lt;/p>
&lt;br>
&lt;h2>æ³¨æ„äº‹é …&lt;span class="hx:absolute hx:-mt-20" id="æ³¨æ„äº‹é …">&lt;/span>
&lt;a href="#%e6%b3%a8%e6%84%8f%e4%ba%8b%e9%a0%85" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>Vault HA å…¶å¯¦è®€å¯«é‚„æ˜¯éƒ½é€é primary å»è™•ç†&lt;/p>
&lt;p>ç•¶å¤§é‡çš„æœå‹™è«‹æ±‚ï¼Œå¯èƒ½æœƒæŠŠ Server æ‰“çˆ†&lt;/p>
&lt;p>æ‰€ä»¥éœ€è¦å•Ÿç”¨ rate limit æ©Ÿåˆ¶ä¾†ä¿è­· Vaultï¼Œæˆ–æ˜¯ app å–å¾— vault secret å¾Œï¼Œåœ¨æœ¬åœ° cacheï¼Œä¸è¦æ¯æ¬¡éƒ½å»è·Ÿ vault è«‹æ±‚&lt;/p>
&lt;br>
&lt;h2>åƒè€ƒè³‡æ–™&lt;span class="hx:absolute hx:-mt-20" id="åƒè€ƒè³‡æ–™">&lt;/span>
&lt;a href="#%e5%8f%83%e8%80%83%e8%b3%87%e6%96%99" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>Vault Documentationï¼š&lt;a href="https://developer.hashicorp.com/vault/docs"target="_blank" rel="noopener">https://developer.hashicorp.com/vault/docs&lt;svg class="hx:inline hx:rtl:rotate-270 hx:align-baseline" height="1em" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
&lt;path d="m9.1716 7.7574h7.0711m0 0v7.0711m0-7.0711-8.4853 8.4853" stroke-linecap="round" stroke-linejoin="round"/>
&lt;/svg>&lt;/a>&lt;/p>
&lt;p>HashiCorp Vault on AWS &amp;amp; K8s - é›²ç«¯åœ°ç«¯é€šåƒçš„ç§é‘°ç®¡ç†å¹³å° ã€Webinarï¼š HashiCorp Vaultã€‘| æ­ç«‹å¨ç§‘æŠ€ï¼š&lt;a href="https://www.youtube.com/watch?v=YU_rQz8emoE"target="_blank" rel="noopener">https://www.youtube.com/watch?v=YU_rQz8emoE&lt;svg class="hx:inline hx:rtl:rotate-270 hx:align-baseline" height="1em" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
&lt;path d="m9.1716 7.7574h7.0711m0 0v7.0711m0-7.0711-8.4853 8.4853" stroke-linecap="round" stroke-linejoin="round"/>
&lt;/svg>&lt;/a>&lt;/p>
&lt;p>å¾é›¶é–‹å§‹çš„ 30 å¤© Hashicorp Vault Workshopï¼š&lt;a href="https://ithelp.ithome.com.tw/users/20120327/ironman/6764"target="_blank" rel="noopener">https://ithelp.ithome.com.tw/users/20120327/ironman/6764&lt;svg class="hx:inline hx:rtl:rotate-270 hx:align-baseline" height="1em" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
&lt;path d="m9.1716 7.7574h7.0711m0 0v7.0711m0-7.0711-8.4853 8.4853" stroke-linecap="round" stroke-linejoin="round"/>
&lt;/svg>&lt;/a>&lt;/p></description></item></channel></rss>